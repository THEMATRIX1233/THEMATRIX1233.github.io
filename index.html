<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GUÃA MEGA COMPLETA â€“ Robot Micromouse STM32</title>
<style>
:root {
  --rojo: #e63946;
  --azul: #1d3557;
  --azul-light: #457b9d;
  --verde: #2d6a4f;
  --verde-light: #52b788;
  --amarillo: #f4a261;
  --naranja: #e76f51;
  --gris-oscuro: #1a1a2e;
  --gris-claro: #f8f9fa;
  --blanco: #ffffff;
  --morado: #7b2d8b;
  --cyan: #0077b6;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Segoe UI', 'Arial', sans-serif;
  background: #eef2f7;
  color: #222;
  font-size: 14.5px;
  line-height: 1.6;
}

/* ===== PORTADA ===== */
.portada {
  background: linear-gradient(160deg, #0f0c29, #302b63, #24243e);
  color: white;
  padding: 70px 40px 50px;
  text-align: center;
  position: relative;
  overflow: hidden;
}
.portada::before {
  content: '';
  position: absolute; top: 0; left: 0; right: 0; bottom: 0;
  background: repeating-linear-gradient(
    0deg, transparent, transparent 40px,
    rgba(255,255,255,0.02) 40px, rgba(255,255,255,0.02) 41px
  ), repeating-linear-gradient(
    90deg, transparent, transparent 40px,
    rgba(255,255,255,0.02) 40px, rgba(255,255,255,0.02) 41px
  );
}
.portada-content { position: relative; z-index: 1; }
.portada h1 { font-size: 3em; font-weight: 900; letter-spacing: 3px; color: #00d4ff; text-shadow: 0 0 30px rgba(0,212,255,0.5); margin-bottom: 8px; }
.portada h2 { font-size: 1.4em; color: #ffd166; margin-bottom: 6px; }
.portada h3 { font-size: 1em; color: #aaa; margin-bottom: 25px; font-weight: 400; }
.badge-row { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; margin: 20px 0; }
.badge { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 5px 14px; border-radius: 20px; font-size: 0.8em; backdrop-filter: blur(4px); }
.badge.hot { background: rgba(230,57,70,0.4); border-color: #e63946; }
.warning-portada { background: rgba(244,162,97,0.2); border: 2px solid #f4a261; border-radius: 10px; padding: 12px 20px; max-width: 600px; margin: 20px auto 0; font-size: 0.9em; color: #ffd166; }

/* ===== LAYOUT ===== */
.wrap { max-width: 1150px; margin: 0 auto; padding: 30px 20px; }

/* ===== SECCIONES ===== */
.seccion {
  background: white;
  border-radius: 16px;
  padding: 35px;
  margin: 25px 0;
  box-shadow: 0 4px 20px rgba(0,0,0,0.08);
  border-top: 5px solid var(--azul);
}
.seccion.verde { border-top-color: var(--verde-light); }
.seccion.rojo { border-top-color: var(--rojo); }
.seccion.naranja { border-top-color: var(--naranja); }
.seccion.morado { border-top-color: var(--morado); }
.seccion.cyan { border-top-color: var(--cyan); }

.sec-titulo {
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 25px;
  padding-bottom: 14px;
  border-bottom: 2px solid #f0f0f0;
}
.sec-num {
  background: var(--azul);
  color: white;
  width: 42px; height: 42px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-weight: 900; font-size: 1.1em;
  flex-shrink: 0;
}
.seccion.verde .sec-num { background: var(--verde-light); }
.seccion.rojo .sec-num { background: var(--rojo); }
.seccion.naranja .sec-num { background: var(--naranja); }
.seccion.morado .sec-num { background: var(--morado); }
.seccion.cyan .sec-num { background: var(--cyan); }
.sec-titulo h2 { font-size: 1.55em; color: #1a1a2e; }
.sec-titulo .emoji { font-size: 1.6em; }

/* ===== SUBSECCIONES ===== */
.sub { margin: 22px 0; }
.sub h3 {
  font-size: 1.1em;
  color: var(--azul);
  padding: 8px 14px;
  background: #f0f4ff;
  border-left: 4px solid var(--azul-light);
  border-radius: 0 8px 8px 0;
  margin-bottom: 12px;
}
.sub h4 { font-size: 1em; color: #444; margin: 12px 0 6px; font-weight: 700; }

/* ===== CAJAS DE AVISO ===== */
.aviso {
  display: flex; gap: 12px; align-items: flex-start;
  padding: 14px 16px; border-radius: 10px; margin: 14px 0;
}
.aviso .icono { font-size: 1.5em; flex-shrink: 0; margin-top: 1px; }
.aviso .texto { flex: 1; }
.aviso .texto strong { display: block; margin-bottom: 3px; font-size: 1em; }
.aviso.peligro { background: #fff0f0; border: 2px solid #e63946; }
.aviso.peligro .icono::after { content: 'ğŸš¨'; }
.aviso.ojo { background: #fffbf0; border: 2px solid #f4a261; }
.aviso.ojo .icono::after { content: 'âš ï¸'; }
.aviso.tip { background: #f0fff4; border: 2px solid #52b788; }
.aviso.tip .icono::after { content: 'ğŸ’¡'; }
.aviso.info { background: #f0f7ff; border: 2px solid #457b9d; }
.aviso.info .icono::after { content: 'ğŸ“Œ'; }
.aviso.mecate { background: #fff8e1; border: 2px solid #ffc107; font-style: italic; }
.aviso.mecate .icono::after { content: 'ğŸ—£ï¸'; }

/* ===== TABLAS ===== */
.tabla-wrap { overflow-x: auto; margin: 12px 0; }
table { width: 100%; border-collapse: collapse; font-size: 13px; }
thead th { background: var(--azul); color: white; padding: 11px 13px; text-align: left; }
tbody td { padding: 9px 13px; border-bottom: 1px solid #e8e8e8; vertical-align: top; }
tbody tr:nth-child(even) { background: #f8f9fa; }
tbody tr:hover { background: #e8f0ff; }
.col-pin { font-family: 'Courier New', monospace; font-weight: bold; color: #c0392b; background: #fff5f5; padding: 2px 7px; border-radius: 4px; white-space: nowrap; }
.col-comp { font-weight: 700; color: #1a1a2e; }
.col-dir { font-family: monospace; color: #2980b9; font-weight: bold; }

/* ===== WIRE COLORS ===== */
.w { display: inline-flex; align-items: center; gap: 5px; font-size: 12px; font-weight: 600; white-space: nowrap; }
.w .dot { width: 13px; height: 13px; border-radius: 50%; border: 1.5px solid rgba(0,0,0,0.25); flex-shrink: 0; }
.w-rojo .dot { background: #e63946; }
.w-negro .dot { background: #222; }
.w-azul .dot { background: #2196F3; }
.w-verde .dot { background: #4caf50; }
.w-amarillo .dot { background: #FFC107; border-color: #999; }
.w-blanco .dot { background: #fff; border: 1.5px solid #aaa; }
.w-naranja .dot { background: #ff9800; }
.w-morado .dot { background: #9c27b0; }
.w-gris .dot { background: #9e9e9e; }

/* ===== DIAGRAMA DE CABLEADO VISUAL ===== */
.diagrama-cable {
  background: #0d1117;
  color: #c9d1d9;
  font-family: 'Courier New', monospace;
  font-size: 12.5px;
  line-height: 1.8;
  padding: 25px 28px;
  border-radius: 12px;
  margin: 16px 0;
  overflow-x: auto;
  border: 1px solid #30363d;
  white-space: pre;
}
.diagrama-cable .verde { color: #56d364; }
.diagrama-cable .rojo { color: #ff7b72; }
.diagrama-cable .azul { color: #79c0ff; }
.diagrama-cable .amarillo { color: #e3b341; }
.diagrama-cable .cyan { color: #39d5ff; }
.diagrama-cable .morado { color: #d2a8ff; }
.diagrama-cable .gris { color: #8b949e; }
.diagrama-cable .naranja { color: #ffa657; }
.diagrama-cable .blanco { color: #f0f6fc; }
.diagrama-cable .titulo { color: #ffd700; font-weight: bold; }

/* ===== COMPONENTE VISUAL ===== */
.comp-visual {
  background: #1e2233;
  border: 2px solid #3a4466;
  border-radius: 10px;
  padding: 18px;
  margin: 14px 0;
  font-family: 'Courier New', monospace;
  font-size: 12px;
  color: #c9d1d9;
  overflow-x: auto;
  white-space: pre;
}

/* ===== PASOS ===== */
.pasos { counter-reset: paso; }
.paso {
  counter-increment: paso;
  display: flex; gap: 16px; align-items: flex-start;
  background: #f8f9fa;
  border: 1px solid #e0e0e0;
  border-radius: 10px;
  padding: 16px;
  margin: 10px 0;
  transition: box-shadow 0.2s;
}
.paso:hover { box-shadow: 0 3px 12px rgba(0,0,0,0.1); }
.paso-num {
  background: var(--azul);
  color: white;
  width: 34px; height: 34px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-weight: 900; font-size: 1em;
  flex-shrink: 0;
}
.paso-num::before { content: counter(paso); }
.paso-content { flex: 1; }
.paso-content strong { color: #1a1a2e; }

/* ===== GRID ===== */
.grid2 { display: grid; grid-template-columns: 1fr 1fr; gap: 18px; margin: 14px 0; }
.grid3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 14px; margin: 14px 0; }
@media(max-width:750px) { .grid2, .grid3 { grid-template-columns: 1fr; } }

/* ===== TARJETAS ===== */
.card {
  background: #f8f9fa;
  border: 1.5px solid #e0e0e0;
  border-radius: 10px;
  padding: 16px;
}
.card h4 { color: var(--azul); margin-bottom: 10px; font-size: 1em; }
.card.volt-33 { border-top: 4px solid #2196F3; }
.card.volt-6 { border-top: 4px solid #4caf50; }
.card.volt-bat { border-top: 4px solid #e63946; }
.card.volt-5 { border-top: 4px solid #ff9800; }

/* ===== PINOUT VISUAL ===== */
.pinout-wrapper {
  display: grid;
  grid-template-columns: auto 160px auto;
  gap: 4px;
  align-items: center;
  margin: 20px auto;
  width: fit-content;
  max-width: 100%;
  overflow-x: auto;
}
.chip-centro {
  background: linear-gradient(145deg, #2d2d2d, #1a1a1a);
  color: #00ff88;
  font-family: 'Courier New', monospace;
  font-size: 11px;
  text-align: center;
  padding: 15px 10px;
  border-radius: 8px;
  border: 2px solid #555;
  line-height: 1.8;
  box-shadow: 0 0 20px rgba(0,255,136,0.15);
}
.pines-lado { display: flex; flex-direction: column; gap: 3px; }
.pin-fila {
  display: flex; align-items: center; gap: 5px;
  font-family: 'Courier New', monospace; font-size: 10.5px;
  height: 22px;
}
.pines-izq .pin-fila { flex-direction: row-reverse; }
.pn { /* pin number */
  background: #333; color: #ccc;
  width: 22px; height: 20px;
  display: flex; align-items: center; justify-content: center;
  border-radius: 3px; font-size: 9px; flex-shrink: 0;
}
.pf { /* pin function */
  padding: 2px 6px; border-radius: 4px;
  font-size: 10px; white-space: nowrap; font-weight: 600;
}
.pf-pwm { background: #fde8e8; color: #8b0000; border: 1px solid #faa; }
.pf-i2c { background: #dbeafe; color: #1e3a8a; border: 1px solid #93c5fd; }
.pf-enc { background: #dcfce7; color: #14532d; border: 1px solid #86efac; }
.pf-pwr { background: #fef9c3; color: #713f12; border: 1px solid #fde047; }
.pf-gpio { background: #f3e8ff; color: #581c87; border: 1px solid #c4b5fd; }
.pf-swd { background: #fff0e6; color: #7c2d12; border: 1px solid #fdba74; }
.pf-uart { background: #fce7f3; color: #831843; border: 1px solid #f9a8d4; }
.pf-nc { background: #f3f4f6; color: #6b7280; border: 1px solid #d1d5db; }
.linea-pin { width: 20px; height: 2px; background: #888; flex-shrink: 0; }

/* ===== CHECKLIST ===== */
.check-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
@media(max-width:700px) { .check-grid { grid-template-columns: 1fr; } }
.check-group { background: #f8f9fa; border-radius: 10px; padding: 16px; border: 1px solid #e0e0e0; }
.check-group h4 { margin-bottom: 10px; color: #1a1a2e; font-size: 1em; }
.check-item { display: flex; align-items: flex-start; gap: 10px; padding: 5px 0; border-bottom: 1px solid #eee; font-size: 13px; }
.check-item:last-child { border-bottom: none; }
.check-box { width: 18px; height: 18px; border: 2px solid #aaa; border-radius: 4px; flex-shrink: 0; margin-top: 1px; }

/* ===== TROUBLESHOOT ===== */
.trouble-item {
  border: 1.5px solid #e0e0e0;
  border-radius: 10px;
  margin: 10px 0;
  overflow: hidden;
}
.trouble-problema {
  background: #fde8e8;
  padding: 11px 16px;
  font-weight: 700;
  color: #7b1414;
  display: flex; align-items: center; gap: 8px;
}
.trouble-causa {
  background: #fff9e6;
  padding: 9px 16px;
  color: #7a5c00;
  font-size: 13px;
}
.trouble-solucion {
  background: #f0fff4;
  padding: 10px 16px;
  color: #155724;
  font-size: 13px;
}

/* ===== TABLA DE CONTENIDOS ===== */
.toc {
  background: linear-gradient(135deg, #1a1a2e, #16213e);
  color: white;
  border-radius: 14px;
  padding: 28px 32px;
  margin: 25px 0;
}
.toc h2 { color: #00d4ff; margin-bottom: 18px; font-size: 1.3em; }
.toc-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; }
@media(max-width:600px) { .toc-grid { grid-template-columns: 1fr; } }
.toc-item {
  display: flex; align-items: center; gap: 10px;
  padding: 7px 10px; border-radius: 7px;
  color: #c9d1d9; font-size: 13px;
  transition: background 0.2s;
}
.toc-item:hover { background: rgba(255,255,255,0.08); }
.toc-num {
  background: rgba(0,212,255,0.2);
  color: #00d4ff;
  width: 24px; height: 24px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 11px; font-weight: 700; flex-shrink: 0;
}

/* ===== POWER DIAGRAM ===== */
.power-flow {
  display: flex; align-items: center; justify-content: center;
  flex-wrap: wrap; gap: 5px; margin: 20px 0; font-size: 13px;
}
.pf-box {
  background: #1a1a2e; color: white;
  border: 2px solid #444; border-radius: 8px;
  padding: 12px 16px; text-align: center; min-width: 100px;
}
.pf-box.bat { border-color: #e63946; }
.pf-box.buck { border-color: #2196F3; }
.pf-box.boost { border-color: #4caf50; }
.pf-box.usb { border-color: #ff9800; }
.pf-arrow { font-size: 1.4em; color: #666; }
.pf-box h4 { font-size: 0.85em; color: #aaa; margin-bottom: 4px; }
.pf-box .volt { font-size: 1.3em; font-weight: 900; }
.pf-box.bat .volt { color: #e63946; }
.pf-box.buck .volt { color: #79c0ff; }
.pf-box.boost .volt { color: #56d364; }

/* ===== COMPONENTE CARD ===== */
.comp-card {
  display: flex; gap: 15px; align-items: flex-start;
  background: #f8f9fa; border: 1.5px solid #ddd;
  border-radius: 10px; padding: 14px; margin: 8px 0;
}
.comp-card-icon { font-size: 2em; flex-shrink: 0; width: 50px; text-align: center; }
.comp-card-info h4 { color: #1a1a2e; margin-bottom: 4px; }
.comp-card-info p { font-size: 12.5px; color: #555; }
.comp-card-info .tag { display: inline-block; background: #1d3557; color: white; padding: 2px 8px; border-radius: 10px; font-size: 11px; margin-right: 5px; margin-top: 3px; }

footer { text-align: center; padding: 40px 20px; color: #888; font-size: 12px; background: #1a1a2e; color: #555; margin-top: 40px; }
footer span { color: #00d4ff; }

.highlight { background: #ffec99; padding: 1px 5px; border-radius: 3px; font-weight: 700; }
code { background: #f0f0f0; padding: 2px 6px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #c0392b; }

.divider { height: 1px; background: linear-gradient(90deg, transparent, #ddd, transparent); margin: 20px 0; }

.resumen-final {
  background: linear-gradient(135deg, #0f0c29, #302b63);
  color: white;
  border-radius: 16px;
  padding: 35px;
  margin: 25px 0;
}
.resumen-final h2 { color: #00d4ff; margin-bottom: 20px; font-size: 1.4em; }
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PORTADA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="portada">
  <div class="portada-content">
    <div style="font-size:0.8em;color:#888;letter-spacing:3px;margin-bottom:10px;">GUÃA TÃ‰CNICA COMPLETA v2.0</div>
    <h1>ğŸ¤– MICROMOUSE</h1>
    <h2>Manual de Conexiones â€“ STM32F401CCU6</h2>
    <h3>Para armar el sistema desde cero, sin perderse en el camino</h3>
    <div class="badge-row">
      <span class="badge hot">âš¡ STM32F401CCU6</span>
      <span class="badge">ğŸ”­ VL53L0X Ã— 4</span>
      <span class="badge">ğŸ”„ MPU6050</span>
      <span class="badge">âš™ï¸ DRV8833 Ã— 2</span>
      <span class="badge">ğŸ”© GA12-N20 Ã— 2</span>
      <span class="badge">ğŸ§  MATLAB Simulink</span>
      <span class="badge">ğŸ”‹ LiPo 3.7V</span>
    </div>
    <div class="warning-portada">
      ğŸ—£ï¸ <strong>Oye escucha:</strong> Lee este manual de principio a fin ANTES de conectar cualquier cable.
      Un error en la alimentaciÃ³n puede daÃ±ar todo el sistema en milisegundos. 
      No hay undo en el hardware, asÃ­ que checa dos veces antes de encender.
    </div>
  </div>
</div>

<div class="wrap">

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TABLA DE CONTENIDOS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="toc">
  <h2>ğŸ“‹ Â¿QuÃ© viene en este manual?</h2>
  <div class="toc-grid">
    <div class="toc-item"><span class="toc-num">1</span> Lista de componentes completa</div>
    <div class="toc-item"><span class="toc-num">2</span> CÃ³mo funciona el sistema (arquitectura)</div>
    <div class="toc-item"><span class="toc-num">3</span> Sistema de alimentaciÃ³n â€“ lo primero</div>
    <div class="toc-item"><span class="toc-num">4</span> Pinout completo del STM32F401CCU6</div>
    <div class="toc-item"><span class="toc-num">5</span> Sensores VL53L0X Ã— 4 (I2C + XSHUT)</div>
    <div class="toc-item"><span class="toc-num">6</span> IMU MPU6050 (Giroscopio)</div>
    <div class="toc-item"><span class="toc-num">7</span> Driver DRV8833 Ã— 2 (motores)</div>
    <div class="toc-item"><span class="toc-num">8</span> Motores GA12-N20 + encoders</div>
    <div class="toc-item"><span class="toc-num">9</span> BotÃ³n de modo GPIOB</div>
    <div class="toc-item"><span class="toc-num">10</span> ProgramaciÃ³n ST-Link SWD</div>
    <div class="toc-item"><span class="toc-num">11</span> Diagrama global del sistema</div>
    <div class="toc-item"><span class="toc-num">12</span> Checklist antes de encender</div>
    <div class="toc-item"><span class="toc-num">13</span> Problemas comunes y soluciones</div>
    <div class="toc-item"><span class="toc-num">14</span> ConfiguraciÃ³n STM32CubeMX</div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N 1: COMPONENTES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="seccion verde">
  <div class="sec-titulo">
    <div class="sec-num">1</div>
    <span class="emoji">ğŸ§°</span>
    <h2>Lista de Componentes â€“ Todo lo que necesitas</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>Antes de arrancar:</strong>
      Consigue TODOS los componentes primero. No hay nada mÃ¡s frustrante que armar la mitad del sistema y descubrir que te falta un cable. AquÃ­ la lista completa.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ Componentes ElectrÃ³nicos</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>#</th><th>Componente</th><th>Cant.</th><th>FunciÃ³n en el robot</th><th>Voltaje</th><th>Corriente mÃ¡x.</th></tr></thead>
      <tbody>
        <tr><td>1</td><td class="col-comp">STM32F401CCU6 (BlackPill)</td><td>1</td><td>Cerebro del robot â€“ ejecuta el cÃ³digo Simulink</td><td>3.3V</td><td>150mA lÃ³gica</td></tr>
        <tr><td>2</td><td class="col-comp">VL53L0X (mÃ³dulo con breakout)</td><td>4</td><td>Mide distancia a las paredes del laberinto (laser ToF)</td><td>3.3V</td><td>20mA c/u</td></tr>
        <tr><td>3</td><td class="col-comp">MPU6050 (mÃ³dulo con breakout)</td><td>1</td><td>Giroscopio â€“ mide Ã¡ngulo de giro del robot</td><td>3.3V</td><td>10mA</td></tr>
        <tr><td>4</td><td class="col-comp">DRV8833 (mÃ³dulo o chip)</td><td>2</td><td>Driver que controla velocidad/direcciÃ³n de motores</td><td>VM=6V, VCC=3.3V</td><td>2A por motor</td></tr>
        <tr><td>5</td><td class="col-comp">Motor GA12-N20 300RPM 6V + encoder</td><td>2</td><td>Motores de tracciÃ³n izquierdo y derecho</td><td>6V</td><td>300mA sin carga</td></tr>
        <tr><td>6</td><td class="col-comp">BaterÃ­a LiPo 3.7V 500mAh</td><td>1</td><td>Fuente de energÃ­a principal del robot</td><td>3.7â€“4.2V</td><td>â€“</td></tr>
        <tr><td>7</td><td class="col-comp">Regulador Buck MP1584EN</td><td>1</td><td>Baja el voltaje de la baterÃ­a a 3.3V para el STM32</td><td>Vin=4-28V â†’ Vout=3.3V</td><td>3A</td></tr>
        <tr><td>8</td><td class="col-comp">Regulador Boost XL6009</td><td>1</td><td>Sube el voltaje de baterÃ­a a 6V para los motores</td><td>Vin=3V â†’ Vout=6V</td><td>4A</td></tr>
        <tr><td>9</td><td class="col-comp">Boost USB-C MT3608</td><td>1</td><td>Convierte USB 5V para cargar/alimentar</td><td>Vin=2-24V â†’ 5V</td><td>2A</td></tr>
        <tr><td>10</td><td class="col-comp">Pulsador tÃ¡ctil (4 pines)</td><td>1</td><td>Selecciona modo exploraciÃ³n o fast-run</td><td>3.3V lÃ³gica</td><td>â€“</td></tr>
        <tr><td>11</td><td class="col-comp">Resistor 10kÎ© (1/4W)</td><td>4</td><td>Pull-ups I2C (Ã—2) y pull-up botÃ³n + spare</td><td>â€“</td><td>â€“</td></tr>
        <tr><td>12</td><td class="col-comp">Condensador cerÃ¡mico 100nF</td><td>8</td><td>Desacoplo de alimentaciÃ³n cerca de cada chip</td><td>â€“</td><td>â€“</td></tr>
        <tr><td>13</td><td class="col-comp">Condensador electrolÃ­tico 10ÂµF</td><td>3</td><td>Filtro en salida de reguladores</td><td>â‰¥10V</td><td>â€“</td></tr>
        <tr><td>14</td><td class="col-comp">Interruptor ON/OFF</td><td>1</td><td>Encender/apagar todo el robot</td><td>â€“</td><td>â€“</td></tr>
        <tr><td>15</td><td class="col-comp">ST-Link V2 (programador)</td><td>1</td><td>Para grabar el firmware al STM32</td><td>â€“</td><td>â€“</td></tr>
        <tr><td>16</td><td class="col-comp">Cables Dupont M-H y H-H</td><td>40+</td><td>Conexiones entre componentes</td><td>â€“</td><td>â€“</td></tr>
        <tr><td>17</td><td class="col-comp">Protoboard 830 puntos</td><td>1</td><td>Para el prototipo sin soldar</td><td>â€“</td><td>â€“</td></tr>
      </tbody>
    </table>
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ› ï¸ Herramientas necesarias</h3>
    <div class="grid2">
      <div>
        <div class="comp-card"><div class="comp-card-icon">ğŸ“</div><div class="comp-card-info"><h4>MultÃ­metro digital</h4><p>Para medir voltajes, verificar conexiones y continuidad. Indispensable. Si no tienes uno, consÃ­guelo antes de empezar.</p><span class="tag">Esencial</span></div></div>
        <div class="comp-card"><div class="comp-card-icon">ğŸ’»</div><div class="comp-card-info"><h4>PC con MATLAB + STM32 Embedded Coder</h4><p>Para generar y grabar el cÃ³digo Simulink al STM32.</p><span class="tag">Esencial</span></div></div>
        <div class="comp-card"><div class="comp-card-icon">ğŸ”§</div><div class="comp-card-info"><h4>Desarmador de punta muy fina</h4><p>Para ajustar el potenciÃ³metro de los reguladores de voltaje.</p><span class="tag">Esencial</span></div></div>
      </div>
      <div>
        <div class="comp-card"><div class="comp-card-icon">ğŸ”¥</div><div class="comp-card-info"><h4>Soldador (si usas PCB)</h4><p>Para prototipo en protoboard no lo necesitas. SÃ­ para PCB final.</p><span class="tag">Opcional en protoboard</span></div></div>
        <div class="comp-card"><div class="comp-card-icon">ğŸ”</div><div class="comp-card-info"><h4>Lupa o lente de aumento</h4><p>Los chips son muy pequeÃ±os. Una lupa ayuda a verificar conexiones.</p><span class="tag">Muy Ãºtil</span></div></div>
        <div class="comp-card"><div class="comp-card-icon">ğŸ“±</div><div class="comp-card-info"><h4>App de I2C scanner (opcional)</h4><p>Para verificar que los sensores responden en las direcciones correctas.</p><span class="tag">Debug</span></div></div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N 2: ARQUITECTURA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="seccion cyan">
  <div class="sec-titulo">
    <div class="sec-num">2</div>
    <span class="emoji">ğŸ—ºï¸</span>
    <h2>Arquitectura del Sistema â€“ El panorama completo</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>EntiÃ©ndelo antes de conectar:</strong>
      Antes de tocar un solo cable, entiende cÃ³mo se conectan todas las partes. Es como leer el mapa antes de manejar. El robot tiene 5 subsistemas: alimentaciÃ³n, sensores, procesamiento, control y actuadores.
    </div>
  </div>

  <div class="diagrama-cable"><span class="titulo">â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ARQUITECTURA DEL ROBOT MICROMOUSE                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” SUBSISTEMA DE ALIMENTACIÃ“N â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

 <span class="rojo">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>   Switch     <span class="verde">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
 <span class="rojo">â”‚  LiPo 3.7V  â”‚</span>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<span class="verde">â”‚  MP1584EN Buck  â”‚</span>â”€â”€â”€â”€ <span class="azul">3.3V</span> â”€â”€â”€â–º STM32, VL53L0X Ã—4, MPU6050, DRV8833(VCC)
 <span class="rojo">â”‚  500 mAh    â”‚</span>    ON/OFF    <span class="verde">â”‚  (ajustar 3.3V) â”‚</span>
 <span class="rojo">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>              <span class="verde">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<span class="verde">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
                                 <span class="verde">â”‚  XL6009 Boost   â”‚</span>â”€â”€â”€â”€ <span class="verde">6.0V</span> â”€â”€â”€â–º DRV8833(VM) â†’ Motores
                                 <span class="verde">â”‚  (ajustar 6V)   â”‚</span>
                                 <span class="verde">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
        â”‚
        â””â”€â”€â”€â”€ <span class="gris">GND</span> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GND de TODO

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” SUBSISTEMA DE SENSADO â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

 <span class="cyan">VL53L0X-IZQ</span>  (addr 0x30) â”€â”
 <span class="cyan">VL53L0X-CENTRO</span>(addr 0x31) â”€â”¤â”€â”€â–º <span class="azul">I2C1: PB8(SCL), PB9(SDA)</span> â”€â”€â–º STM32F401
 <span class="cyan">VL53L0X-DER</span>  (addr 0x29) â”€â”˜    XSHUT: PB12, PB13, PB14

 <span class="cyan">VL53L0X-TRASERO</span>(addr 0x29) â”€â”€â–º <span class="azul">I2C2: PB10(SCL), PB3(SDA)</span> â”€â”€â–º STM32F401
 <span class="morado">MPU6050</span>       (addr 0x68) â”€â”€â–º <span class="azul">I2C2: PB10(SCL), PB3(SDA)</span> â”€â”€â–º STM32F401

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” SUBSISTEMA DE PROCESAMIENTO â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

                    <span class="azul">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
                    <span class="azul">â”‚         STM32F401CCU6 BlackPill       â”‚</span>
  BotÃ³n (PB0) â”€â”€â”€â”€â–º <span class="azul">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚</span>
                    <span class="azul">â”‚  â”‚  MODO_EXPLORACION o FAST_RUN    â”‚   â”‚</span>
  VL53L0X Ã— 4 â”€â”€â”€â–º <span class="azul">â”‚  â”‚  Mapa_Paredes (memoria)         â”‚   â”‚</span>
  MPU6050 â”€â”€â”€â”€â”€â”€â”€â”€â–º <span class="azul">â”‚  â”‚  Red_Neuronal_IA â†’ Ã¡ngulo       â”‚   â”‚</span>
                    <span class="azul">â”‚  â”‚  Control_PID â†’ velocidades      â”‚   â”‚</span>
                    <span class="azul">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚</span>
                    <span class="azul">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                              â”‚                â”‚
                  vel_motor_izq             vel_motor_der

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” SUBSISTEMA DE ACTUACIÃ“N â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

 STM32 PA8 (PWM) â”€â”€â–º <span class="naranja">DRV8833 #1</span> AIN1 â”€â”€â–º AOUT1 â”€â”€â–º Motor Izq (+)
 STM32 PA9 (DIR) â”€â”€â–º <span class="naranja">DRV8833 #1</span> AIN2 â”€â”€â–º AOUT2 â”€â”€â–º Motor Izq (â€“)
                     <span class="naranja">DRV8833 #1</span> VM â—„â”€â”€ 6V (XL6009)

 STM32 PA10(PWM) â”€â”€â–º <span class="naranja">DRV8833 #2</span> AIN1 â”€â”€â–º AOUT1 â”€â”€â–º Motor Der (+)
 STM32 PA11(DIR) â”€â”€â–º <span class="naranja">DRV8833 #2</span> AIN2 â”€â”€â–º AOUT2 â”€â”€â–º Motor Der (â€“)
                     <span class="naranja">DRV8833 #2</span> VM â—„â”€â”€ 6V (XL6009)

 Motor Izq Encoder A â”€â”€â–º STM32 PA6 (TIM3_CH1) â”€â”  retroalimentaciÃ³n
 Motor Izq Encoder B â”€â”€â–º STM32 PA7 (TIM3_CH2) â”€â”˜  de velocidad
 Motor Der Encoder A â”€â”€â–º STM32 PB6 (TIM4_CH1) â”€â”
 Motor Der Encoder B â”€â”€â–º STM32 PB7 (TIM4_CH2) â”€â”˜</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N 3: ALIMENTACIÃ“N â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="seccion rojo">
  <div class="sec-titulo">
    <div class="sec-num">3</div>
    <span class="emoji">âš¡</span>
    <h2>Sistema de AlimentaciÃ³n â€“ Empieza por aquÃ­</h2>
  </div>

  <div class="aviso peligro">
    <div class="icono"></div>
    <div class="texto">
      <strong>ğŸš¨ ESTO ES LO MÃS CRÃTICO DE TODO EL PROYECTO</strong>
      Un voltaje incorrecto destruye los chips en segundos. Los sensores VL53L0X y el STM32 <strong>NO toleran mÃ¡s de 3.6V</strong>. 
      Si conectas 5V o baterÃ­a directa (4.2V) a estos pines, se daÃ±an permanentemente. Sin vuelta atrÃ¡s.
    </div>
  </div>

  <div class="sub">
    <h3>âš¡ Las 3 lÃ­neas de voltaje del sistema</h3>
    <div class="grid3">
      <div class="card volt-bat">
        <h4>ğŸ”‹ BaterÃ­a LiPo</h4>
        <div style="font-size:2em;font-weight:900;color:#e63946;text-align:center;">3.7Vâ€“4.2V</div>
        <p style="font-size:12px;margin-top:6px;color:#555;">Fuente principal. VarÃ­a segÃºn carga. <strong>NUNCA conectar directamente</strong> a sensores ni STM32.</p>
        <div style="margin-top:8px;font-size:11px;color:#888;">Alimenta: Reguladores (Buck y Boost)</div>
      </div>
      <div class="card volt-33">
        <h4>ğŸ”µ MP1584EN â†’ 3.3V</h4>
        <div style="font-size:2em;font-weight:900;color:#2196F3;text-align:center;">3.30V</div>
        <p style="font-size:12px;margin-top:6px;color:#555;">Rail de lÃ³gica. Estable y regulado. Ajusta con el potenciÃ³metro del mÃ³dulo.</p>
        <div style="margin-top:8px;font-size:11px;color:#888;">Alimenta: STM32, VL53L0X Ã—4, MPU6050, DRV8833 VCC</div>
      </div>
      <div class="card volt-6">
        <h4>ğŸŸ¢ XL6009 â†’ 6.0V</h4>
        <div style="font-size:2em;font-weight:900;color:#4caf50;text-align:center;">6.00V</div>
        <p style="font-size:12px;margin-top:6px;color:#555;">Rail de potencia para motores. Los GA12-N20 trabajan a 6V nominales.</p>
        <div style="margin-top:8px;font-size:11px;color:#888;">Alimenta: DRV8833 VM â†’ Motores GA12-N20</div>
      </div>
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“ Diagrama visual de alimentaciÃ³n</h3>
    <div class="diagrama-cable"><span class="titulo">DIAGRAMA DE ALIMENTACIÃ“N COMPLETO</span>
<span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

  <span class="rojo">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="rojo">â”‚   BATERÃA LiPo     â”‚</span>
  <span class="rojo">â”‚   3.7V / 500mAh    â”‚</span>
  <span class="rojo">â”‚  [+]         [â€“]   â”‚</span>
  <span class="rojo">â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜</span>
     â”‚             â”‚
     â”‚<span class="rojo">â•”â•â•â•â•â•â•â•â•â•—</span>    â”‚
     â”‚<span class="rojo">â•‘SWITCH  â•‘</span>    â”‚
     â”‚<span class="rojo">â•‘ON/OFF  â•‘</span>    â”‚
     â”‚<span class="rojo">â•šâ•â•â•â•â•¤â•â•â•â•</span>    â”‚
     â”‚     â”‚          â”‚
     â””â”€â”€â”€â”€â”€â”¤          â”‚ (GND directo, sin switch)
           â”‚          â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”¤          â”‚
    â”‚      â”‚          â”‚
    â”‚  <span class="azul">â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>         <span class="azul">Salida 3.3V</span>
    â”‚  <span class="azul">â”‚    MP1584EN (BUCK)     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
    â”‚  <span class="azul">â”‚  VIN+ â”€â”€â”€ VOUT+        â”‚</span>                                         â”‚
    â”‚  <span class="azul">â”‚  [Ajustar a 3.3V]      â”‚</span>                                         â”‚
    â”‚  <span class="azul">â”‚  PotenciÃ³metro â†’  CW   â”‚</span>  Gira a la derecha = sube voltaje         â”‚
    â”‚  <span class="azul">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>                                         â”‚
    â”‚                                                                    â”‚
    â”‚  <span class="verde">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>         <span class="verde">Salida 6.0V</span>                       â”‚
    â”‚  <span class="verde">â”‚    XL6009 (BOOST)      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚</span>
    â”‚  <span class="verde">â”‚  VIN+ â”€â”€â”€ VOUT+        â”‚</span>                                    â”‚    â”‚
    â”‚  <span class="verde">â”‚  [Ajustar a 6.0V]      â”‚</span>                                    â”‚    â”‚
    â”‚  <span class="verde">â”‚  PotenciÃ³metro â†’  CCW  â”‚</span>  Gira a la izquierda = sube voltaje â”‚    â”‚
    â”‚  <span class="verde">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>                                    â”‚    â”‚
    â”‚                                                                 â”‚    â”‚
    â”‚<span class="gris">â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DESTINOS 3.3V â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚â•â•â•â•â•</span>
    â”‚                                                                 â”‚
    â”‚                                    <span class="azul">3.3V â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
    â”‚                                       â”‚
    â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                          â–¼            â–¼            â–¼             â–¼
    â”‚                    <span class="azul">STM32(VDD)  VL53L0XÃ—4  MPU6050   DRV8833Ã—2</span>
    â”‚                          â”‚            â”‚            â”‚   (VCC logic)
    â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                   â”‚
    â”‚<span class="gris">â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DESTINOS 6.0V â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>   â”‚
    â”‚                                                                 â”‚ â”‚
    â”‚                                   <span class="verde">6.0V â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span> â”‚
    â”‚                                      â”‚                           â”‚
    â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
    â”‚                          â–¼           â–¼                           â”‚
    â”‚                    <span class="verde">DRV8833#1(VM) DRV8833#2(VM)</span>                   â”‚
    â”‚                          â”‚           â”‚                           â”‚
    â”‚                          â–¼           â–¼                           â”‚
    â”‚                   <span class="verde">Motor Izq      Motor Der</span>                        â”‚
    â”‚                                                                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <span class="gris">GND COMÃšN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
       (conecta GND de baterÃ­a â†’ GND de Buck â†’ GND de Boost â†’ GND de STM32 â†’ GND de sensores â†’ GND de drivers)</div>
  </div>

  <div class="sub">
    <h3>ğŸ”§ Pasos para configurar los reguladores</h3>

    <h4>Paso 1: Configurar MP1584EN a 3.3V</h4>
    <div class="pasos">
      <div class="paso"><div class="paso-num"></div><div class="paso-content">Con la baterÃ­a desconectada, conecta el mÃ³dulo MP1584EN: <strong>VIN+ a baterÃ­a(+)</strong>, <strong>GND a baterÃ­a(â€“)</strong>. AsegÃºrate que el switch estÃ© en OFF.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content">Pon el multÃ­metro en modo <strong>VDC (Voltaje DC)</strong>. Conecta la punta roja a <strong>VOUT+</strong> y la negra a <strong>GND</strong> del regulador.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content">Enciende el switch. Mira el valor en el multÃ­metro. Si muestra algo distinto a 3.3V, necesitas ajustar el potenciÃ³metro.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content">Con un desarmador muy fino, gira el potenciÃ³metro del MP1584EN <strong>despacio</strong> hasta que el multÃ­metro marque exactamente <span class="highlight">3.30V</span>. Sentido horario sube, antihorario baja (puede variar por mÃ³dulo).</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content">Verifica que el voltaje sea estable. Anota: <strong>Este rail es el mÃ¡s importante.</strong> Todo el sistema lÃ³gico depende de Ã©l.</div></div>
    </div>

    <div class="divider"></div>
    <h4>Paso 2: Configurar XL6009 a 6.0V</h4>
    <div class="pasos">
      <div class="paso"><div class="paso-num"></div><div class="paso-content">Igual que antes: conecta <strong>VIN+</strong> a la baterÃ­a y <strong>GND</strong> a tierra.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content">Mide <strong>VOUT+</strong> con el multÃ­metro en modo VDC.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content">Ajusta el potenciÃ³metro hasta leer exactamente <span class="highlight">6.00V</span>. Los motores GA12-N20 trabajan a 6V nominales â€“ no subas de 6.5V.</div></div>
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“‹ Tabla completa de conexiones de alimentaciÃ³n</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>Desde</th><th>Pin / Terminal</th><th>Hasta</th><th>Pin / Terminal</th><th>Color cable</th><th>Notas</th></tr></thead>
      <tbody>
        <tr><td>BaterÃ­a LiPo</td><td>+ (positivo)</td><td>Switch ON/OFF</td><td>Terminal entrada</td><td><span class="w w-rojo"><span class="dot"></span>Rojo</span></td><td>Siempre switch primero</td></tr>
        <tr><td>Switch ON/OFF</td><td>Terminal salida</td><td>MP1584EN</td><td>VIN+</td><td><span class="w w-rojo"><span class="dot"></span>Rojo</span></td><td>â€“</td></tr>
        <tr><td>Switch ON/OFF</td><td>Terminal salida</td><td>XL6009</td><td>VIN+</td><td><span class="w w-naranja"><span class="dot"></span>Naranja</span></td><td>â€“</td></tr>
        <tr><td>BaterÃ­a LiPo</td><td>â€“ (negativo)</td><td>GND rail comÃºn</td><td>â€“</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>DIRECTO, sin switch</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>STM32 BlackPill</td><td>3V3 pin</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>Poner 100nF en este pin</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>VL53L0X Izq</td><td>VIN</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>â€“</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>VL53L0X Centro</td><td>VIN</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>â€“</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>VL53L0X Derecho</td><td>VIN</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>â€“</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>VL53L0X Trasero</td><td>VIN</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>â€“</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>MPU6050</td><td>VCC</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>â€“</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>DRV8833 #1</td><td>VCC y nSLEEP</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>nSLEEP = HIGH siempre</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>DRV8833 #2</td><td>VCC y nSLEEP</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>nSLEEP = HIGH siempre</td></tr>
        <tr><td>XL6009</td><td>VOUT+ (6.0V)</td><td>DRV8833 #1</td><td>VM (motor power)</td><td><span class="w w-verde"><span class="dot"></span>Verde</span></td><td>Potencia de motores</td></tr>
        <tr><td>XL6009</td><td>VOUT+ (6.0V)</td><td>DRV8833 #2</td><td>VM (motor power)</td><td><span class="w w-verde"><span class="dot"></span>Verde</span></td><td>Potencia de motores</td></tr>
        <tr><td>MP1584EN GND</td><td>GND</td><td>GND rail comÃºn</td><td>â€“</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>â€“</td></tr>
        <tr><td>XL6009 GND</td><td>GND</td><td>GND rail comÃºn</td><td>â€“</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>â€“</td></tr>
        <tr><td>STM32 BlackPill</td><td>GND</td><td>GND rail comÃºn</td><td>â€“</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>Hay 2 pines GND en la BlackPill</td></tr>
        <tr><td>VL53L0X Ã—4</td><td>GND (cada uno)</td><td>GND rail comÃºn</td><td>â€“</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>4 cables negro</td></tr>
        <tr><td>MPU6050</td><td>GND</td><td>GND rail comÃºn</td><td>â€“</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>â€“</td></tr>
        <tr><td>DRV8833 #1 y #2</td><td>GND (cada uno)</td><td>GND rail comÃºn</td><td>â€“</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>2 cables negro</td></tr>
      </tbody>
    </table>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N 4: PINOUT STM32 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="seccion">
  <div class="sec-titulo">
    <div class="sec-num">4</div>
    <span class="emoji">ğŸ–¥ï¸</span>
    <h2>Pinout del STM32F401CCU6 â€“ QuÃ© pin hace quÃ©</h2>
  </div>

  <div class="aviso info">
    <div class="icono"></div>
    <div class="texto">
      <strong>BlackPill STM32F401CCU6:</strong> Esta placa de desarrollo tiene todos los pines del STM32 accesibles en headers de 2.54mm. 
      Los pines estÃ¡n etiquetados en la PCB (PA0, PA1... PB0, PB1...). Es mucho mÃ¡s fÃ¡cil que soldar el chip directamente.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ—ºï¸ Mapa visual de la BlackPill STM32F401CCU6</h3>
    <div class="diagrama-cable"><span class="titulo">   BlackPill STM32F401CCU6 â€“ Vista superior con funciones asignadas</span>
<span class="gris">   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="gris">   â”‚   â•”â•â•â•—                              [USB-C]  â•”â•â•â•—   â”‚</span>
<span class="gris">   â”‚   â•‘B9â•Ÿâ”€â”€</span><span class="azul">I2C1_SDA â”€â”€â–º VL53L0X IZQ/CEN/DER</span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘B8â•Ÿâ”€â”€</span><span class="azul">I2C1_SCL â”€â”€â–º VL53L0X IZQ/CEN/DER</span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘B7â•Ÿâ”€â”€</span><span class="verde">TIM4_CH2 â—„â”€â”€ Encoder Derecho B   </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘B6â•Ÿâ”€â”€</span><span class="verde">TIM4_CH1 â—„â”€â”€ Encoder Derecho A   </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘B5â•Ÿâ”€â”€</span><span class="gris">NC                               </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘B4â•Ÿâ”€â”€</span><span class="gris">NC                               </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘B3â•Ÿâ”€â”€</span><span class="azul">I2C2_SDA â”€â”€â–º VL53L0X TRASERO + MPU6050</span><span class="gris">â”€â”€â•¢  â•Ÿ â”‚</span>
<span class="gris">   â”‚   â•‘A15â•Ÿâ”€â”€</span><span class="gris">NC                               </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘A12â•Ÿâ”€â”€</span><span class="gris">NC (USB D+)                      </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘A11â•Ÿâ”€â”€</span><span class="rojo">TIM1_CH4 â”€â”€â–º DRV8833 #2 AIN2 (DIR)</span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘A10â•Ÿâ”€â”€</span><span class="rojo">TIM1_CH3 â”€â”€â–º DRV8833 #2 AIN1 (PWM)</span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘A9 â•Ÿâ”€â”€</span><span class="rojo">TIM1_CH2 â”€â”€â–º DRV8833 #1 AIN2 (DIR)</span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘A8 â•Ÿâ”€â”€</span><span class="rojo">TIM1_CH1 â”€â”€â–º DRV8833 #1 AIN1 (PWM)</span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘B15â•Ÿâ”€â”€</span><span class="morado">GPIO OUT â”€â”€â–º XSHUT VL53L0X Trasero</span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘B14â•Ÿâ”€â”€</span><span class="morado">GPIO OUT â”€â”€â–º XSHUT VL53L0X Derecho</span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘B13â•Ÿâ”€â”€</span><span class="morado">GPIO OUT â”€â”€â–º XSHUT VL53L0X Centro</span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘B12â•Ÿâ”€â”€</span><span class="morado">GPIO OUT â”€â”€â–º XSHUT VL53L0X Izquierdo</span><span class="gris">â”€â”€â•¢  â•Ÿ â”‚</span>
<span class="gris">   â”‚   â•‘B10â•Ÿâ”€â”€</span><span class="azul">I2C2_SCL â”€â”€â–º VL53L0X TRASERO + MPU6050</span><span class="gris">â”€â”€â•¢  â•Ÿ â”‚</span>
<span class="gris">   â”‚   â•‘B2 â•Ÿâ”€â”€</span><span class="gris">NC (BOOT1)                       </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘B1 â•Ÿâ”€â”€</span><span class="gris">NC                               </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘B0 â•Ÿâ”€â”€</span><span class="naranja">GPIO IN â—„â”€â”€ BOTÃ“N MODO (pull-up)  </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘A7 â•Ÿâ”€â”€</span><span class="verde">TIM3_CH2 â—„â”€â”€ Encoder Izquierdo B  </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘A6 â•Ÿâ”€â”€</span><span class="verde">TIM3_CH1 â—„â”€â”€ Encoder Izquierdo A  </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘A5 â•Ÿâ”€â”€</span><span class="gris">NC                               </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘A4 â•Ÿâ”€â”€</span><span class="gris">NC                               </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘A3 â•Ÿâ”€â”€</span><span class="gris">UART RX (debug opcional)         </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘A2 â•Ÿâ”€â”€</span><span class="gris">UART TX (debug opcional)         </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘A1 â•Ÿâ”€â”€</span><span class="gris">NC                               </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•‘A0 â•Ÿâ”€â”€</span><span class="gris">NC                               </span><span class="gris">â”€â”€â•¢  â•Ÿ   â”‚</span>
<span class="gris">   â”‚   â•šâ•â•â•   [3V3][GND][5V0][GND][3V3]        â•šâ•â•â•   â”‚</span>
<span class="gris">   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                         â”‚  â”‚  â”‚  â”‚  â”‚
                    <span class="azul">3.3V</span>  <span class="gris">GND</span> <span class="amarillo">5V*</span>  <span class="gris">GND</span> <span class="azul">3.3V</span>

          *5V solo disponible cuando conectas USB para programar
   <span class="rojo">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ SWD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
   <span class="rojo">PA13 â—„â”€â–º ST-Link SWDIO    PA14 â—„â”€â”€ ST-Link SWDCLK</span>
   <span class="rojo">NRST â”€â”€â–º ST-Link NRST (opcional, para reset automÃ¡tico)</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ“Š Tabla maestra de asignaciÃ³n de pines</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>Pin STM32</th><th>Etiqueta BlackPill</th><th>FunciÃ³n Simulink</th><th>Conecta a</th><th>Tipo de seÃ±al</th></tr></thead>
      <tbody>
        <tr><td><code>PA8</code></td><td>A8</td><td>PWM Motor Izquierdo â€“ velocidad (vel_motor_izq)</td><td>DRV8833 #1 â€“ AIN1</td><td>Salida PWM (TIM1_CH1)</td></tr>
        <tr><td><code>PA9</code></td><td>A9</td><td>DirecciÃ³n Motor Izquierdo</td><td>DRV8833 #1 â€“ AIN2</td><td>Salida PWM (TIM1_CH2)</td></tr>
        <tr><td><code>PA10</code></td><td>A10</td><td>PWM Motor Derecho â€“ velocidad (vel_motor_der)</td><td>DRV8833 #2 â€“ AIN1</td><td>Salida PWM (TIM1_CH3)</td></tr>
        <tr><td><code>PA11</code></td><td>A11</td><td>DirecciÃ³n Motor Derecho</td><td>DRV8833 #2 â€“ AIN2</td><td>Salida PWM (TIM1_CH4)</td></tr>
        <tr><td><code>PA6</code></td><td>A6</td><td>Encoder Motor Izquierdo â€“ Canal A</td><td>Motor Izq â€“ Encoder A (amarillo)</td><td>Entrada (TIM3_CH1)</td></tr>
        <tr><td><code>PA7</code></td><td>A7</td><td>Encoder Motor Izquierdo â€“ Canal B</td><td>Motor Izq â€“ Encoder B (blanco)</td><td>Entrada (TIM3_CH2)</td></tr>
        <tr><td><code>PB6</code></td><td>B6</td><td>Encoder Motor Derecho â€“ Canal A</td><td>Motor Der â€“ Encoder A (amarillo)</td><td>Entrada (TIM4_CH1)</td></tr>
        <tr><td><code>PB7</code></td><td>B7</td><td>Encoder Motor Derecho â€“ Canal B</td><td>Motor Der â€“ Encoder B (blanco)</td><td>Entrada (TIM4_CH2)</td></tr>
        <tr><td><code>PB8</code></td><td>B8</td><td>I2C1 Clock â€“ Sensores Izq/Centro/Der</td><td>SCL: VL53L0X Ã—3 + pull-up 10kÎ©</td><td>I2C (I2C1_SCL)</td></tr>
        <tr><td><code>PB9</code></td><td>B9</td><td>I2C1 Data â€“ Sensores Izq/Centro/Der</td><td>SDA: VL53L0X Ã—3 + pull-up 10kÎ©</td><td>I2C (I2C1_SDA)</td></tr>
        <tr><td><code>PB10</code></td><td>B10</td><td>I2C2 Clock â€“ Sensor Trasero + MPU6050</td><td>SCL: VL53L0X Trasero + MPU6050 + pull-up 10kÎ©</td><td>I2C (I2C2_SCL)</td></tr>
        <tr><td><code>PB3</code></td><td>B3</td><td>I2C2 Data â€“ Sensor Trasero + MPU6050</td><td>SDA: VL53L0X Trasero + MPU6050 + pull-up 10kÎ©</td><td>I2C (I2C2_SDA)</td></tr>
        <tr><td><code>PB12</code></td><td>B12</td><td>XSHUT Sensor Izquierdo</td><td>VL53L0X Izq â€“ pin XSHUT</td><td>GPIO Salida</td></tr>
        <tr><td><code>PB13</code></td><td>B13</td><td>XSHUT Sensor Centro</td><td>VL53L0X Centro â€“ pin XSHUT</td><td>GPIO Salida</td></tr>
        <tr><td><code>PB14</code></td><td>B14</td><td>XSHUT Sensor Derecho</td><td>VL53L0X Der â€“ pin XSHUT</td><td>GPIO Salida</td></tr>
        <tr><td><code>PB15</code></td><td>B15</td><td>XSHUT Sensor Trasero</td><td>VL53L0X Trasero â€“ pin XSHUT</td><td>GPIO Salida</td></tr>
        <tr><td><code>PB0</code></td><td>B0</td><td>BotÃ³n de modo (GPIOB)</td><td>Pulsador + pull-up 10kÎ© a 3.3V</td><td>GPIO Entrada</td></tr>
        <tr><td><code>PA13</code></td><td>A13</td><td>SWD Data (programaciÃ³n)</td><td>ST-Link â€“ SWDIO</td><td>SWD</td></tr>
        <tr><td><code>PA14</code></td><td>A14</td><td>SWD Clock (programaciÃ³n)</td><td>ST-Link â€“ SWDCLK</td><td>SWD</td></tr>
        <tr><td><code>3V3</code></td><td>3V3</td><td>AlimentaciÃ³n lÃ³gica entrada</td><td>MP1584EN VOUT+</td><td>AlimentaciÃ³n</td></tr>
        <tr><td><code>GND</code></td><td>GND (Ã—2)</td><td>Tierra</td><td>GND rail comÃºn</td><td>AlimentaciÃ³n</td></tr>
      </tbody>
    </table>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N 5: VL53L0X â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="seccion morado">
  <div class="sec-titulo">
    <div class="sec-num">5</div>
    <span class="emoji">ğŸ”­</span>
    <h2>Sensores VL53L0X Ã— 4 â€“ Distancia ToF</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>El problema del I2C:</strong>
      Todos los VL53L0X arrancan con la misma direcciÃ³n I2C (0x29). Si conectas varios en el mismo bus sin cambiar sus direcciones, el microcontrolador no sabe con quiÃ©n habla y todo falla. La soluciÃ³n es el pin XSHUT que apaga/enciende cada sensor individualmente para asignarles una direcciÃ³n Ãºnica.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“ Pines del mÃ³dulo VL53L0X (breakout board)</h3>
    <div class="diagrama-cable"><span class="titulo">  MÃ“DULO VL53L0X â€“ Vista del breakout board</span>

  <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">â”‚         [ VL53L0X MODULE ]              â”‚</span>
  <span class="gris">â”‚                                         â”‚</span>
  <span class="gris">â”‚  â”Œâ”€â”€â”                                   â”‚</span>
  <span class="gris">â”‚  â”‚  â”‚  â† Sensor lÃ¡ser (ventana Ã³ptica)  â”‚</span>
  <span class="gris">â”‚  â””â”€â”€â”˜                                   â”‚</span>
  <span class="gris">â”‚                                         â”‚</span>
  <span class="gris">â”‚  VIN  â”€â”€</span><span class="azul">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 3.3V</span>  <span class="gris">â”‚</span>
  <span class="gris">â”‚  GND  â”€â”€</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GND</span>   <span class="gris">â”‚</span>
  <span class="gris">â”‚  SCL  â”€â”€</span><span class="cyan">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ I2C CLK</span><span class="gris">â”‚</span>
  <span class="gris">â”‚  SDA  â”€â”€</span><span class="cyan">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ I2C DAT</span><span class="gris">â”‚</span>
  <span class="gris">â”‚  XSHUTâ”€â”€</span><span class="morado">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GPIO STM32</span><span class="gris">â”‚</span>
  <span class="gris">â”‚  GPIO1 â”€â”€</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (sin usar)</span><span class="gris">â”‚</span>
  <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

  <span class="naranja">XSHUT = LOW â†’ Sensor APAGADO (reset)</span>
  <span class="verde">XSHUT = HIGH â†’ Sensor ENCENDIDO y listo</span>
  <span class="gris">Si XSHUT no tiene seÃ±al â†’ Conectar a 3.3V (siempre encendido)</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ”„ Procedimiento para asignar direcciones I2C Ãºnicas</h3>
    <p style="margin-bottom:12px;">Esto lo hace el <strong>firmware de Simulink automÃ¡ticamente</strong> en la inicializaciÃ³n, pero necesitas cablear los pines XSHUT correctamente para que funcione:</p>

    <div class="diagrama-cable"><span class="titulo">  SECUENCIA DE INICIALIZACIÃ“N DE SENSORES VL53L0X</span>

  INICIO â†’

  <span class="rojo">PASO 1: Apaga todos los sensores del bus I2C1</span>
  STM32: PB12 = LOW  â†’ Sensor IZQ apagado
  STM32: PB13 = LOW  â†’ Sensor CENTRO apagado
  STM32: PB14 = LOW  â†’ Sensor DER apagado
  STM32: PB15 = LOW  â†’ Sensor TRASERO apagado
  <span class="gris">(En este momento no hay ningÃºn sensor activo en ningÃºn bus)</span>

  <span class="naranja">PASO 2: Enciende SOLO el sensor izquierdo</span>
  STM32: PB12 = HIGH â†’ Sensor IZQ se activa
  <span class="gris">Sensor IZQ responde en su direcciÃ³n default: 0x29</span>
  Firmware: EnvÃ­a comando I2C para cambiar direcciÃ³n a <span class="verde">0x30</span>
  <span class="gris">Ahora Sensor IZQ = 0x30 (permanece asÃ­ hasta reinicio)</span>

  <span class="naranja">PASO 3: Enciende SOLO el sensor centro</span>
  STM32: PB13 = HIGH â†’ Sensor CENTRO se activa
  <span class="gris">Sensor CENTRO responde en su direcciÃ³n default: 0x29</span>
  Firmware: EnvÃ­a comando I2C para cambiar direcciÃ³n a <span class="verde">0x31</span>
  <span class="gris">Ahora Sensor CENTRO = 0x31</span>

  <span class="naranja">PASO 4: Enciende el sensor derecho</span>
  STM32: PB14 = HIGH â†’ Sensor DER se activa
  <span class="gris">Sensor DER responde en 0x29 (se puede dejar asÃ­, ya no hay conflicto)</span>
  <span class="gris">Sensor DER = 0x29 (sin cambio)</span>

  <span class="naranja">PASO 5: Enciende el sensor trasero (bus I2C2 independiente)</span>
  STM32: PB15 = HIGH â†’ Sensor TRASERO se activa
  <span class="gris">Sensor TRASERO en bus I2C2, no hay conflicto con I2C1</span>
  <span class="gris">Sensor TRASERO = 0x29 (sin cambio, bus diferente)</span>

  FIN â†’ Todos los sensores listos para leer distancias</div>
  </div>

  <div class="sub">
    <h3>ğŸ“Š Mapa de direcciones I2C final</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>Sensor</th><th>PosiciÃ³n</th><th>Bus I2C</th><th>SCL STM32</th><th>SDA STM32</th><th>XSHUT STM32</th><th>DirecciÃ³n I2C final</th></tr></thead>
      <tbody>
        <tr><td>Sensor 1</td><td>Izquierdo</td><td>I2C1</td><td class="col-pin">PB8</td><td class="col-pin">PB9</td><td class="col-pin">PB12</td><td class="col-dir">0x30</td></tr>
        <tr><td>Sensor 2</td><td>Centro</td><td>I2C1</td><td class="col-pin">PB8</td><td class="col-pin">PB9</td><td class="col-pin">PB13</td><td class="col-dir">0x31</td></tr>
        <tr><td>Sensor 3</td><td>Derecho</td><td>I2C1</td><td class="col-pin">PB8</td><td class="col-pin">PB9</td><td class="col-pin">PB14</td><td class="col-dir">0x29</td></tr>
        <tr><td>Sensor 4</td><td>Trasero</td><td>I2C2</td><td class="col-pin">PB10</td><td class="col-pin">PB3</td><td class="col-pin">PB15</td><td class="col-dir">0x29</td></tr>
      </tbody>
    </table>
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ Diagrama de cableado â€“ Bus I2C1 (Izquierdo + Centro + Derecho)</h3>
    <div class="diagrama-cable"><span class="titulo">  CABLEADO I2C1 â€“ VL53L0X IZQUIERDO + CENTRO + DERECHO</span>
<span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

 STM32 BlackPill
 <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>                                                         <span class="azul">3.3V</span>
 <span class="gris">â”‚   PB8    â”œâ”€â”€</span><span class="cyan">SCL</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¤</span>
 <span class="gris">â”‚(I2C1_SCL)â”‚</span>                 <span class="gris">â”‚                    â”‚              â”‚   â”‚</span>
 <span class="gris">â”‚          â”‚</span>              <span class="gris">[10kÎ©]              [10kÎ©]   â† solo 1 pull-up</span>
 <span class="gris">â”‚   PB9    â”œâ”€â”€</span><span class="cyan">SDA</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚</span>     <span class="gris">por lÃ­nea</span>
 <span class="gris">â”‚(I2C1_SDA)â”‚</span>                 <span class="gris">â”‚                    â”‚              â”‚</span>
 <span class="gris">â”‚   PB12   â”œâ”€â”€</span><span class="morado">XSHUT1</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚              â”‚</span>
 <span class="gris">â”‚   PB13   â”œâ”€â”€</span><span class="morado">XSHUT2</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚              â”‚</span>
 <span class="gris">â”‚   PB14   â”œâ”€â”€</span><span class="morado">XSHUT3</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚              â”‚</span>
 <span class="gris">â”‚          â”‚</span>                 <span class="gris">â”‚                    â”‚              â”‚</span>
 <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>                 <span class="gris">â”‚                    â”‚              â”‚</span>
                              <span class="gris">â–¼                    â–¼              â–¼</span>
              <span class="cyan"> â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
              <span class="cyan"> â”‚  VL53L0X IZQ   â”‚  â”‚ VL53L0X CENTRO â”‚  â”‚  VL53L0X DER   â”‚</span>
              <span class="cyan"> â”‚  addr: 0x30    â”‚  â”‚  addr: 0x31    â”‚  â”‚  addr: 0x29    â”‚</span>
              <span class="cyan"> â”‚                â”‚  â”‚                â”‚  â”‚                â”‚</span>
              <span class="cyan"> â”‚ VIN â”€â”€ </span><span class="azul">3.3V</span>    <span class="cyan">â”‚  â”‚ VIN â”€â”€ </span><span class="azul">3.3V</span>    <span class="cyan">â”‚  â”‚ VIN â”€â”€ </span><span class="azul">3.3V</span>    <span class="cyan">â”‚</span>
              <span class="cyan"> â”‚ GND â”€â”€ </span><span class="gris">GND</span>    <span class="cyan">â”‚  â”‚ GND â”€â”€ </span><span class="gris">GND</span>    <span class="cyan">â”‚  â”‚ GND â”€â”€ </span><span class="gris">GND</span>    <span class="cyan">â”‚</span>
              <span class="cyan"> â”‚ SCL â”€â”€ </span><span class="cyan">PB8</span>    <span class="cyan">â”‚  â”‚ SCL â”€â”€ </span><span class="cyan">PB8</span>    <span class="cyan">â”‚  â”‚ SCL â”€â”€ </span><span class="cyan">PB8</span>    <span class="cyan">â”‚</span>
              <span class="cyan"> â”‚ SDA â”€â”€ </span><span class="cyan">PB9</span>    <span class="cyan">â”‚  â”‚ SDA â”€â”€ </span><span class="cyan">PB9</span>    <span class="cyan">â”‚  â”‚ SDA â”€â”€ </span><span class="cyan">PB9</span>    <span class="cyan">â”‚</span>
              <span class="cyan"> â”‚ XSHUTâ”€ </span><span class="morado">PB12</span>   <span class="cyan">â”‚  â”‚ XSHUTâ”€ </span><span class="morado">PB13</span>   <span class="cyan">â”‚  â”‚ XSHUTâ”€ </span><span class="morado">PB14</span>   <span class="cyan">â”‚</span>
              <span class="cyan"> â”‚ GPIO1  </span><span class="gris">N/C</span>    <span class="cyan">â”‚  â”‚ GPIO1  </span><span class="gris">N/C</span>    <span class="cyan">â”‚  â”‚ GPIO1  </span><span class="gris">N/C</span>    <span class="cyan">â”‚</span>
              <span class="cyan"> â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                       <span class="gris">â–²                    â–²                    â–²</span>
                   <span class="gris">Sensor Izquierdo    Sensor Centro       Sensor Derecho</span>
                   <span class="gris">(apunta a pared izq) (apunta al frente) (apunta a pared der)</span>

<span class="naranja">NOTA: Las 2 resistencias 10kÎ© van ENTRE la lÃ­nea y 3.3V (pull-up).</span>
<span class="naranja">      Solo necesitas UNA por lÃ­nea (1 en SCL, 1 en SDA) para todo el bus.</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ Diagrama de cableado â€“ Bus I2C2 (Sensor Trasero)</h3>
    <div class="diagrama-cable"><span class="titulo">  CABLEADO I2C2 â€“ VL53L0X TRASERO + MPU6050 (bus compartido)</span>
<span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

 STM32 BlackPill                                              <span class="azul">3.3V</span>
 <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>                                                   <span class="gris">â”‚</span>
 <span class="gris">â”‚   PB10   â”œâ”€â”€</span><span class="cyan">SCL2</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [10kÎ©]</span>
 <span class="gris">â”‚(I2C2_SCL)â”‚</span>                 <span class="gris">â”‚                              â”‚</span>
 <span class="gris">â”‚   PB3    â”œâ”€â”€</span><span class="cyan">SDA2</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [10kÎ©]</span>
 <span class="gris">â”‚(I2C2_SDA)â”‚</span>                 <span class="gris">â”‚                              â”‚</span>
 <span class="gris">â”‚   PB15   â”œâ”€â”€</span><span class="morado">XSHUT4</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
 <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>                 <span class="gris">â”‚</span>
                              <span class="gris">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
                              <span class="gris">â–¼                              â–¼</span>
              <span class="cyan"> â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
              <span class="cyan"> â”‚  VL53L0X TRASERO     â”‚  â”‚  MPU6050             â”‚</span>
              <span class="cyan"> â”‚  addr: 0x29          â”‚  â”‚  addr: 0x68          â”‚</span>
              <span class="cyan"> â”‚                      â”‚  â”‚                      â”‚</span>
              <span class="cyan"> â”‚ VIN â”€â”€â”€ </span><span class="azul">3.3V</span>        <span class="cyan">â”‚  â”‚ VCC â”€â”€â”€ </span><span class="azul">3.3V</span>        <span class="cyan">â”‚</span>
              <span class="cyan"> â”‚ GND â”€â”€â”€ </span><span class="gris">GND</span>        <span class="cyan">â”‚  â”‚ GND â”€â”€â”€ </span><span class="gris">GND</span>        <span class="cyan">â”‚</span>
              <span class="cyan"> â”‚ SCL â”€â”€â”€ </span><span class="cyan">PB10</span>       <span class="cyan">â”‚  â”‚ SCL â”€â”€â”€ </span><span class="cyan">PB10</span>       <span class="cyan">â”‚</span>
              <span class="cyan"> â”‚ SDA â”€â”€â”€ </span><span class="cyan">PB3</span>        <span class="cyan">â”‚  â”‚ SDA â”€â”€â”€ </span><span class="cyan">PB3</span>        <span class="cyan">â”‚</span>
              <span class="cyan"> â”‚ XSHUTâ”€â”€ </span><span class="morado">PB15</span>       <span class="cyan">â”‚  â”‚ AD0 â”€â”€â”€ </span><span class="gris">GND</span>        <span class="cyan">â”‚  â† 0x68</span>
              <span class="cyan"> â”‚ GPIO1   </span><span class="gris">N/C</span>        <span class="cyan">â”‚  â”‚ INT â”€â”€â”€ </span><span class="gris">N/C</span>        <span class="cyan">â”‚</span>
              <span class="cyan"> â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N 6: MPU6050 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="seccion naranja">
  <div class="sec-titulo">
    <div class="sec-num">6</div>
    <span class="emoji">ğŸ”„</span>
    <h2>IMU MPU6050 â€“ Giroscopio</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>Para quÃ© sirve:</strong> El MPU6050 mide la velocidad angular en el eje Z (GyroZ_deg_s). AsÃ­ el robot sabe cuÃ¡nto gira y puede corregir su trayectoria con el PID. Sin este sensor, el robot no puede mantener una lÃ­nea recta ni hacer giros precisos.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“‹ Tabla de conexiones pin a pin del MPU6050</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>Pin MPU6050</th><th>FunciÃ³n</th><th>Conecta a</th><th>Cable</th><th>Nota crÃ­tica</th></tr></thead>
      <tbody>
        <tr><td><strong>VCC</strong></td><td>AlimentaciÃ³n</td><td>Rail 3.3V (MP1584EN)</td><td><span class="w w-rojo"><span class="dot"></span>Rojo</span></td><td>Â¡MÃ¡ximo 3.6V! No usar 5V</td></tr>
        <tr><td><strong>GND</strong></td><td>Tierra</td><td>GND rail comÃºn</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>â€“</td></tr>
        <tr><td><strong>SCL</strong></td><td>Reloj I2C</td><td>STM32 PB10 (I2C2_SCL)</td><td><span class="w w-amarillo"><span class="dot"></span>Amarillo</span></td><td>Comparte bus con VL53L0X trasero</td></tr>
        <tr><td><strong>SDA</strong></td><td>Datos I2C</td><td>STM32 PB3 (I2C2_SDA)</td><td><span class="w w-verde"><span class="dot"></span>Verde</span></td><td>Comparte bus con VL53L0X trasero</td></tr>
        <tr><td><strong>AD0</strong></td><td>Bit LSB de direcciÃ³n I2C</td><td>GND</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>GND = direcciÃ³n 0x68 âœ“<br>3.3V = direcciÃ³n 0x69 (no usar)</td></tr>
        <tr><td><strong>INT</strong></td><td>Pin de interrupciÃ³n</td><td>Sin conectar (N/C)</td><td>â€“</td><td>No se usa en el diseÃ±o Simulink</td></tr>
        <tr><td><strong>XDA, XCL</strong></td><td>I2C auxiliar para magnetÃ³metro</td><td>Sin conectar (N/C)</td><td>â€“</td><td>Solo si agregas brÃºjula (no en este proyecto)</td></tr>
      </tbody>
    </table>
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“ Diagrama detallado del MPU6050</h3>
    <div class="diagrama-cable"><span class="titulo">  MPU6050 â€“ CABLEADO DETALLADO</span>

  <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">â”‚              MPU6050 Module (breakout)               â”‚</span>
  <span class="gris">â”‚                                                      â”‚</span>
  <span class="gris">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚</span>
  <span class="gris">â”‚  â”‚           [MPU-6050 chip]                   â”‚    â”‚</span>
  <span class="gris">â”‚  â”‚      Giroscopio 3 ejes + AcelerÃ³metro 3 ejesâ”‚    â”‚</span>
  <span class="gris">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚</span>
  <span class="gris">â”‚                                                      â”‚</span>
  <span class="gris">â”‚  [VCC] â”€â”€â”€â”€</span><span class="rojo">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 3.3V</span>  <span class="gris">â”‚</span>
  <span class="gris">â”‚  [GND] â”€â”€â”€â”€</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GND</span>   <span class="gris">â”‚</span>
  <span class="gris">â”‚  [SCL] â”€â”€â”€â”€</span><span class="cyan">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PB10</span>  <span class="gris">â”‚</span>
  <span class="gris">â”‚  [SDA] â”€â”€â”€â”€</span><span class="cyan">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PB3</span>   <span class="gris">â”‚</span>
  <span class="gris">â”‚  [AD0] â”€â”€â”€â”€</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GND   â† IMPORTANTE</span>
  <span class="gris">â”‚  [INT] â”€â”€â”€ N/C (no conectar)                        â”‚</span>
  <span class="gris">â”‚  [XDA] â”€â”€â”€ N/C                                      â”‚</span>
  <span class="gris">â”‚  [XCL] â”€â”€â”€ N/C                                      â”‚</span>
  <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

  El mÃ³dulo MPU6050 de breakout YA TIENE resistencias pull-up integradas.
  <span class="naranja">NO agregues mÃ¡s resistencias pull-up en el bus I2C2 si usas un mÃ³dulo breakout.</span>
  Si usas el chip sin mÃ³dulo, pon 10kÎ© entre SCL/SDA y 3.3V.

  <span class="verde">En el diagrama Simulink (Imagen 6), el bloque lee:</span>
    - I2C2 Controller Read
    - Peripheral: 0x68  (direcciÃ³n MPU6050 con AD0=GND)
    - Registros de giroscopio eje Z â†’ GyroZ_deg_s â†’ Control PID</div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N 7: DRV8833 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="seccion rojo">
  <div class="sec-titulo">
    <div class="sec-num">7</div>
    <span class="emoji">âš¡</span>
    <h2>Driver de Motores DRV8833 Ã— 2</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>Â¿QuÃ© hace el DRV8833?:</strong>
      El STM32 no puede dar suficiente corriente para mover un motor directamente (daÃ±a el chip). El DRV8833 actÃºa como intermediario: recibe la seÃ±al de control (lÃ³gica 3.3V, poca corriente) y la amplifica para manejar el motor (6V, hasta 2A).
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“ Pines del DRV8833</h3>
    <div class="diagrama-cable"><span class="titulo">  DRV8833 â€“ PINOUT (mÃ³dulo breakout mÃ¡s comÃºn)</span>

  <span class="gris">  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">  â”‚                    DRV8833 Module                         â”‚</span>
  <span class="gris">  â”‚                                                           â”‚</span>
  <span class="gris">  â”‚   [VM] â”€â”€â”€â”€â”€â”€</span><span class="verde">â”€â”€ Voltaje de motor (6V del XL6009) â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â”‚</span>
  <span class="gris">  â”‚   [VCC] â”€â”€â”€â”€â”€</span><span class="azul">â”€â”€ Voltaje lÃ³gico (3.3V del Buck) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â”‚</span>
  <span class="gris">  â”‚   [GND] â”€â”€â”€â”€â”€</span><span class="gris">â”€â”€ GND comÃºn â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â”‚</span>
  <span class="gris">  â”‚   [nSLEEP] â”€â”€</span><span class="azul">â”€â”€ 3.3V (HIGH = chip activo) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â”‚</span>
  <span class="gris">  â”‚   [nFAULT] â”€ salida (no conectar o a GPIO entrada)       â”‚</span>
  <span class="gris">  â”‚                                                           â”‚</span>
  <span class="gris">  â”‚   â”€â”€ Canal A (motor 1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚</span>
  <span class="gris">  â”‚   [AIN1] â”€â”€â”€â”€</span><span class="rojo">â”€â”€ Control A1 (PWM velocidad desde STM32) â”€â”€</span><span class="gris">â”‚</span>
  <span class="gris">  â”‚   [AIN2] â”€â”€â”€â”€</span><span class="rojo">â”€â”€ Control A2 (direcciÃ³n desde STM32) â”€â”€â”€â”€â”€â”€</span><span class="gris">â”‚</span>
  <span class="gris">  â”‚   [AOUT1] â”€â”€â”€</span><span class="amarillo">â”€â”€ Motor terminal 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â”‚</span>
  <span class="gris">  â”‚   [AOUT2] â”€â”€â”€</span><span class="amarillo">â”€â”€ Motor terminal 2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â”‚</span>
  <span class="gris">  â”‚                                                           â”‚</span>
  <span class="gris">  â”‚   â”€â”€ Canal B (motor 2, si usas un solo DRV8833) â”€â”€â”€â”€â”€â”€â”€  â”‚</span>
  <span class="gris">  â”‚   [BIN1] â”€â”€â”€â”€</span><span class="rojo">â”€â”€ Control B1 (PWM velocidad desde STM32) â”€â”€</span><span class="gris">â”‚</span>
  <span class="gris">  â”‚   [BIN2] â”€â”€â”€â”€</span><span class="rojo">â”€â”€ Control B2 (direcciÃ³n desde STM32) â”€â”€â”€â”€â”€â”€</span><span class="gris">â”‚</span>
  <span class="gris">  â”‚   [BOUT1] â”€â”€â”€</span><span class="amarillo">â”€â”€ Motor terminal 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â”‚</span>
  <span class="gris">  â”‚   [BOUT2] â”€â”€â”€</span><span class="amarillo">â”€â”€ Motor terminal 2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â”‚</span>
  <span class="gris">  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ Diagrama completo DRV8833 #1 (Motor Izquierdo)</h3>
    <div class="diagrama-cable"><span class="titulo">  CABLEADO COMPLETO DRV8833 #1 â”€ MOTOR IZQUIERDO</span>
<span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

  STM32 BlackPill            DRV8833 #1               Motor Izq GA12-N20
  <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>              <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>              <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">â”‚</span>          <span class="gris">â”‚</span>              <span class="gris">â”‚</span>         <span class="gris">â”‚</span>              <span class="gris">â”‚                  â”‚</span>
  <span class="gris">â”‚  PA8 â”€â”€â”€â”€</span><span class="rojo">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AIN1      â”‚</span>              <span class="gris">â”‚  Motor DC (2 cables)</span>
  <span class="gris">â”‚(TIM1_CH1)â”‚</span>  <span class="rojo">PWM seÃ±al</span>  <span class="gris">â”‚</span> (velocidad)<span class="gris">â”‚</span>              <span class="gris">â”‚                  â”‚</span>
  <span class="gris">â”‚  PA9 â”€â”€â”€â”€</span><span class="rojo">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AIN2      â”‚</span>              <span class="gris">â”‚</span>
  <span class="gris">â”‚(TIM1_CH2)â”‚</span>  <span class="rojo">DIR seÃ±al</span>  <span class="gris">â”‚</span> (direcciÃ³n)<span class="gris">â”‚â”€â”€</span><span class="amarillo">AOUT1â”€â”€â”€â”€â”€â”€â–º (+) Cable Rojo Motor</span>
  <span class="gris">â”‚          â”‚</span>              <span class="gris">â”‚</span>          <span class="gris">â”‚â”€â”€</span><span class="amarillo">AOUT2â”€â”€â”€â”€â”€â”€â–º (â€“) Cable Negro Motor</span>
  <span class="gris">â”‚  3.3V â”€â”€â”€</span><span class="azul">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º VCC</span>      <span class="gris">â”‚</span>
  <span class="gris">â”‚  3.3V â”€â”€â”€</span><span class="azul">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º nSLEEP</span>   <span class="gris">â”‚</span>              <span class="gris">â”‚  Encoder (4 cables)</span>
  <span class="gris">â”‚  6.0V â”€â”€â”€</span><span class="verde">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º VM</span>       <span class="gris">â”‚</span>              <span class="gris">â”‚                  â”‚</span>
  <span class="gris">â”‚  GND â”€â”€â”€â”€</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º GND      â”‚</span>              <span class="gris">â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
  <span class="gris">â”‚          â”‚</span>              <span class="gris">â”‚</span>          <span class="gris">â”‚</span>              <span class="gris">â”‚</span><span class="verde">â”€â”€ Cable Verde (Enc VCC) â”€â”€â–º 3.3V</span>
  <span class="gris">â”‚  PA6 â—„â”€â”€â”€</span><span class="verde">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â”‚</span><span class="azul">â”€â”€ Cable Azul  (Enc GND) â”€â”€â–º GND</span>
  <span class="gris">â”‚(TIM3_CH1)â”‚</span>  <span class="verde">Encoder A</span>                          <span class="gris">â”‚</span><span class="amarillo">â”€â”€ Cable Amarillo (Enc A) â”€â”€â–º PA6</span>
  <span class="gris">â”‚  PA7 â—„â”€â”€â”€</span><span class="verde">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â”‚</span><span class="blanco">â”€â”€ Cable Blanco   (Enc B) â”€â”€â–º PA7</span>
  <span class="gris">â”‚(TIM3_CH2)â”‚</span>  <span class="verde">Encoder B</span>  <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>              <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
  <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

  <span class="gris">LÃ“GICA DE CONTROL (segÃºn diagrama Simulink):</span>
  vel_motor_izq &gt; 0: PA8=PWM, PA9=0 â†’ Motor gira adelante
  vel_motor_izq &lt; 0: PA8=0, PA9=PWM â†’ Motor gira atrÃ¡s
  vel_motor_izq = 0: PA8=0, PA9=0   â†’ Motor libre</div>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ Diagrama completo DRV8833 #2 (Motor Derecho)</h3>
    <div class="diagrama-cable"><span class="titulo">  CABLEADO COMPLETO DRV8833 #2 â”€ MOTOR DERECHO</span>
<span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

  STM32 BlackPill            DRV8833 #2               Motor Der GA12-N20
  <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>              <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>              <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">â”‚</span>          <span class="gris">â”‚</span>              <span class="gris">â”‚</span>         <span class="gris">â”‚</span>              <span class="gris">â”‚                  â”‚</span>
  <span class="gris">â”‚  PA10â”€â”€â”€â”€</span><span class="rojo">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AIN1      â”‚</span>              <span class="gris">â”‚  Motor DC (2 cables)</span>
  <span class="gris">â”‚(TIM1_CH3)â”‚</span>  <span class="rojo">PWM seÃ±al</span>  <span class="gris">â”‚</span> (velocidad)<span class="gris">â”‚</span>
  <span class="gris">â”‚  PA11â”€â”€â”€â”€</span><span class="rojo">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AIN2      â”‚â”€â”€</span><span class="amarillo">AOUT1â”€â”€â”€â”€â”€â”€â–º (+) Cable Rojo Motor</span>
  <span class="gris">â”‚(TIM1_CH4)â”‚</span>  <span class="rojo">DIR seÃ±al</span>  <span class="gris">â”‚â”€â”€</span><span class="amarillo">AOUT2â”€â”€â”€â”€â”€â”€â–º (â€“) Cable Negro Motor</span>
  <span class="gris">â”‚          â”‚</span>              <span class="gris">â”‚</span>          <span class="gris">â”‚</span>
  <span class="gris">â”‚  3.3V â”€â”€â”€</span><span class="azul">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º VCC</span>      <span class="gris">â”‚</span>              <span class="gris">â”‚  Encoder (4 cables)</span>
  <span class="gris">â”‚  3.3V â”€â”€â”€</span><span class="azul">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º nSLEEP</span>   <span class="gris">â”‚</span>
  <span class="gris">â”‚  6.0V â”€â”€â”€</span><span class="verde">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º VM</span>       <span class="gris">â”‚</span>              <span class="verde">â”€â”€ Cable Verde (Enc VCC) â”€â”€â–º 3.3V</span>
  <span class="gris">â”‚  GND â”€â”€â”€â”€</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º GND      â”‚</span>              <span class="azul">â”€â”€ Cable Azul  (Enc GND) â”€â”€â–º GND</span>
  <span class="gris">â”‚          â”‚</span>              <span class="gris">â”‚</span>          <span class="gris">â”‚</span>              <span class="amarillo">â”€â”€ Cable Amarillo (Enc A) â”€â”€â–º PB6</span>
  <span class="gris">â”‚  PB6 â—„â”€â”€â”€</span><span class="verde">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="blanco">â”€â”€ Cable Blanco   (Enc B) â”€â”€â–º PB7</span>
  <span class="gris">â”‚(TIM4_CH1)â”‚</span>  <span class="verde">Encoder A  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>              <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
  <span class="gris">â”‚  PB7 â—„â”€â”€â”€</span><span class="verde">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
  <span class="gris">â”‚(TIM4_CH2)â”‚</span>  <span class="verde">Encoder B</span>
  <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ“Š Tabla de lÃ³gica de control de motores</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>AIN1 (PA8/PA10)</th><th>AIN2 (PA9/PA11)</th><th>Resultado del motor</th><th>CuÃ¡ndo ocurre</th></tr></thead>
      <tbody>
        <tr><td>PWM (ciclo variable)</td><td>LOW (0V)</td><td>Gira hacia adelante a velocidad = duty cycle</td><td>Vel positiva</td></tr>
        <tr><td>LOW (0V)</td><td>PWM (ciclo variable)</td><td>Gira hacia atrÃ¡s a velocidad = duty cycle</td><td>Vel negativa</td></tr>
        <tr><td>LOW (0V)</td><td>LOW (0V)</td><td>Motor en punto muerto (gira libremente)</td><td>Vel = 0</td></tr>
        <tr><td>HIGH (3.3V)</td><td>HIGH (3.3V)</td><td>Freno de motor (resistencia al movimiento)</td><td>Freno activo</td></tr>
      </tbody>
    </table>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N 8: MOTORES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="seccion verde">
  <div class="sec-titulo">
    <div class="sec-num">8</div>
    <span class="emoji">âš™ï¸</span>
    <h2>Motores GA12-N20 + Encoders</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>El motor viene con 6 cables:</strong>
      2 para el motor DC y 4 para el encoder. No los confundas. Los 2 cables del motor DC suelen ser mÃ¡s gruesos. Los 4 del encoder son delgados. Si inviertes los cables del motor, solo cambia la direcciÃ³n de giro â€“ nada se daÃ±a. Si inviertes la alimentaciÃ³n del encoder, puede daÃ±arse.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ IdentificaciÃ³n de los 6 cables del GA12-N20</h3>
    <div class="diagrama-cable"><span class="titulo">  GA12-N20 CON ENCODER â€“ LOS 6 CABLES</span>

  <span class="gris">     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">     â”‚           Cuerpo del motor GA12-N20                   â”‚</span>
  <span class="gris">     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚</span>
  <span class="gris">     â”‚  â”‚   [Engranajes reductores]   â”‚                       â”‚</span>
  <span class="gris">     â”‚  â”‚                            â”‚â”€â”€â”€â–º Eje de salida      â”‚</span>
  <span class="gris">     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚</span>
  <span class="gris">     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚</span>
  <span class="gris">     â”‚  â”‚   [Motor DC]               â”‚                       â”‚</span>
  <span class="gris">     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚</span>
  <span class="gris">     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚</span>
  <span class="gris">     â”‚  â”‚ [Encoder magnÃ©tico Hall]   â”‚                       â”‚</span>
  <span class="gris">     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚</span>
  <span class="gris">     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                          â”‚
         6 cables salen juntos:

  <span class="rojo">  â•â•â• Cable ROJO  â•â•â•â•â•â• Motor DC (+)</span>     â†’ AOUT1 del DRV8833
  <span class="gris">  â”€â”€â”€ Cable NEGRO â”€â”€â”€â”€â”€â”€â”€ Motor DC (â€“)</span>     â†’ AOUT2 del DRV8833
  <span class="verde">  â”€â”€â”€ Cable VERDE â”€â”€â”€â”€â”€â”€â”€ Encoder VCC</span>     â†’ <span class="azul">3.3V</span>
  <span class="azul">  â”€â”€â”€ Cable AZUL  â”€â”€â”€â”€â”€â”€â”€ Encoder GND</span>     â†’ GND comÃºn
  <span class="amarillo">  â”€â”€â”€ Cable AMARILLOâ”€â”€â”€â”€â”€ Encoder Canal A</span> â†’ PA6 (izq) / PB6 (der)
  <span class="blanco">  â”€â”€â”€ Cable BLANCO â”€â”€â”€â”€â”€â”€â”€ Encoder Canal B</span> â†’ PA7 (izq) / PB7 (der)

  <span class="naranja">âš ï¸ LOS COLORES PUEDEN VARIAR. Verifica con el datasheet de tu lote.</span>
  <span class="naranja">   Prueba con multÃ­metro: los 2 cables del motor DC tienen continuidad directa</span>
  <span class="naranja">   con las escobillas. Los otros 4 son del encoder.</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ“Š Tabla pin a pin completa â€“ Motor Izquierdo</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>Cable motor</th><th>Color tÃ­pico</th><th>Conecta a</th><th>Notas</th></tr></thead>
      <tbody>
        <tr><td>Motor DC (+)</td><td><span class="w w-rojo"><span class="dot"></span>Rojo</span></td><td>DRV8833 #1 â€“ AOUT1</td><td>Si el motor gira al revÃ©s, intercambia rojo y negro</td></tr>
        <tr><td>Motor DC (â€“)</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>DRV8833 #1 â€“ AOUT2</td><td>â€“</td></tr>
        <tr><td>Encoder VCC</td><td><span class="w w-verde"><span class="dot"></span>Verde</span></td><td>Rail 3.3V</td><td>Â¡NUNCA conectar a 5V!</td></tr>
        <tr><td>Encoder GND</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>GND comÃºn</td><td>â€“</td></tr>
        <tr><td>Encoder Canal A</td><td><span class="w w-amarillo"><span class="dot"></span>Amarillo</span></td><td>STM32 â€“ <strong>PA6</strong> (TIM3_CH1)</td><td>Si el encoder cuenta al revÃ©s, intercambia A y B</td></tr>
        <tr><td>Encoder Canal B</td><td><span class="w w-blanco"><span class="dot"></span>Blanco</span></td><td>STM32 â€“ <strong>PA7</strong> (TIM3_CH2)</td><td>â€“</td></tr>
      </tbody>
    </table>
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“Š Tabla pin a pin completa â€“ Motor Derecho</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>Cable motor</th><th>Color tÃ­pico</th><th>Conecta a</th><th>Notas</th></tr></thead>
      <tbody>
        <tr><td>Motor DC (+)</td><td><span class="w w-rojo"><span class="dot"></span>Rojo</span></td><td>DRV8833 #2 â€“ AOUT1</td><td>Si el motor gira al revÃ©s, intercambia rojo y negro</td></tr>
        <tr><td>Motor DC (â€“)</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>DRV8833 #2 â€“ AOUT2</td><td>â€“</td></tr>
        <tr><td>Encoder VCC</td><td><span class="w w-verde"><span class="dot"></span>Verde</span></td><td>Rail 3.3V</td><td>Â¡NUNCA conectar a 5V!</td></tr>
        <tr><td>Encoder GND</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>GND comÃºn</td><td>â€“</td></tr>
        <tr><td>Encoder Canal A</td><td><span class="w w-amarillo"><span class="dot"></span>Amarillo</span></td><td>STM32 â€“ <strong>PB6</strong> (TIM4_CH1)</td><td>â€“</td></tr>
        <tr><td>Encoder Canal B</td><td><span class="w w-blanco"><span class="dot"></span>Blanco</span></td><td>STM32 â€“ <strong>PB7</strong> (TIM4_CH2)</td><td>â€“</td></tr>
      </tbody>
    </table>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N 9: BOTÃ“N â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="seccion">
  <div class="sec-titulo">
    <div class="sec-num">9</div>
    <span class="emoji">ğŸ”˜</span>
    <h2>BotÃ³n de Modo â€“ GPIOB</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>Â¿Para quÃ© sirve?:</strong>
      El botÃ³n selecciona el modo de operaciÃ³n del robot. Cuando estÃ¡ sin presionar (HIGH), el robot corre en MODO_FAST_RUN (ya conoce el mapa y va rÃ¡pido). Cuando estÃ¡ presionado (LOW), corre en MODO_EXPLORACION (mapea el laberinto despacio). En el Simulink hay un bloque NOT que invierte la lÃ³gica.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ Diagrama de conexiÃ³n del botÃ³n</h3>
    <div class="diagrama-cable"><span class="titulo">  BOTÃ“N DE MODO â€“ CABLEADO CON PULL-UP</span>

  OpciÃ³n 1: Pull-up EXTERNO (resistencia fÃ­sica)
  <span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

  <span class="azul">3.3V</span> â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              â”‚
           <span class="gris">[10kÎ©]</span>  â† resistencia pull-up externa
              â”‚
              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º STM32 PB0
              â”‚
          <span class="gris">â•”â•â•â•â•â•â•â•—</span>
          <span class="gris">â•‘BOTÃ“N â•‘</span>  â† pulsador tÃ¡ctil de 4 terminales
          <span class="gris">â•šâ•â•â•â•â•â•â•</span>
              â”‚
  <span class="gris">GND</span>  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  ESTADO SIN PRESIONAR: PB0 = <span class="azul">3.3V (HIGH)</span> â†’ lÃ³gica 1 â†’ NOT â†’ MODO_FAST_RUN
  ESTADO PRESIONADO:    PB0 = <span class="gris">0V (LOW)</span>   â†’ lÃ³gica 0 â†’ NOT â†’ MODO_EXPLORACION

  <span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
  OpciÃ³n 2: Pull-up INTERNO del STM32 (mÃ¡s fÃ¡cil)
  <span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

  Configura PB0 como GPIO_INPUT con MODE = INPUT_PULLUP en STM32CubeMX.
  El STM32 activa internamente una resistencia pull-up de ~40kÎ©.
  Solo necesitas 2 cables:

  STM32 PB0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Terminal 1 del botÃ³n
  GND       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Terminal 2 del botÃ³n
  (Terminal 3 y 4 son iguales a 1 y 2 en un pulsador estÃ¡ndar)</div>
  </div>

  <div class="aviso tip">
    <div class="icono"></div>
    <div class="texto">
      <strong>RecomendaciÃ³n:</strong> Usa la OpciÃ³n 2 (pull-up interno). Es mÃ¡s simple, menos cables, y el STM32 ya trae esta funcionalidad. Solo configura PB0 como <code>GPIO_Input</code> con <code>Pull-up</code> en STM32CubeMX.
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N 10: PROGRAMACIÃ“N â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="seccion">
  <div class="sec-titulo">
    <div class="sec-num">10</div>
    <span class="emoji">ğŸ’»</span>
    <h2>ProgramaciÃ³n â€“ ST-Link SWD</h2>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ Conexiones del ST-Link V2 al STM32</h3>
    <div class="diagrama-cable"><span class="titulo">  ST-LINK V2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º STMF32 BlackPill</span>
<span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

  <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>              <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">â”‚     ST-LINK V2        â”‚</span>              <span class="gris">â”‚    STM32 BlackPill  â”‚</span>
  <span class="gris">â”‚                      â”‚</span>              <span class="gris">â”‚                     â”‚</span>
  <span class="gris">â”‚  [3.3V] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="rojo">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â–º [3V3]              â”‚</span>
  <span class="gris">â”‚  [GND]  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º [GND]              â”‚</span>
  <span class="gris">â”‚  [SWDIO]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="naranja">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â–º [PA13/SWDIO]       â”‚</span>
  <span class="gris">â”‚  [SWDCLK]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="amarillo">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â–º [PA14/SWDCLK]      â”‚</span>
  <span class="gris">â”‚  [RST]   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="morado">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â–º [NRST] (opcional)  â”‚</span>
  <span class="gris">â”‚                      â”‚</span>              <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
  <span class="gris">â”‚  [USB]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="cyan">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º PC (cable USB-A)</span>
  <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

  <span class="naranja">IMPORTANTE: Conecta siempre GND primero.</span>
  <span class="naranja">Si ya tienes la baterÃ­a conectada al STM32, el pin 3.3V del ST-Link</span>
  <span class="naranja">puede omitirse (es solo referencia de voltaje, no alimenta).</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ”§ Pasos para grabar el firmware desde MATLAB/Simulink</h3>
    <div class="pasos">
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Configura el hardware target en Simulink:</strong> Ve a <em>Model Configuration Parameters â†’ Hardware Implementation</em> y selecciona <strong>STMicroelectronics â†’ STM32F4xx Based</strong>. AsegÃºrate que estÃ© configurado tu modelo de chip.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Verifica que el ST-Link estÃ¡ detectado:</strong> Abre STM32CubeProgrammer, conecta el ST-Link y verifica que el software detecte el STM32. Si no lo detecta, revisa las conexiones SWD.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Genera y despliega el cÃ³digo:</strong> En Simulink, haz clic en <strong>Deploy to Hardware</strong> (o Ctrl+B â†’ Build and Deploy). Simulink generarÃ¡ el cÃ³digo C, lo compilarÃ¡ y grabarÃ¡ automÃ¡ticamente al STM32 via ST-Link.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Verifica el arranque:</strong> El STM32 deberÃ­a iniciar automÃ¡ticamente el firmware. Si no, presiona el botÃ³n NRST (reset) de la BlackPill o desconecta/reconecta la alimentaciÃ³n.</div></div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N 11: DIAGRAMA GLOBAL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="resumen-final">
  <h2>ğŸ“ Diagrama Global del Sistema Completo</h2>
  <div class="diagrama-cable" style="background:#0a0f1a;"><span class="titulo">â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    SISTEMA COMPLETO ROBOT MICROMOUSE STM32F401CCU6                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” ALIMENTACIÃ“N â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

       <span class="rojo">â•”â•â•â•â•â•â•â•â•â•â•â•â•â•—  SW   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span>
       <span class="rojo">â•‘ LiPo 3.7V  â•Ÿâ”€â”€â”€â”€â”€â”€â–ºâ•‘  MP1584EN Buck â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º 3.3V RAIL</span>
       <span class="rojo">â•‘  500mAh    â•‘  ON/  â•‘  (ajustar 3.3V)â•‘</span>
       <span class="rojo">â•šâ•â•â•â•â•¤â•â•â•â•â•â•â•â•  OFF  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
            <span class="rojo">â”‚</span>
            <span class="rojo">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span>
                            <span class="verde">â•‘  XL6009 Boost  â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º 6.0V RAIL</span>
                            <span class="verde">â•‘  (ajustar 6V)  â•‘</span>
                            <span class="verde">â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
            <span class="gris">â”‚</span>
            <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GND RAIL</span>

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” STM32 BLACKPILL â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

<span class="azul">  3.3V RAIL â”€â”€â–º 3V3                     GND â—„â”€â”€ GND RAIL</span>

  <span class="gris">                 â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span>
  <span class="morado">PB12â”€â”€â–ºXSHUT1   â•‘                                          â•‘   PB9â—„â”€â”€â–ºSDA1â”€â”€â–º VL53L0X IZQ/CEN/DER</span>
  <span class="morado">PB13â”€â”€â–ºXSHUT2   â•‘          STM32F401CCU6                   â•‘   PB8â—„â”€â”€â–ºSCL1â”€â”€â–º VL53L0X IZQ/CEN/DER</span>
  <span class="morado">PB14â”€â”€â–ºXSHUT3   â•‘             BlackPill                    â•‘   PB3â—„â”€â”€â–ºSDA2â”€â”€â–º VL53L0X TRS + MPU6050</span>
  <span class="morado">PB15â”€â”€â–ºXSHUT4   â•‘                                          â•‘  PB10â—„â”€â”€â–ºSCL2â”€â”€â–º VL53L0X TRS + MPU6050</span>
                  <span class="gris">â•‘                                          â•‘</span>
  <span class="rojo">PA8 â”€â”€â–ºPWM Izq  â•‘    [Red Neuronal IA]                     â•‘  PA6â—„â”€â”€TIM3CH1â—„â”€â”€ Encoder IZQ Canal A</span>
  <span class="rojo">PA9 â”€â”€â–ºDIR Izq  â•‘    [Control PID]                         â•‘  PA7â—„â”€â”€TIM3CH2â—„â”€â”€ Encoder IZQ Canal B</span>
  <span class="rojo">PA10â”€â”€â–ºPWM Der  â•‘    [Mapa_Paredes]                        â•‘  PB6â—„â”€â”€TIM4CH1â—„â”€â”€ Encoder DER Canal A</span>
  <span class="rojo">PA11â”€â”€â–ºDIR Der  â•‘                                          â•‘  PB7â—„â”€â”€TIM4CH2â—„â”€â”€ Encoder DER Canal B</span>
                  <span class="gris">â•‘                                          â•‘</span>
  <span class="naranja">PB0 â—„â”€â”€BotÃ³n    â•‘                                          â•‘  PA13â—„â”€â”€â–ºSWDIO  â—„â”€â”€â–º ST-Link</span>
                  <span class="gris">â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>  <span class="naranja">PA14â—„â”€â”€SWDCLK â—„â”€â”€ ST-Link</span>

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” SENSORES I2C â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

  Bus I2C1 (PB8=SCL, PB9=SDA):
  <span class="cyan">  â”Œâ”€â”€ VL53L0X IZQ  (addr 0x30): VIN=3.3V, GND, SCL=PB8, SDA=PB9, XSHUT=PB12</span>
  <span class="cyan">  â”œâ”€â”€ VL53L0X CEN  (addr 0x31): VIN=3.3V, GND, SCL=PB8, SDA=PB9, XSHUT=PB13</span>
  <span class="cyan">  â””â”€â”€ VL53L0X DER  (addr 0x29): VIN=3.3V, GND, SCL=PB8, SDA=PB9, XSHUT=PB14</span>
  <span class="gris">       â””â”€â”€ Pull-ups 10kÎ© entre SCL/SDA y 3.3V (1 por lÃ­nea)</span>

  Bus I2C2 (PB10=SCL, PB3=SDA):
  <span class="cyan">  â”œâ”€â”€ VL53L0X TRS  (addr 0x29): VIN=3.3V, GND, SCL=PB10, SDA=PB3, XSHUT=PB15</span>
  <span class="morado">  â””â”€â”€ MPU6050      (addr 0x68): VCC=3.3V, GND, SCL=PB10, SDA=PB3, AD0=GND</span>
  <span class="gris">       â””â”€â”€ Pull-ups 10kÎ© entre SCL/SDA y 3.3V (solo si no son mÃ³dulos breakout)</span>

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” MOTORES Y DRIVERS â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

  <span class="rojo">PA8 â”€â”€â–º DRV8833#1 AIN1 â”€â”€â–º AOUT1/AOUT2 â”€â”€â–º Motor IZQ (rojo/negro)</span>
  <span class="rojo">PA9 â”€â”€â–º DRV8833#1 AIN2</span>
  <span class="verde">         DRV8833#1 VM   â—„â”€â”€ 6V RAIL</span>
  <span class="azul">         DRV8833#1 VCC  â—„â”€â”€ 3.3V RAIL</span>
  <span class="azul">         DRV8833#1 nSLEEP â—„â”€â”€ 3.3V (siempre activo)</span>
  <span class="gris">         DRV8833#1 GND  â—„â”€â”€ GND RAIL</span>
  <span class="verde">         Motor IZQ Encoder: verde=3.3V, azul=GND, amarillo=PA6, blanco=PA7</span>

  <span class="rojo">PA10â”€â”€â–º DRV8833#2 AIN1 â”€â”€â–º AOUT1/AOUT2 â”€â”€â–º Motor DER (rojo/negro)</span>
  <span class="rojo">PA11â”€â”€â–º DRV8833#2 AIN2</span>
  <span class="verde">         DRV8833#2 VM   â—„â”€â”€ 6V RAIL</span>
  <span class="azul">         DRV8833#2 VCC  â—„â”€â”€ 3.3V RAIL</span>
  <span class="azul">         DRV8833#2 nSLEEP â—„â”€â”€ 3.3V (siempre activo)</span>
  <span class="gris">         DRV8833#2 GND  â—„â”€â”€ GND RAIL</span>
  <span class="verde">         Motor DER Encoder: verde=3.3V, azul=GND, amarillo=PB6, blanco=PB7</span></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N 12: CHECKLIST â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="seccion verde">
  <div class="sec-titulo">
    <div class="sec-num">12</div>
    <span class="emoji">âœ…</span>
    <h2>Checklist â€“ Verifica antes de encender</h2>
  </div>

  <div class="aviso peligro">
    <div class="icono"></div>
    <div class="texto">
      <strong>Â¡LEE ESTO ANTES DE CONECTAR LA BATERÃA!</strong>
      Sigue la lista EN ORDEN. Cada punto previene un daÃ±o diferente. Si no puedes marcar un punto, no avances al siguiente.
    </div>
  </div>

  <div class="check-grid">
    <div class="check-group">
      <h4>âš¡ AlimentaciÃ³n â€“ Verifica primero</h4>
      <div class="check-item"><div class="check-box"></div><span>BaterÃ­a LiPo cargada y balanceada (mide: 3.7â€“4.2V por celda)</span></div>
      <div class="check-item"><div class="check-box"></div><span>Switch en posiciÃ³n OFF antes de cualquier conexiÃ³n</span></div>
      <div class="check-item"><div class="check-box"></div><span>MP1584EN ajustado a exactamente 3.30V (medir sin carga)</span></div>
      <div class="check-item"><div class="check-box"></div><span>XL6009 ajustado a exactamente 6.00V (medir sin carga)</span></div>
      <div class="check-item"><div class="check-box"></div><span>GND comÃºn conectado a TODOS los mÃ³dulos</span></div>
      <div class="check-item"><div class="check-box"></div><span>Sin cortocircuito en rail 3.3V (mide resistencia &gt;1kÎ© entre 3.3V y GND con todo apagado)</span></div>
      <div class="check-item"><div class="check-box"></div><span>Sin cortocircuito en rail 6V</span></div>
      <div class="check-item"><div class="check-box"></div><span>nSLEEP de ambos DRV8833 conectados a 3.3V</span></div>
    </div>
    <div class="check-group">
      <h4>ğŸ”­ Sensores VL53L0X</h4>
      <div class="check-item"><div class="check-box"></div><span>VL53L0X IZQ: VINâ†’3.3V, GNDâ†’GND, SCLâ†’PB8, SDAâ†’PB9, XSHUTâ†’PB12</span></div>
      <div class="check-item"><div class="check-box"></div><span>VL53L0X CEN: VINâ†’3.3V, GNDâ†’GND, SCLâ†’PB8, SDAâ†’PB9, XSHUTâ†’PB13</span></div>
      <div class="check-item"><div class="check-box"></div><span>VL53L0X DER: VINâ†’3.3V, GNDâ†’GND, SCLâ†’PB8, SDAâ†’PB9, XSHUTâ†’PB14</span></div>
      <div class="check-item"><div class="check-box"></div><span>VL53L0X TRASERO: VINâ†’3.3V, GNDâ†’GND, SCLâ†’PB10, SDAâ†’PB3, XSHUTâ†’PB15</span></div>
      <div class="check-item"><div class="check-box"></div><span>Pull-ups 10kÎ© instalados (SCL bus1, SDA bus1, SCL bus2, SDA bus2)</span></div>
    </div>
    <div class="check-group">
      <h4>ğŸ”„ MPU6050 (Giroscopio)</h4>
      <div class="check-item"><div class="check-box"></div><span>VCC â†’ 3.3V (Â¡no 5V!)</span></div>
      <div class="check-item"><div class="check-box"></div><span>GND â†’ GND comÃºn</span></div>
      <div class="check-item"><div class="check-box"></div><span>SCL â†’ STM32 PB10</span></div>
      <div class="check-item"><div class="check-box"></div><span>SDA â†’ STM32 PB3</span></div>
      <div class="check-item"><div class="check-box"></div><span>AD0 â†’ GND (para direcciÃ³n 0x68)</span></div>
      <div class="check-item"><div class="check-box"></div><span>INT â†’ sin conectar</span></div>
    </div>
    <div class="check-group">
      <h4>âš™ï¸ Motores + Drivers</h4>
      <div class="check-item"><div class="check-box"></div><span>DRV8833 #1: VMâ†’6V, VCCâ†’3.3V, nSLEEPâ†’3.3V, GNDâ†’GND</span></div>
      <div class="check-item"><div class="check-box"></div><span>DRV8833 #1: AIN1â†’PA8, AIN2â†’PA9</span></div>
      <div class="check-item"><div class="check-box"></div><span>DRV8833 #1: AOUT1/AOUT2 â†’ Motor Izquierdo (cables DC)</span></div>
      <div class="check-item"><div class="check-box"></div><span>DRV8833 #2: VMâ†’6V, VCCâ†’3.3V, nSLEEPâ†’3.3V, GNDâ†’GND</span></div>
      <div class="check-item"><div class="check-box"></div><span>DRV8833 #2: AIN1â†’PA10, AIN2â†’PA11</span></div>
      <div class="check-item"><div class="check-box"></div><span>DRV8833 #2: AOUT1/AOUT2 â†’ Motor Derecho (cables DC)</span></div>
      <div class="check-item"><div class="check-box"></div><span>Encoder Izq: VCCâ†’3.3V, GNDâ†’GND, Aâ†’PA6, Bâ†’PA7</span></div>
      <div class="check-item"><div class="check-box"></div><span>Encoder Der: VCCâ†’3.3V, GNDâ†’GND, Aâ†’PB6, Bâ†’PB7</span></div>
    </div>
    <div class="check-group">
      <h4>ğŸ”˜ Control y ProgramaciÃ³n</h4>
      <div class="check-item"><div class="check-box"></div><span>BotÃ³n entre PB0 y GND (con pull-up interno o externo 10kÎ©)</span></div>
      <div class="check-item"><div class="check-box"></div><span>ST-Link: GNDâ†’GND, 3.3Vâ†’3V3, SWDIOâ†’PA13, SWDCLKâ†’PA14</span></div>
      <div class="check-item"><div class="check-box"></div><span>Firmware generado y cargado desde Simulink sin errores</span></div>
    </div>
    <div class="check-group">
      <h4>ğŸ§ª Prueba inicial (con todo conectado y ON)</h4>
      <div class="check-item"><div class="check-box"></div><span>Mide 3.3V en el rail de lÃ³gica (con carga)</span></div>
      <div class="check-item"><div class="check-box"></div><span>Mide 6.0V en el rail de motores</span></div>
      <div class="check-item"><div class="check-box"></div><span>STM32 no se calienta (normal: tibio. Anormal: quema)</span></div>
      <div class="check-item"><div class="check-box"></div><span>DRV8833 no se calientan en exceso en reposo</span></div>
      <div class="check-item"><div class="check-box"></div><span>Motores responden a comandos de prueba</span></div>
      <div class="check-item"><div class="check-box"></div><span>Sensores detectan objetos al acercar la mano</span></div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N 13: TROUBLESHOOTING â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="seccion">
  <div class="sec-titulo">
    <div class="sec-num">13</div>
    <span class="emoji">ğŸ”§</span>
    <h2>Problemas Comunes y CÃ³mo Resolverlos</h2>
  </div>

  <div class="trouble-item">
    <div class="trouble-problema">âŒ El VL53L0X no aparece en el I2C scanner</div>
    <div class="trouble-causa">ğŸ“Œ Causa: El pin XSHUT estÃ¡ en LOW (sensor apagado), o la direcciÃ³n cambiÃ³ mal, o el bus I2C estÃ¡ sin pull-up</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Verifica que XSHUT = HIGH durante operaciÃ³n. Agrega resistencias pull-up 10kÎ© entre SCL/SDA y 3.3V. Ejecuta el procedimiento de asignaciÃ³n de direcciones en el orden correcto.</div>
  </div>

  <div class="trouble-item">
    <div class="trouble-problema">âŒ El MPU6050 no responde (no aparece en 0x68)</div>
    <div class="trouble-causa">ğŸ“Œ Causa: El pin AD0 estÃ¡ conectado a 3.3V en lugar de GND, haciendo que la direcciÃ³n sea 0x69</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Conecta el pin AD0 del MPU6050 directamente a GND. Verifica con el multÃ­metro que haya 0V en AD0.</div>
  </div>

  <div class="trouble-item">
    <div class="trouble-problema">âŒ El motor no gira pero el DRV8833 estÃ¡ muy caliente</div>
    <div class="trouble-causa">ğŸ“Œ Causa: Cortocircuito en los cables del motor o sobrecorriente. El DRV8833 activa la protecciÃ³n tÃ©rmica.</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Desconecta el motor inmediatamente. Mide con multÃ­metro la resistencia entre AOUT1 y AOUT2 del driver: debe ser la resistencia del devanado del motor (~5-15Î©). Si es 0Î© hay corto. Verifica que ningÃºn cable del motor toca GND o 3.3V.</div>
  </div>

  <div class="trouble-item">
    <div class="trouble-problema">âŒ El motor gira en direcciÃ³n incorrecta</div>
    <div class="trouble-causa">ğŸ“Œ Causa: Los cables del motor DC estÃ¡n invertidos (AOUT1/AOUT2)</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Intercambia los dos cables del motor DC (el rojo y negro que van del DRV8833 al motor). Esto no daÃ±a nada. El encoder no se afecta.</div>
  </div>

  <div class="trouble-item">
    <div class="trouble-problema">âŒ El encoder cuenta en direcciÃ³n incorrecta</div>
    <div class="trouble-causa">ğŸ“Œ Causa: Los canales A y B del encoder estÃ¡n invertidos</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Intercambia los cables del Canal A y Canal B del encoder (amarillo y blanco). No hay riesgo de daÃ±o al intercambiarlos.</div>
  </div>

  <div class="trouble-item">
    <div class="trouble-problema">âŒ El STM32 se reinicia constantemente (flickering del LED)</div>
    <div class="trouble-causa">ğŸ“Œ Causa: Voltaje 3.3V inestable, corriente insuficiente del regulador, o condensadores faltantes</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Agrega condensador electrolÃ­tico 10ÂµF en la salida del MP1584EN. Agrega condensadores 100nF cerca de los pines VDD del STM32. Verifica que el Buck pueda dar al menos 500mA.</div>
  </div>

  <div class="trouble-item">
    <div class="trouble-problema">âŒ El ST-Link no detecta el STM32 (Error: No target connected)</div>
    <div class="trouble-causa">ğŸ“Œ Causa: Pin BOOT0 en HIGH, STM32 en modo bootloader, o conexiones SWD invertidas</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Verifica que BOOT0 estÃ© a GND (la BlackPill tiene un jumper/resistor para esto). MantÃ©n presionado el botÃ³n RESET de la BlackPill mientras haces clic en Connect en STM32CubeProgrammer. Luego suelta el reset.</div>
  </div>

  <div class="trouble-item">
    <div class="trouble-problema">âŒ Los datos de los sensores son errÃ¡ticos/ruidosos</div>
    <div class="trouble-causa">ğŸ“Œ Causa: Cables I2C demasiado largos, sin pull-ups, o velocidad de bus muy alta</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: MantÃ©n los cables I2C menores a 20cm. Usa resistencias pull-up de 4.7kÎ© en lugar de 10kÎ©. Reduce la velocidad del bus I2C a 100kHz (modo estÃ¡ndar) en STM32CubeMX si hay errores.</div>
  </div>

  <div class="trouble-item">
    <div class="trouble-problema">âŒ El robot gira en cÃ­rculos al intentar avanzar recto</div>
    <div class="trouble-causa">ğŸ“Œ Causa: Los motores tienen velocidades mecÃ¡nicas diferentes o el PID no estÃ¡ calibrado</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Calibra los parÃ¡metros Kp, Ki, Kd del bloque Control_PID en Simulink. Prueba cada motor por separado para verificar que tienen respuesta similar. El giroscopio MPU6050 corrige esto dinÃ¡micamente si el PID estÃ¡ bien ajustado.</div>
  </div>

  <div class="trouble-item">
    <div class="trouble-problema">âŒ El robot no cambia de modo con el botÃ³n</div>
    <div class="trouble-causa">ğŸ“Œ Causa: El pin PB0 no estÃ¡ configurado como INPUT, o el pull-up no estÃ¡ activo</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Verifica en STM32CubeMX que PB0 sea GPIO_Input con Pull-up. Si usas pull-up externo, verifica que la resistencia 10kÎ© estÃ© entre PB0 y 3.3V. Mide con multÃ­metro: sin presionar debe leer 3.3V, presionado debe leer 0V.</div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECCIÃ“N 14: CUBEMX â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="seccion cyan">
  <div class="sec-titulo">
    <div class="sec-num">14</div>
    <span class="emoji">âš™ï¸</span>
    <h2>ConfiguraciÃ³n en STM32CubeMX â€“ GuÃ­a rÃ¡pida</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>Â¿Para quÃ© sirve STM32CubeMX?:</strong>
      Es la herramienta de ST para configurar los perifÃ©ricos del STM32 (timers, I2C, GPIO, etc.) y generar el cÃ³digo de inicializaciÃ³n. Simulink/Embedded Coder lo usa por detrÃ¡s. Si tu proyecto Simulink ya viene configurado, revisa que los perifÃ©ricos coincidan con esta tabla.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“‹ Resumen de configuraciÃ³n de perifÃ©ricos</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>PerifÃ©rico</th><th>Modo</th><th>Pines</th><th>ParÃ¡metros clave</th></tr></thead>
      <tbody>
        <tr><td><strong>TIM1</strong></td><td>PWM Generation CH1/CH2/CH3/CH4</td><td>PA8, PA9, PA10, PA11</td><td>Frecuencia: 20kHz. Counter period segÃºn clock. Preescaler ajustar para 20kHz.</td></tr>
        <tr><td><strong>TIM3</strong></td><td>Encoder Mode (CH1+CH2)</td><td>PA6, PA7</td><td>Mode: Encoder Mode TI1 and TI2. Counter period: 65535 (max).</td></tr>
        <tr><td><strong>TIM4</strong></td><td>Encoder Mode (CH1+CH2)</td><td>PB6, PB7</td><td>Igual que TIM3.</td></tr>
        <tr><td><strong>I2C1</strong></td><td>I2C</td><td>PB8 (SCL), PB9 (SDA)</td><td>Speed: 400kHz (Fast Mode) o 100kHz (Standard). Para VL53L0X Izq/Cen/Der.</td></tr>
        <tr><td><strong>I2C2</strong></td><td>I2C</td><td>PB10 (SCL), PB3 (SDA)</td><td>Speed: 400kHz. Para VL53L0X Trasero + MPU6050.</td></tr>
        <tr><td><strong>PB12</strong></td><td>GPIO_Output</td><td>PB12</td><td>Output level: Low (default). XSHUT Sensor IZQ.</td></tr>
        <tr><td><strong>PB13</strong></td><td>GPIO_Output</td><td>PB13</td><td>Output level: Low (default). XSHUT Sensor CEN.</td></tr>
        <tr><td><strong>PB14</strong></td><td>GPIO_Output</td><td>PB14</td><td>Output level: Low (default). XSHUT Sensor DER.</td></tr>
        <tr><td><strong>PB15</strong></td><td>GPIO_Output</td><td>PB15</td><td>Output level: Low (default). XSHUT Sensor TRASERO.</td></tr>
        <tr><td><strong>PB0</strong></td><td>GPIO_Input</td><td>PB0</td><td>Pull-up activado. GPIO mode: Input. Para botÃ³n de modo.</td></tr>
        <tr><td><strong>SYS</strong></td><td>Debug: Serial Wire</td><td>PA13, PA14</td><td>Debug: SWD. Siempre habilitado para programaciÃ³n.</td></tr>
        <tr><td><strong>Clock</strong></td><td>HSE / PLL</td><td>â€“</td><td>HCLK = 84 MHz (mÃ¡ximo del STM32F401). Usar cristal externo 25MHz si disponible.</td></tr>
      </tbody>
    </table>
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ”§ Secuencia de configuraciÃ³n en STM32CubeMX</h3>
    <div class="pasos">
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Crea un nuevo proyecto:</strong> Abre STM32CubeMX â†’ New Project â†’ busca <em>STM32F401CCU6</em> â†’ selecciÃ³nalo â†’ Start Project.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Configura el clock:</strong> Ve a <em>Clock Configuration</em>. Selecciona HSI o HSE. Sube HCLK a <strong>84 MHz</strong> usando el PLL. El asistente puede configurarlo automÃ¡ticamente.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Configura SWD:</strong> En <em>System Core â†’ SYS</em>, pon <strong>Debug = Serial Wire</strong>. Esto habilita PA13 y PA14 para programaciÃ³n.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Configura I2C1:</strong> En <em>Connectivity â†’ I2C1</em>, selecciona <strong>I2C</strong>. Speed: <em>Fast Mode 400kHz</em>. Los pines PB8/PB9 se asignan solos.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Configura I2C2:</strong> En <em>Connectivity â†’ I2C2</em>, igual que I2C1. Pines PB10 (SCL) y PB3 (SDA) se asignan automÃ¡ticamente.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Configura TIM1 para PWM:</strong> En <em>Timers â†’ TIM1</em> â†’ <em>Clock Source: Internal Clock</em>. Luego en cada channel (CH1 a CH4) selecciona <em>PWM Generation CH1/2/3/4</em>.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Configura TIM3 para encoder:</strong> En <em>Timers â†’ TIM3</em> â†’ <em>Combined Channels: Encoder Mode</em>. Selecciona <em>Encoder Mode TI1 and TI2</em>. Los pines PA6/PA7 se asignan solos.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Configura TIM4 igual que TIM3:</strong> Encoder mode en PB6/PB7.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Configura GPIO de XSHUT:</strong> Click en PB12, PB13, PB14, PB15 en el diagrama de pines â†’ selecciona <em>GPIO_Output</em> para cada uno.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Configura PB0 para botÃ³n:</strong> Click en PB0 â†’ selecciona <em>GPIO_Input</em>. En el panel de GPIO, activa <em>Pull-up</em>.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Genera el cÃ³digo:</strong> Click en <em>GENERATE CODE</em>. Selecciona el IDE (para Simulink/Embedded Coder generalmente no necesitas generar cÃ³digo manualmente â€“ Simulink lo hace).</div></div>
    </div>
  </div>
</div>

</div><!-- end wrap -->

<footer>
  <p>ğŸ¤– Manual de Conexiones Robot Micromouse STM32F401CCU6</p>
  <p>Basado en diagrama Simulink con <span>VL53L0X Ã— 4 Â· MPU6050 Â· DRV8833 Ã— 2 Â· GA12-N20 Ã— 2</span></p>
  <p style="margin-top:8px;font-size:11px;">GuÃ­a para principiantes â€“ Verifica siempre dos veces antes de encender âš¡</p>
</footer>

</body>
</html>
