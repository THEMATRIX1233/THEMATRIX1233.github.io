<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GUÃA MEGA COMPLETA â€“ Robot Micromouse STM32</title>
<style>
:root {
  --rojo: #e63946;
  --azul: #1d3557;
  --azul-light: #457b9d;
  --verde: #2d6a4f;
  --verde-light: #52b788;
  --amarillo: #f4a261;
  --naranja: #e76f51;
  --gris-oscuro: #1a1a2e;
  --gris-claro: #f8f9fa;
  --blanco: #ffffff;
  --morado: #7b2d8b;
  --cyan: #0077b6;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'Segoe UI', Arial, sans-serif; background: #eef2f7; color: #222; font-size: 14.5px; line-height: 1.6; }

.portada {
  background: linear-gradient(160deg, #0f0c29, #302b63, #24243e);
  color: white; padding: 70px 40px 50px; text-align: center; position: relative; overflow: hidden;
}
.portada::before {
  content: ''; position: absolute; top:0;left:0;right:0;bottom:0;
  background: repeating-linear-gradient(0deg,transparent,transparent 40px,rgba(255,255,255,0.02) 40px,rgba(255,255,255,0.02) 41px),
              repeating-linear-gradient(90deg,transparent,transparent 40px,rgba(255,255,255,0.02) 40px,rgba(255,255,255,0.02) 41px);
}
.portada-content { position: relative; z-index: 1; }
.portada h1 { font-size:3em; font-weight:900; letter-spacing:3px; color:#00d4ff; text-shadow:0 0 30px rgba(0,212,255,0.5); margin-bottom:8px; }
.portada h2 { font-size:1.4em; color:#ffd166; margin-bottom:6px; }
.portada h3 { font-size:1em; color:#aaa; margin-bottom:25px; font-weight:400; }
.badge-row { display:flex; flex-wrap:wrap; justify-content:center; gap:8px; margin:20px 0; }
.badge { background:rgba(255,255,255,0.1); border:1px solid rgba(255,255,255,0.2); color:white; padding:5px 14px; border-radius:20px; font-size:0.8em; }
.badge.hot { background:rgba(230,57,70,0.4); border-color:#e63946; }
.warning-portada { background:rgba(244,162,97,0.2); border:2px solid #f4a261; border-radius:10px; padding:12px 20px; max-width:600px; margin:20px auto 0; font-size:0.9em; color:#ffd166; }

.wrap { max-width:1150px; margin:0 auto; padding:30px 20px; }

.seccion { background:white; border-radius:16px; padding:35px; margin:25px 0; box-shadow:0 4px 20px rgba(0,0,0,0.08); border-top:5px solid var(--azul); }
.seccion.verde { border-top-color: var(--verde-light); }
.seccion.rojo { border-top-color: var(--rojo); }
.seccion.naranja { border-top-color: var(--naranja); }
.seccion.morado { border-top-color: var(--morado); }
.seccion.cyan { border-top-color: var(--cyan); }

.sec-titulo { display:flex; align-items:center; gap:14px; margin-bottom:25px; padding-bottom:14px; border-bottom:2px solid #f0f0f0; }
.sec-num { background:var(--azul); color:white; width:42px; height:42px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:900; font-size:1.1em; flex-shrink:0; }
.seccion.verde .sec-num { background:var(--verde-light); }
.seccion.rojo .sec-num { background:var(--rojo); }
.seccion.naranja .sec-num { background:var(--naranja); }
.seccion.morado .sec-num { background:var(--morado); }
.seccion.cyan .sec-num { background:var(--cyan); }
.sec-titulo h2 { font-size:1.55em; color:#1a1a2e; }
.sec-titulo .emoji { font-size:1.6em; }

.sub { margin:22px 0; }
.sub h3 { font-size:1.1em; color:var(--azul); padding:8px 14px; background:#f0f4ff; border-left:4px solid var(--azul-light); border-radius:0 8px 8px 0; margin-bottom:12px; }
.sub h4 { font-size:1em; color:#444; margin:12px 0 6px; font-weight:700; }

.aviso { display:flex; gap:12px; align-items:flex-start; padding:14px 16px; border-radius:10px; margin:14px 0; }
.aviso .icono { font-size:1.5em; flex-shrink:0; margin-top:1px; }
.aviso .texto { flex:1; }
.aviso .texto strong { display:block; margin-bottom:3px; }
.aviso.peligro { background:#fff0f0; border:2px solid #e63946; }
.aviso.peligro .icono::after { content:'ğŸš¨'; }
.aviso.ojo { background:#fffbf0; border:2px solid #f4a261; }
.aviso.ojo .icono::after { content:'âš ï¸'; }
.aviso.tip { background:#f0fff4; border:2px solid #52b788; }
.aviso.tip .icono::after { content:'ğŸ’¡'; }
.aviso.info { background:#f0f7ff; border:2px solid #457b9d; }
.aviso.info .icono::after { content:'ğŸ“Œ'; }
.aviso.mecate { background:#fff8e1; border:2px solid #ffc107; font-style:italic; }
.aviso.mecate .icono::after { content:'ğŸ—£ï¸'; }

.tabla-wrap { overflow-x:auto; margin:12px 0; }
table { width:100%; border-collapse:collapse; font-size:13px; }
thead th { background:var(--azul); color:white; padding:11px 13px; text-align:left; }
tbody td { padding:9px 13px; border-bottom:1px solid #e8e8e8; vertical-align:top; }
tbody tr:nth-child(even) { background:#f8f9fa; }
tbody tr:hover { background:#e8f0ff; }
.col-pin { font-family:'Courier New',monospace; font-weight:bold; color:#c0392b; background:#fff5f5; padding:2px 7px; border-radius:4px; white-space:nowrap; }
.col-dir { font-family:monospace; color:#2980b9; font-weight:bold; }

.w { display:inline-flex; align-items:center; gap:5px; font-size:12px; font-weight:600; white-space:nowrap; }
.w .dot { width:13px; height:13px; border-radius:50%; border:1.5px solid rgba(0,0,0,0.25); flex-shrink:0; }
.w-rojo .dot { background:#e63946; }
.w-negro .dot { background:#222; }
.w-azul .dot { background:#2196F3; }
.w-verde .dot { background:#4caf50; }
.w-amarillo .dot { background:#FFC107; border-color:#999; }
.w-blanco .dot { background:#fff; border:1.5px solid #aaa; }
.w-naranja .dot { background:#ff9800; }

.diagrama-cable { background:#0d1117; color:#c9d1d9; font-family:'Courier New',monospace; font-size:12.5px; line-height:1.8; padding:25px 28px; border-radius:12px; margin:16px 0; overflow-x:auto; border:1px solid #30363d; white-space:pre; }
.diagrama-cable .verde { color:#56d364; }
.diagrama-cable .rojo { color:#ff7b72; }
.diagrama-cable .azul { color:#79c0ff; }
.diagrama-cable .amarillo { color:#e3b341; }
.diagrama-cable .cyan { color:#39d5ff; }
.diagrama-cable .morado { color:#d2a8ff; }
.diagrama-cable .gris { color:#8b949e; }
.diagrama-cable .naranja { color:#ffa657; }
.diagrama-cable .blanco { color:#f0f6fc; }
.diagrama-cable .titulo { color:#ffd700; font-weight:bold; }

.pasos { counter-reset:paso; }
.paso { counter-increment:paso; display:flex; gap:16px; align-items:flex-start; background:#f8f9fa; border:1px solid #e0e0e0; border-radius:10px; padding:16px; margin:10px 0; }
.paso-num { background:var(--azul); color:white; width:34px; height:34px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:900; font-size:1em; flex-shrink:0; }
.paso-num::before { content:counter(paso); }
.paso-content { flex:1; }
.paso-content strong { color:#1a1a2e; }

.grid2 { display:grid; grid-template-columns:1fr 1fr; gap:18px; margin:14px 0; }
.grid3 { display:grid; grid-template-columns:1fr 1fr 1fr; gap:14px; margin:14px 0; }
@media(max-width:750px) { .grid2,.grid3 { grid-template-columns:1fr; } }

.card { background:#f8f9fa; border:1.5px solid #e0e0e0; border-radius:10px; padding:16px; }
.card.volt-33 { border-top:4px solid #2196F3; }
.card.volt-6 { border-top:4px solid #4caf50; }
.card.volt-bat { border-top:4px solid #e63946; }

.comp-card { display:flex; gap:15px; align-items:flex-start; background:#f8f9fa; border:1.5px solid #ddd; border-radius:10px; padding:14px; margin:8px 0; }
.comp-card-icon { font-size:2em; flex-shrink:0; width:50px; text-align:center; }
.comp-card-info h4 { color:#1a1a2e; margin-bottom:4px; }
.comp-card-info p { font-size:12.5px; color:#555; }
.comp-card-info .tag { display:inline-block; background:#1d3557; color:white; padding:2px 8px; border-radius:10px; font-size:11px; margin-right:5px; margin-top:3px; }

.check-grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
@media(max-width:700px) { .check-grid { grid-template-columns:1fr; } }
.check-group { background:#f8f9fa; border-radius:10px; padding:16px; border:1px solid #e0e0e0; }
.check-group h4 { margin-bottom:10px; color:#1a1a2e; font-size:1em; }
.check-item { display:flex; align-items:flex-start; gap:10px; padding:5px 0; border-bottom:1px solid #eee; font-size:13px; }
.check-item:last-child { border-bottom:none; }
.check-box { width:18px; height:18px; border:2px solid #aaa; border-radius:4px; flex-shrink:0; margin-top:1px; }

.trouble-item { border:1.5px solid #e0e0e0; border-radius:10px; margin:10px 0; overflow:hidden; }
.trouble-problema { background:#fde8e8; padding:11px 16px; font-weight:700; color:#7b1414; display:flex; align-items:center; gap:8px; }
.trouble-causa { background:#fff9e6; padding:9px 16px; color:#7a5c00; font-size:13px; }
.trouble-solucion { background:#f0fff4; padding:10px 16px; color:#155724; font-size:13px; }

.toc { background:linear-gradient(135deg,#1a1a2e,#16213e); color:white; border-radius:14px; padding:28px 32px; margin:25px 0; }
.toc h2 { color:#00d4ff; margin-bottom:18px; font-size:1.3em; }
.toc-grid { display:grid; grid-template-columns:1fr 1fr; gap:6px; }
@media(max-width:600px) { .toc-grid { grid-template-columns:1fr; } }
.toc-item { display:flex; align-items:center; gap:10px; padding:7px 10px; border-radius:7px; color:#c9d1d9; font-size:13px; }
.toc-num { background:rgba(0,212,255,0.2); color:#00d4ff; width:24px; height:24px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:11px; font-weight:700; flex-shrink:0; }

.resumen-final { background:linear-gradient(135deg,#0f0c29,#302b63); color:white; border-radius:16px; padding:35px; margin:25px 0; }
.resumen-final h2 { color:#00d4ff; margin-bottom:20px; font-size:1.4em; }

code { background:#f0f0f0; padding:2px 6px; border-radius:4px; font-family:'Courier New',monospace; font-size:12px; color:#c0392b; }
.highlight { background:#ffec99; padding:1px 5px; border-radius:3px; font-weight:700; }
.divider { height:1px; background:linear-gradient(90deg,transparent,#ddd,transparent); margin:20px 0; }

footer { text-align:center; padding:40px 20px; background:#1a1a2e; color:#555; margin-top:40px; }
footer span { color:#00d4ff; }
</style>
</head>
<body>

<!-- PORTADA -->
<div class="portada">
  <div class="portada-content">
    <div style="font-size:0.8em;color:#888;letter-spacing:3px;margin-bottom:10px;">GUÃA TÃ‰CNICA COMPLETA v3.0</div>
    <h1>ğŸ¤– MICROMOUSE</h1>
    <h2>Manual de Conexiones â€“ STM32F401CCU6</h2>
    <h3>Para armar el sistema desde cero, sin perderse en el camino</h3>
    <div class="badge-row">
      <span class="badge hot">âš¡ STM32F401CCU6</span>
      <span class="badge">ğŸ”­ VL53L0X Ã— 4</span>
      <span class="badge">ğŸ”„ MPU6050</span>
      <span class="badge">âš™ï¸ DRV8833 Ã— 2</span>
      <span class="badge">ğŸ”© GA12-N20 Ã— 2</span>
      <span class="badge">ğŸ§  MATLAB Simulink</span>
      <span class="badge">ğŸ”‹ LiPo 3.7V</span>
    </div>
    <div class="warning-portada">
      ğŸ—£ï¸ <strong>Oye escucha:</strong> Lee este manual completo ANTES de conectar cualquier cable.
      Un error en la alimentaciÃ³n puede daÃ±ar todo el sistema en milisegundos.
      No hay CTRL+Z en el hardware. Checa dos veces antes de encender.
    </div>
  </div>
</div>

<div class="wrap">

<!-- TABLA DE CONTENIDOS -->
<div class="toc">
  <h2>ğŸ“‹ Â¿QuÃ© viene en este manual?</h2>
  <div class="toc-grid">
    <div class="toc-item"><span class="toc-num">1</span> Lista de componentes completa</div>
    <div class="toc-item"><span class="toc-num">2</span> CÃ³mo funciona el sistema</div>
    <div class="toc-item"><span class="toc-num">3</span> Sistema de alimentaciÃ³n â€“ lo primero</div>
    <div class="toc-item"><span class="toc-num">4</span> Pinout completo del STM32F401CCU6</div>
    <div class="toc-item"><span class="toc-num">5</span> Sensores VL53L0X Ã— 4</div>
    <div class="toc-item"><span class="toc-num">6</span> IMU MPU6050 (Giroscopio)</div>
    <div class="toc-item"><span class="toc-num">7</span> Driver DRV8833 Ã— 2</div>
    <div class="toc-item"><span class="toc-num">8</span> Motores GA12-N20 + encoders</div>
    <div class="toc-item"><span class="toc-num">9</span> BotÃ³n de modo GPIOB</div>
    <div class="toc-item"><span class="toc-num">10</span> ProgramaciÃ³n ST-Link SWD</div>
    <div class="toc-item"><span class="toc-num">11</span> Diagrama global del sistema</div>
    <div class="toc-item"><span class="toc-num">12</span> Checklist antes de encender</div>
    <div class="toc-item"><span class="toc-num">13</span> Problemas comunes y soluciones</div>
    <div class="toc-item"><span class="toc-num">14</span> ConfiguraciÃ³n STM32CubeMX</div>
  </div>
</div>

<!-- SECCIÃ“N 1: COMPONENTES -->
<div class="seccion verde">
  <div class="sec-titulo">
    <div class="sec-num">1</div>
    <span class="emoji">ğŸ§°</span>
    <h2>Lista de Componentes â€“ Todo lo que necesitas</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>Antes de arrancar:</strong>
      Consigue TODOS los componentes primero. No hay nada mÃ¡s frustrante que armar la mitad del sistema y descubrir que falta algo. AquÃ­ la lista completa con todo lo que va en el robot.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ Componentes ElectrÃ³nicos</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>#</th><th>Componente</th><th>Cant.</th><th>FunciÃ³n en el robot</th><th>Voltaje</th></tr></thead>
      <tbody>
        <tr><td>1</td><td><strong>STM32F401CCU6 (BlackPill)</strong></td><td>1</td><td>Cerebro del robot â€“ ejecuta el cÃ³digo Simulink</td><td>3.3V</td></tr>
        <tr><td>2</td><td><strong>VL53L0X mÃ³dulo breakout</strong></td><td>4</td><td>Mide distancia a las paredes del laberinto (laser ToF)</td><td>3.3V</td></tr>
        <tr><td>3</td><td><strong>MPU6050 mÃ³dulo breakout</strong></td><td>1</td><td>Giroscopio â€“ mide Ã¡ngulo de giro del robot</td><td>3.3V</td></tr>
        <tr><td>4</td><td><strong>DRV8833 mÃ³dulo breakout</strong></td><td>2</td><td>Driver que controla velocidad y direcciÃ³n de motores</td><td>VM=6V, VCC=3.3V</td></tr>
        <tr><td>5</td><td><strong>Motor GA12-N20 300RPM 6V + encoder</strong></td><td>2</td><td>Motores de tracciÃ³n izquierdo y derecho</td><td>6V</td></tr>
        <tr><td>6</td><td><strong>BaterÃ­a LiPo 3.7V 500mAh</strong></td><td>1</td><td>Fuente de energÃ­a principal del robot</td><td>3.7â€“4.2V</td></tr>
        <tr><td>7</td><td><strong>Regulador Buck MP1584EN</strong></td><td>1</td><td>Baja voltaje baterÃ­a a 3.3V estables para toda la lÃ³gica</td><td>Salida: 3.3V</td></tr>
        <tr><td>8</td><td><strong>Regulador Boost XL6009</strong></td><td>1</td><td>Sube voltaje baterÃ­a a 6V estables para los motores</td><td>Salida: 6V</td></tr>
        <tr><td>9</td><td><strong>Boost USB-C MT3608</strong></td><td>1</td><td>Convierte USB 5V para cargar o alimentar</td><td>Salida: 5V</td></tr>
        <tr><td>10</td><td><strong>Pulsador tÃ¡ctil (4 pines)</strong></td><td>1</td><td>Selecciona modo exploraciÃ³n o fast-run</td><td>3.3V lÃ³gica</td></tr>
        <tr><td>11</td><td><strong>Condensador cerÃ¡mico 100nF</strong></td><td>6</td><td>Desacoplo de alimentaciÃ³n cerca de cada chip</td><td>â€“</td></tr>
        <tr><td>12</td><td><strong>Condensador electrolÃ­tico 10ÂµF</strong></td><td>2</td><td>Filtro en salida de reguladores Buck y Boost</td><td>â‰¥10V</td></tr>
        <tr><td>13</td><td><strong>Interruptor ON/OFF</strong></td><td>1</td><td>Encender y apagar todo el robot</td><td>â€“</td></tr>
        <tr><td>14</td><td><strong>ST-Link V2 (programador)</strong></td><td>1</td><td>Para grabar el firmware al STM32</td><td>â€“</td></tr>
        <tr><td>15</td><td><strong>Cables Dupont M-H y H-H</strong></td><td>40+</td><td>Conexiones entre componentes en protoboard</td><td>â€“</td></tr>
        <tr><td>16</td><td><strong>Protoboard 830 puntos</strong></td><td>1</td><td>Base de prototipado sin soldar</td><td>â€“</td></tr>
      </tbody>
    </table>
    </div>
  </div>

  <div class="aviso tip">
    <div class="icono"></div>
    <div class="texto">
      <strong>Nota sobre los mÃ³dulos de AliExpress:</strong>
      Los mÃ³dulos breakout de VL53L0X, MPU6050 y DRV8833 que compraste en AliExpress ya traen todo lo necesario integrado en su plaquita. No necesitas agregar componentes extra para hacerlos funcionar. Solo conecta los pines indicados en este manual y listo.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ› ï¸ Herramientas necesarias</h3>
    <div class="grid2">
      <div>
        <div class="comp-card"><div class="comp-card-icon">ğŸ“</div><div class="comp-card-info"><h4>MultÃ­metro digital</h4><p>Para medir voltajes y verificar conexiones. Indispensable antes de encender.</p><span class="tag">Esencial</span></div></div>
        <div class="comp-card"><div class="comp-card-icon">ğŸ’»</div><div class="comp-card-info"><h4>PC con MATLAB + STM32 Embedded Coder</h4><p>Para generar y grabar el cÃ³digo Simulink al STM32.</p><span class="tag">Esencial</span></div></div>
      </div>
      <div>
        <div class="comp-card"><div class="comp-card-icon">ğŸ”§</div><div class="comp-card-info"><h4>Desarmador de punta fina</h4><p>Para ajustar el potenciÃ³metro de los reguladores de voltaje.</p><span class="tag">Esencial</span></div></div>
        <div class="comp-card"><div class="comp-card-icon">ğŸ”</div><div class="comp-card-info"><h4>Lupa o lente de aumento</h4><p>Los mÃ³dulos son pequeÃ±os. Una lupa ayuda a verificar pines.</p><span class="tag">Muy Ãºtil</span></div></div>
      </div>
    </div>
  </div>
</div>

<!-- SECCIÃ“N 2: ARQUITECTURA -->
<div class="seccion cyan">
  <div class="sec-titulo">
    <div class="sec-num">2</div>
    <span class="emoji">ğŸ—ºï¸</span>
    <h2>Arquitectura del Sistema â€“ El panorama completo</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>EntiÃ©ndelo antes de conectar:</strong>
      El robot tiene 5 subsistemas que trabajan juntos. Si entiendes cÃ³mo se conectan, armar el sistema es mucho mÃ¡s fÃ¡cil y no te pierdes.
    </div>
  </div>

  <div class="diagrama-cable"><span class="titulo">â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  ARQUITECTURA GENERAL DEL ROBOT MICROMOUSE                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” SUBSISTEMA 1: ALIMENTACIÃ“N â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

  <span class="rojo">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>  Switch   <span class="azul">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="rojo">â”‚ LiPo 3.7V   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  MP1584EN Buck   â”œâ”€â”€â”€â”€â”€â”€â–º 3.3V â”€â”€â–º STM32, Sensores, Drivers(VCC)</span>
  <span class="rojo">â”‚  500mAh     â”‚</span>  ON/OFF   <span class="azul">â”‚  (ajustar 3.3V)  â”‚</span>
  <span class="rojo">â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜</span>           <span class="azul">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
         â”‚
         <span class="verde">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
                             <span class="verde">â”‚  XL6009 Boost    â”œâ”€â”€â”€â”€â”€â”€â–º 6.0V â”€â”€â–º Drivers(VM) â†’ Motores</span>
                             <span class="verde">â”‚  (ajustar 6V)    â”‚</span>
                             <span class="verde">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
  <span class="gris">GND comÃºn â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GND de TODO</span>

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” SUBSISTEMA 2: SENSADO â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

  <span class="cyan">VL53L0X Izquierdo</span>  (addr 0x30) â”€â”
  <span class="cyan">VL53L0X Centro</span>     (addr 0x31) â”€â”¼â”€â”€â–º <span class="azul">Bus I2C1: PB8(SCL) / PB9(SDA)</span> â”€â”€â–º STM32
  <span class="cyan">VL53L0X Derecho</span>    (addr 0x29) â”€â”˜    XSHUT: PB12, PB13, PB14

  <span class="cyan">VL53L0X Trasero</span>    (addr 0x29) â”€â”€â”€â”€â–º <span class="azul">Bus I2C2: PB10(SCL) / PB3(SDA)</span>  â”€â”€â–º STM32
  <span class="morado">MPU6050</span>            (addr 0x68) â”€â”€â”€â”€â–º <span class="azul">Bus I2C2: PB10(SCL) / PB3(SDA)</span>  â”€â”€â–º STM32

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” SUBSISTEMA 3: PROCESAMIENTO â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

                     <span class="azul">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  BotÃ³n (PB0) â”€â”€â”€â”€â”€â–º <span class="azul">â”‚          STM32F401CCU6                   â”‚</span>
  VL53L0X Ã— 4 â”€â”€â”€â”€â”€â–º <span class="azul">â”‚   MODO_EXPLORACION / MODO_FAST_RUN       â”‚</span>
  MPU6050 â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º <span class="azul">â”‚   Mapa_Paredes (memoria)                 â”‚</span>
                     <span class="azul">â”‚   Red_Neuronal_IA â†’ Angulo_Deseado       â”‚</span>
                     <span class="azul">â”‚   Control_PID â†’ vel_motor_izq/der        â”‚</span>
                     <span class="azul">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” SUBSISTEMA 4: CONTROL DE MOTORES â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

  STM32 PA8  (TIM1_CH1 PWM) â”€â”€â–º <span class="naranja">DRV8833 #1</span> AIN1 â”€â”€â–º AOUT1/AOUT2 â”€â”€â–º Motor Izq
  STM32 PA9  (TIM1_CH2 DIR) â”€â”€â–º <span class="naranja">DRV8833 #1</span> AIN2
  STM32 PA10 (TIM1_CH3 PWM) â”€â”€â–º <span class="naranja">DRV8833 #2</span> AIN1 â”€â”€â–º AOUT1/AOUT2 â”€â”€â–º Motor Der
  STM32 PA11 (TIM1_CH4 DIR) â”€â”€â–º <span class="naranja">DRV8833 #2</span> AIN2

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” SUBSISTEMA 5: RETROALIMENTACIÃ“N (ENCODERS) â”â”â”â”â”â”â”</span>

  Motor Izq Encoder A â”€â”€â–º STM32 PA6 (TIM3_CH1) â”€â”  velocidad real
  Motor Izq Encoder B â”€â”€â–º STM32 PA7 (TIM3_CH2) â”€â”˜  â†’ PID corrige
  Motor Der Encoder A â”€â”€â–º STM32 PB6 (TIM4_CH1) â”€â”
  Motor Der Encoder B â”€â”€â–º STM32 PB7 (TIM4_CH2) â”€â”˜</div>
</div>

<!-- SECCIÃ“N 3: ALIMENTACIÃ“N -->
<div class="seccion rojo">
  <div class="sec-titulo">
    <div class="sec-num">3</div>
    <span class="emoji">âš¡</span>
    <h2>Sistema de AlimentaciÃ³n â€“ Empieza por aquÃ­</h2>
  </div>

  <div class="aviso peligro">
    <div class="icono"></div>
    <div class="texto">
      <strong>ğŸš¨ ESTO ES LO MÃS CRÃTICO DE TODO EL PROYECTO</strong>
      El STM32, los VL53L0X y el MPU6050 solo toleran <strong>mÃ¡ximo 3.6V</strong>.
      Si conectas directamente la baterÃ­a (4.2V) o 5V a estos chips, se daÃ±an
      permanentemente en segundos. Por eso usamos los reguladores.
    </div>
  </div>

  <div class="sub">
    <h3>âš¡ Las 3 lÃ­neas de voltaje del sistema</h3>
    <div class="grid3">
      <div class="card volt-bat">
        <h4>ğŸ”‹ BaterÃ­a LiPo</h4>
        <div style="font-size:2em;font-weight:900;color:#e63946;text-align:center">3.7â€“4.2V</div>
        <p style="font-size:12px;margin-top:6px;color:#555">Fuente principal. Voltaje variable segÃºn carga. <strong>NUNCA conectar directo</strong> a chips.</p>
        <p style="margin-top:6px;font-size:11px;color:#888">Solo alimenta: los reguladores</p>
      </div>
      <div class="card volt-33">
        <h4>ğŸ”µ MP1584EN â†’ 3.3V</h4>
        <div style="font-size:2em;font-weight:900;color:#2196F3;text-align:center">3.30V</div>
        <p style="font-size:12px;margin-top:6px;color:#555">Voltaje estable y regulado. Ajustar con potenciÃ³metro del mÃ³dulo.</p>
        <p style="margin-top:6px;font-size:11px;color:#888">Alimenta: STM32 Â· VL53L0X Ã—4 Â· MPU6050 Â· DRV8833 VCC Â· Encoders</p>
      </div>
      <div class="card volt-6">
        <h4>ğŸŸ¢ XL6009 â†’ 6.0V</h4>
        <div style="font-size:2em;font-weight:900;color:#4caf50;text-align:center">6.00V</div>
        <p style="font-size:12px;margin-top:6px;color:#555">Potencia para motores. GA12-N20 trabajan a 6V nominales.</p>
        <p style="margin-top:6px;font-size:11px;color:#888">Alimenta: DRV8833 VM â†’ Motores GA12-N20</p>
      </div>
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“ Diagrama completo de alimentaciÃ³n</h3>
    <div class="diagrama-cable"><span class="titulo">  DIAGRAMA DE ALIMENTACIÃ“N COMPLETO</span>
<span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

  <span class="rojo">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="rojo">â”‚   BATERÃA LiPo     â”‚</span>
  <span class="rojo">â”‚   3.7V / 500mAh    â”‚</span>
  <span class="rojo">â”‚  [+]        [â€“]    â”‚</span>
  <span class="rojo">â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜</span>
     â”‚              â”‚
     â”‚<span class="rojo"> â•”â•â•â•â•â•â•â•â•â•â•â•—  </span>â”‚
     â”‚<span class="rojo"> â•‘ SWITCH   â•‘  </span>â”‚
     â”‚<span class="rojo"> â•‘ ON / OFF â•‘  </span>â”‚
     â”‚<span class="rojo"> â•šâ•â•â•â•â•â•¤â•â•â•â•â•  </span>â”‚
     â”‚       â”‚         â”‚ â† GND va DIRECTO, sin switch
     â””â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
             â”‚         â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”¤          â”‚
      â”‚      â”‚          â”‚
      â”‚  <span class="azul">â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
      â”‚  <span class="azul">â”‚   MP1584EN  BUCK    â”‚</span>
      â”‚  <span class="azul">â”‚   VIN+ â”€â”€â”€ VOUT+   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º 3.3V</span>
      â”‚  <span class="azul">â”‚   [Ajustar a 3.3V]  â”‚</span>       â”‚
      â”‚  <span class="azul">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>       â”‚
      â”‚                              â”œâ”€â”€â–º STM32 BlackPill (3V3)
      â”‚  <span class="verde">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>      â”œâ”€â”€â–º VL53L0X Izq (VIN)
      â”‚  <span class="verde">â”‚   XL6009  BOOST     â”‚</span>      â”œâ”€â”€â–º VL53L0X Centro (VIN)
      â”‚  <span class="verde">â”‚   VIN+ â”€â”€â”€ VOUT+   â”œâ”€â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â–º VL53L0X Derecho (VIN)</span>
      â”‚  <span class="verde">â”‚   [Ajustar a 6.0V]  â”‚</span> 6V   â”œâ”€â”€â–º VL53L0X Trasero (VIN)
      â”‚  <span class="verde">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>      â”œâ”€â”€â–º MPU6050 (VCC)
      â”‚       â”‚                      â”œâ”€â”€â–º DRV8833 #1 VCC
      â”‚       â”œâ”€â”€â–º DRV8833 #1 VM     â””â”€â”€â–º DRV8833 #2 VCC
      â”‚       â””â”€â”€â–º DRV8833 #2 VM
      â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º GND RAIL COMÃšN
              (GND de Buck + GND de Boost + GND de STM32 + GND de todos los mÃ³dulos)</div>
  </div>

  <div class="sub">
    <h3>ğŸ”§ CÃ³mo ajustar los reguladores paso a paso</h3>

    <h4>â‘  Ajustar MP1584EN a 3.3V</h4>
    <div class="pasos">
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Conecta sin carga:</strong> BaterÃ­a (+) al VIN+ del MP1584EN. BaterÃ­a (â€“) al GND del regulador. Switch en OFF todavÃ­a.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Prepara el multÃ­metro:</strong> Ponlo en modo <strong>VDC</strong>. Punta roja en VOUT+ del regulador, punta negra en GND.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Enciende el switch</strong> y mira el valor en el multÃ­metro.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Ajusta el potenciÃ³metro</strong> con un desarmador muy fino, despacio, hasta que el multÃ­metro marque exactamente <span class="highlight">3.30V</span>. Sentido horario generalmente sube el voltaje.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Verifica estabilidad:</strong> El voltaje debe mantenerse en 3.3V Â±0.05V. Ya puedes conectar el STM32 y los sensores a este rail.</div></div>
    </div>

    <div class="divider"></div>

    <h4>â‘¡ Ajustar XL6009 a 6.0V</h4>
    <div class="pasos">
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Conecta el XL6009:</strong> VIN+ a baterÃ­a (+), GND a baterÃ­a (â€“).</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Mide VOUT+</strong> con el multÃ­metro en VDC.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Ajusta el potenciÃ³metro</strong> hasta leer exactamente <span class="highlight">6.00V</span>. No subas de 6.5V â€“ los motores GA12-N20 trabajan a 6V nominales.</div></div>
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“‹ Tabla completa de conexiones de alimentaciÃ³n</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>Desde</th><th>Pin/Terminal</th><th>Hasta</th><th>Pin/Terminal</th><th>Cable</th><th>Nota</th></tr></thead>
      <tbody>
        <tr><td>BaterÃ­a LiPo</td><td>+ (positivo)</td><td>Switch ON/OFF</td><td>Terminal entrada</td><td><span class="w w-rojo"><span class="dot"></span>Rojo</span></td><td>Switch primero siempre</td></tr>
        <tr><td>Switch ON/OFF</td><td>Terminal salida</td><td>MP1584EN</td><td>VIN+</td><td><span class="w w-rojo"><span class="dot"></span>Rojo</span></td><td>â€“</td></tr>
        <tr><td>Switch ON/OFF</td><td>Terminal salida</td><td>XL6009</td><td>VIN+</td><td><span class="w w-naranja"><span class="dot"></span>Naranja</span></td><td>â€“</td></tr>
        <tr><td>BaterÃ­a LiPo</td><td>â€“ (negativo)</td><td>GND rail comÃºn</td><td>â€“</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>DIRECTO, sin switch</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>STM32 BlackPill</td><td>Pin 3V3</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>â€“</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>VL53L0X Izq</td><td>VIN</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>â€“</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>VL53L0X Centro</td><td>VIN</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>â€“</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>VL53L0X Derecho</td><td>VIN</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>â€“</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>VL53L0X Trasero</td><td>VIN</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>â€“</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>MPU6050</td><td>VCC</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>â€“</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>DRV8833 #1</td><td>VCC + nSLEEP</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>nSLEEP HIGH = chip activo</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>DRV8833 #2</td><td>VCC + nSLEEP</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>nSLEEP HIGH = chip activo</td></tr>
        <tr><td>MP1584EN</td><td>VOUT+ (3.3V)</td><td>Encoders Ã—2</td><td>VCC de cada encoder</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>â€“</td></tr>
        <tr><td>XL6009</td><td>VOUT+ (6V)</td><td>DRV8833 #1</td><td>VM</td><td><span class="w w-verde"><span class="dot"></span>Verde</span></td><td>Potencia de motor</td></tr>
        <tr><td>XL6009</td><td>VOUT+ (6V)</td><td>DRV8833 #2</td><td>VM</td><td><span class="w w-verde"><span class="dot"></span>Verde</span></td><td>Potencia de motor</td></tr>
        <tr><td>MP1584EN / XL6009</td><td>GND</td><td>GND rail comÃºn</td><td>â€“</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>Todo conectado al mismo GND</td></tr>
        <tr><td>STM32 / VL53L0X Ã—4 / MPU6050 / DRV8833 Ã—2</td><td>GND de cada uno</td><td>GND rail comÃºn</td><td>â€“</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>GND de TODO al mismo rail</td></tr>
      </tbody>
    </table>
    </div>
  </div>
</div>

<!-- SECCIÃ“N 4: PINOUT STM32 -->
<div class="seccion">
  <div class="sec-titulo">
    <div class="sec-num">4</div>
    <span class="emoji">ğŸ–¥ï¸</span>
    <h2>Pinout del STM32F401CCU6 â€“ QuÃ© pin hace quÃ©</h2>
  </div>

  <div class="aviso info">
    <div class="icono"></div>
    <div class="texto">
      <strong>BlackPill STM32F401CCU6:</strong>
      Esta placa tiene todos los pines del STM32 accesibles en headers de 2.54mm. Los pines estÃ¡n etiquetados directamente en la PCB (PA0, PA1... PB0, PB1...). Solo conecta cables Dupont a los pines indicados en este manual.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ—ºï¸ Vista completa de la BlackPill con funciones</h3>
    <div class="diagrama-cable"><span class="titulo">   BlackPill STM32F401CCU6 â€“ Funciones asignadas en este proyecto</span>

<span class="gris">   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="gris">   â”‚                    [USB-C]                             â”‚</span>
<span class="gris">   â”‚  â•”â•â•â•â•—                                        â•”â•â•â•â•—   â”‚</span>
<span class="gris">   â”‚  â•‘B9 â•Ÿâ”€â”€</span><span class="azul">I2C1_SDA â”€â”€â”€â”€â”€â”€â–º VL53L0X IZQ/CEN/DER SDA</span><span class="gris">â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘B8 â•Ÿâ”€â”€</span><span class="azul">I2C1_SCL â”€â”€â”€â”€â”€â”€â–º VL53L0X IZQ/CEN/DER SCL</span><span class="gris">â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘B7 â•Ÿâ”€â”€</span><span class="verde">TIM4_CH2 â—„â”€â”€â”€â”€â”€â”€ Encoder Motor DER canal B</span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘B6 â•Ÿâ”€â”€</span><span class="verde">TIM4_CH1 â—„â”€â”€â”€â”€â”€â”€ Encoder Motor DER canal A</span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘B5 â•Ÿâ”€â”€</span><span class="gris">  (libre)                                 </span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘B4 â•Ÿâ”€â”€</span><span class="gris">  (libre)                                 </span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘B3 â•Ÿâ”€â”€</span><span class="azul">I2C2_SDA â”€â”€â”€â”€â”€â”€â–º VL53L0X TRASERO + MPU6050</span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘A15â•Ÿâ”€â”€</span><span class="gris">  (libre)                                 </span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘A12â•Ÿâ”€â”€</span><span class="gris">  (USB D+, no usar)                       </span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘A11â•Ÿâ”€â”€</span><span class="rojo">TIM1_CH4 â”€â”€â”€â”€â”€â”€â–º DRV8833 #2 AIN2 (direcciÃ³n)</span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘A10â•Ÿâ”€â”€</span><span class="rojo">TIM1_CH3 â”€â”€â”€â”€â”€â”€â–º DRV8833 #2 AIN1 (PWM vel)</span><span class="gris">â”€â”€â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘A9 â•Ÿâ”€â”€</span><span class="rojo">TIM1_CH2 â”€â”€â”€â”€â”€â”€â–º DRV8833 #1 AIN2 (direcciÃ³n)</span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘A8 â•Ÿâ”€â”€</span><span class="rojo">TIM1_CH1 â”€â”€â”€â”€â”€â”€â–º DRV8833 #1 AIN1 (PWM vel)</span><span class="gris">â”€â”€â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘B15â•Ÿâ”€â”€</span><span class="morado">GPIO OUT â”€â”€â”€â”€â”€â”€â–º XSHUT VL53L0X Trasero</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘B14â•Ÿâ”€â”€</span><span class="morado">GPIO OUT â”€â”€â”€â”€â”€â”€â–º XSHUT VL53L0X Derecho</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘B13â•Ÿâ”€â”€</span><span class="morado">GPIO OUT â”€â”€â”€â”€â”€â”€â–º XSHUT VL53L0X Centro</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘B12â•Ÿâ”€â”€</span><span class="morado">GPIO OUT â”€â”€â”€â”€â”€â”€â–º XSHUT VL53L0X Izquierdo</span><span class="gris">â”€â”€â”€â”€â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘B10â•Ÿâ”€â”€</span><span class="azul">I2C2_SCL â”€â”€â”€â”€â”€â”€â–º VL53L0X TRASERO + MPU6050</span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘B1 â•Ÿâ”€â”€</span><span class="gris">  (libre)                                 </span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘B0 â•Ÿâ”€â”€</span><span class="naranja">GPIO IN â—„â”€â”€â”€â”€â”€â”€â”€â”€ BOTÃ“N MODO (pull-up interno)</span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘A7 â•Ÿâ”€â”€</span><span class="verde">TIM3_CH2 â—„â”€â”€â”€â”€â”€â”€ Encoder Motor IZQ canal B</span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘A6 â•Ÿâ”€â”€</span><span class="verde">TIM3_CH1 â—„â”€â”€â”€â”€â”€â”€ Encoder Motor IZQ canal A</span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘A5 â•Ÿâ”€â”€</span><span class="gris">  (libre)                                 </span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘A4 â•Ÿâ”€â”€</span><span class="gris">  (libre)                                 </span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘A3 â•Ÿâ”€â”€</span><span class="gris">  UART RX (debug opcional)                </span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•‘A2 â•Ÿâ”€â”€</span><span class="gris">  UART TX (debug opcional)                </span><span class="gris">â”€â”€â•¢   â•Ÿ  â”‚</span>
<span class="gris">   â”‚  â•šâ•â•â•â•                                        â•šâ•â•â•â•   â”‚</span>
<span class="gris">   â”‚        [3V3]  [GND]  [5V0*]  [GND]  [3V3]             â”‚</span>
<span class="gris">   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
               <span class="azul">â†‘       â†‘       â†‘       â†‘</span>
           <span class="azul">3.3V</span>   <span class="gris">GND</span>   <span class="gris">*solo USB</span>  <span class="gris">GND</span>

  <span class="rojo">SWD (ProgramaciÃ³n): PA13 â—„â”€â”€â–º ST-Link SWDIO   |   PA14 â—„â”€â”€ ST-Link SWDCLK</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ“Š Tabla maestra de asignaciÃ³n de pines</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>Pin STM32</th><th>FunciÃ³n en Simulink</th><th>Conecta a</th><th>PerifÃ©rico</th></tr></thead>
      <tbody>
        <tr><td><code>PA8</code></td><td>PWM Motor Izquierdo â€“ velocidad</td><td>DRV8833 #1 â€“ AIN1</td><td>TIM1_CH1 (Salida PWM)</td></tr>
        <tr><td><code>PA9</code></td><td>DirecciÃ³n Motor Izquierdo</td><td>DRV8833 #1 â€“ AIN2</td><td>TIM1_CH2 (Salida PWM)</td></tr>
        <tr><td><code>PA10</code></td><td>PWM Motor Derecho â€“ velocidad</td><td>DRV8833 #2 â€“ AIN1</td><td>TIM1_CH3 (Salida PWM)</td></tr>
        <tr><td><code>PA11</code></td><td>DirecciÃ³n Motor Derecho</td><td>DRV8833 #2 â€“ AIN2</td><td>TIM1_CH4 (Salida PWM)</td></tr>
        <tr><td><code>PA6</code></td><td>Encoder Motor Izquierdo â€“ Canal A</td><td>Motor Izq â€“ cable Amarillo</td><td>TIM3_CH1 (Entrada)</td></tr>
        <tr><td><code>PA7</code></td><td>Encoder Motor Izquierdo â€“ Canal B</td><td>Motor Izq â€“ cable Blanco</td><td>TIM3_CH2 (Entrada)</td></tr>
        <tr><td><code>PB6</code></td><td>Encoder Motor Derecho â€“ Canal A</td><td>Motor Der â€“ cable Amarillo</td><td>TIM4_CH1 (Entrada)</td></tr>
        <tr><td><code>PB7</code></td><td>Encoder Motor Derecho â€“ Canal B</td><td>Motor Der â€“ cable Blanco</td><td>TIM4_CH2 (Entrada)</td></tr>
        <tr><td><code>PB8</code></td><td>I2C1 Clock â€“ bus sensores frente</td><td>SCL de VL53L0X Izq + Centro + Der</td><td>I2C1_SCL</td></tr>
        <tr><td><code>PB9</code></td><td>I2C1 Data â€“ bus sensores frente</td><td>SDA de VL53L0X Izq + Centro + Der</td><td>I2C1_SDA</td></tr>
        <tr><td><code>PB10</code></td><td>I2C2 Clock â€“ bus trasero + IMU</td><td>SCL de VL53L0X Trasero + MPU6050</td><td>I2C2_SCL</td></tr>
        <tr><td><code>PB3</code></td><td>I2C2 Data â€“ bus trasero + IMU</td><td>SDA de VL53L0X Trasero + MPU6050</td><td>I2C2_SDA</td></tr>
        <tr><td><code>PB12</code></td><td>XSHUT Sensor Izquierdo</td><td>VL53L0X Izq â€“ pin XSHUT</td><td>GPIO Output</td></tr>
        <tr><td><code>PB13</code></td><td>XSHUT Sensor Centro</td><td>VL53L0X Centro â€“ pin XSHUT</td><td>GPIO Output</td></tr>
        <tr><td><code>PB14</code></td><td>XSHUT Sensor Derecho</td><td>VL53L0X Der â€“ pin XSHUT</td><td>GPIO Output</td></tr>
        <tr><td><code>PB15</code></td><td>XSHUT Sensor Trasero</td><td>VL53L0X Trasero â€“ pin XSHUT</td><td>GPIO Output</td></tr>
        <tr><td><code>PB0</code></td><td>BotÃ³n de modo (GPIOB)</td><td>Pulsador â€“ un terminal al GND</td><td>GPIO Input (pull-up interno)</td></tr>
        <tr><td><code>PA13</code></td><td>SWD Data â€“ programaciÃ³n</td><td>ST-Link SWDIO</td><td>SWD</td></tr>
        <tr><td><code>PA14</code></td><td>SWD Clock â€“ programaciÃ³n</td><td>ST-Link SWDCLK</td><td>SWD</td></tr>
        <tr><td><code>3V3</code></td><td>AlimentaciÃ³n lÃ³gica</td><td>MP1584EN VOUT+ (3.3V)</td><td>VDD</td></tr>
        <tr><td><code>GND (Ã—2)</code></td><td>Tierra</td><td>GND rail comÃºn</td><td>VSS</td></tr>
      </tbody>
    </table>
    </div>
  </div>
</div>

<!-- SECCIÃ“N 5: VL53L0X -->
<div class="seccion morado">
  <div class="sec-titulo">
    <div class="sec-num">5</div>
    <span class="emoji">ğŸ”­</span>
    <h2>Sensores VL53L0X Ã— 4 â€“ Distancia ToF</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>El problema que hay que resolver:</strong>
      Todos los VL53L0X arrancan con la misma direcciÃ³n I2C (0x29). Si conectas 3 en el mismo bus sin cambiar sus direcciones, el STM32 no sabe con cuÃ¡l estÃ¡ hablando. La soluciÃ³n: usar el pin XSHUT para encenderlos uno por uno y asignarles una direcciÃ³n Ãºnica por software.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“ Pines del mÃ³dulo VL53L0X breakout</h3>
    <div class="diagrama-cable"><span class="titulo">  MÃ“DULO VL53L0X â€“ Pines disponibles</span>

  <span class="gris">  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">  â”‚              VL53L0X Breakout Module              â”‚</span>
  <span class="gris">  â”‚                                                   â”‚</span>
  <span class="gris">  â”‚  â”Œâ”€â”€â”€â”  â† Ventana del sensor lÃ¡ser               â”‚</span>
  <span class="gris">  â”‚  â””â”€â”€â”€â”˜                                            â”‚</span>
  <span class="gris">  â”‚                                                   â”‚</span>
  <span class="gris">  â”‚  [VIN]  â”€â”€</span><span class="azul">â”€â”€â”€â”€â”€â”€â”€â”€ 3.3V del Buck (MP1584EN)</span>  <span class="gris">  â”‚</span>
  <span class="gris">  â”‚  [GND]  â”€â”€</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€ GND rail comÃºn</span>            <span class="gris">  â”‚</span>
  <span class="gris">  â”‚  [SCL]  â”€â”€</span><span class="cyan">â”€â”€â”€â”€â”€â”€â”€â”€ PB8 (bus I2C1) o PB10 (bus I2C2)</span><span class="gris">â”‚</span>
  <span class="gris">  â”‚  [SDA]  â”€â”€</span><span class="cyan">â”€â”€â”€â”€â”€â”€â”€â”€ PB9 (bus I2C1) o PB3  (bus I2C2)</span><span class="gris">â”‚</span>
  <span class="gris">  â”‚  [XSHUT]â”€â”€</span><span class="morado">â”€â”€â”€â”€â”€â”€â”€â”€ GPIO del STM32 (PB12/13/14/15)</span><span class="gris"> â”‚</span>
  <span class="gris">  â”‚  [GPIO1] â”€â”€</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€ Sin conectar (N/C)</span>         <span class="gris">  â”‚</span>
  <span class="gris">  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

  <span class="naranja">XSHUT = LOW  â†’ Sensor APAGADO (en reset, no responde)</span>
  <span class="verde">XSHUT = HIGH â†’ Sensor ENCENDIDO y listo para I2C</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ”„ Secuencia de inicializaciÃ³n para asignar direcciones Ãºnicas</h3>
    <div class="diagrama-cable"><span class="titulo">  SECUENCIA DE INICIALIZACIÃ“N â€“ VL53L0X Ã— 4</span>
<span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

  <span class="rojo">ARRANQUE: Apaga todos los sensores del bus I2C1</span>
    STM32 pone PB12 = LOW  â†’ Sensor IZQ  apagado
    STM32 pone PB13 = LOW  â†’ Sensor CEN  apagado
    STM32 pone PB14 = LOW  â†’ Sensor DER  apagado
    STM32 pone PB15 = LOW  â†’ Sensor TRAS apagado

  <span class="naranja">PASO 1: Enciende solo el sensor Izquierdo</span>
    STM32 pone PB12 = HIGH â†’ Sensor IZQ se activa
    Solo Ã©l responde en la direcciÃ³n default: 0x29
    Firmware le manda comando: "cambia tu direcciÃ³n a 0x30"
    <span class="verde">â†’ Sensor IZQ queda en direcciÃ³n 0x30</span>

  <span class="naranja">PASO 2: Enciende el sensor Centro</span>
    STM32 pone PB13 = HIGH â†’ Sensor CEN se activa
    Responde en 0x29 (IZQ ya no, estÃ¡ en 0x30)
    Firmware le manda: "cambia a 0x31"
    <span class="verde">â†’ Sensor CEN queda en direcciÃ³n 0x31</span>

  <span class="naranja">PASO 3: Enciende el sensor Derecho</span>
    STM32 pone PB14 = HIGH â†’ Sensor DER se activa
    Lo dejamos en 0x29 (ya no hay conflicto)
    <span class="verde">â†’ Sensor DER queda en direcciÃ³n 0x29</span>

  <span class="naranja">PASO 4: Enciende el sensor Trasero (bus I2C2 independiente)</span>
    STM32 pone PB15 = HIGH â†’ Sensor TRAS se activa
    EstÃ¡ en bus I2C2, no tiene conflicto con los otros 3
    <span class="verde">â†’ Sensor TRAS queda en direcciÃ³n 0x29 (bus separado)</span>

  <span class="verde">âœ“ Sistema listo â€“ 4 sensores activos, todos con direcciÃ³n Ãºnica</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ“Š Mapa de direcciones I2C</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>Sensor</th><th>PosiciÃ³n</th><th>Bus I2C</th><th>SCL</th><th>SDA</th><th>XSHUT</th><th>DirecciÃ³n final</th></tr></thead>
      <tbody>
        <tr><td>VL53L0X 1</td><td>Izquierdo</td><td>I2C1</td><td class="col-pin">PB8</td><td class="col-pin">PB9</td><td class="col-pin">PB12</td><td class="col-dir">0x30</td></tr>
        <tr><td>VL53L0X 2</td><td>Centro</td><td>I2C1</td><td class="col-pin">PB8</td><td class="col-pin">PB9</td><td class="col-pin">PB13</td><td class="col-dir">0x31</td></tr>
        <tr><td>VL53L0X 3</td><td>Derecho</td><td>I2C1</td><td class="col-pin">PB8</td><td class="col-pin">PB9</td><td class="col-pin">PB14</td><td class="col-dir">0x29</td></tr>
        <tr><td>VL53L0X 4</td><td>Trasero</td><td>I2C2</td><td class="col-pin">PB10</td><td class="col-pin">PB3</td><td class="col-pin">PB15</td><td class="col-dir">0x29</td></tr>
      </tbody>
    </table>
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ Diagrama de cableado â€“ Bus I2C1 (3 sensores en paralelo)</h3>
    <div class="diagrama-cable"><span class="titulo">  BUS I2C1 â€“ VL53L0X IZQ + CENTRO + DER</span>
<span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

  STM32
  <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">â”‚  PB8     â”œâ”€â”€</span><span class="cyan">SCL</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">â”‚(I2C1_SCL)â”‚</span>                 <span class="gris">â”‚                    â”‚                 â”‚</span>
  <span class="gris">â”‚  PB9     â”œâ”€â”€</span><span class="cyan">SDA</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚                 â”‚</span>
  <span class="gris">â”‚(I2C1_SDA)â”‚</span>                 <span class="gris">â”‚                    â”‚                 â”‚</span>
  <span class="gris">â”‚  PB12    â”œâ”€â”€</span><span class="morado">XSHUT1</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚                 â”‚</span>
  <span class="gris">â”‚  PB13    â”œâ”€â”€</span><span class="morado">XSHUT2</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚                 â”‚</span>
  <span class="gris">â”‚  PB14    â”œâ”€â”€</span><span class="morado">XSHUT3</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚                 â”‚</span>
  <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>                 <span class="gris">â–¼                    â–¼                 â–¼</span>
                    <span class="cyan">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
                    <span class="cyan">â”‚ VL53L0X IZQ  â”‚  â”‚ VL53L0X CEN  â”‚  â”‚ VL53L0X DER  â”‚</span>
                    <span class="cyan">â”‚  addr: 0x30  â”‚  â”‚  addr: 0x31  â”‚  â”‚  addr: 0x29  â”‚</span>
                    <span class="cyan">â”‚              â”‚  â”‚              â”‚  â”‚              â”‚</span>
                    <span class="cyan">â”‚ VINâ”€â”€</span><span class="azul">3.3V</span>   <span class="cyan">â”‚  â”‚ VINâ”€â”€</span><span class="azul">3.3V</span>   <span class="cyan">â”‚  â”‚ VINâ”€â”€</span><span class="azul">3.3V</span>   <span class="cyan">â”‚</span>
                    <span class="cyan">â”‚ GNDâ”€â”€</span><span class="gris">GND</span>   <span class="cyan">â”‚  â”‚ GNDâ”€â”€</span><span class="gris">GND</span>   <span class="cyan">â”‚  â”‚ GNDâ”€â”€</span><span class="gris">GND</span>   <span class="cyan">â”‚</span>
                    <span class="cyan">â”‚ SCLâ”€â”€</span><span class="cyan">PB8</span>   <span class="cyan">â”‚  â”‚ SCLâ”€â”€</span><span class="cyan">PB8</span>   <span class="cyan">â”‚  â”‚ SCLâ”€â”€</span><span class="cyan">PB8</span>   <span class="cyan">â”‚</span>
                    <span class="cyan">â”‚ SDAâ”€â”€</span><span class="cyan">PB9</span>   <span class="cyan">â”‚  â”‚ SDAâ”€â”€</span><span class="cyan">PB9</span>   <span class="cyan">â”‚  â”‚ SDAâ”€â”€</span><span class="cyan">PB9</span>   <span class="cyan">â”‚</span>
                    <span class="cyan">â”‚ XSHUT</span><span class="morado">PB12</span>  <span class="cyan">â”‚  â”‚ XSHUT</span><span class="morado">PB13</span>  <span class="cyan">â”‚  â”‚ XSHUT</span><span class="morado">PB14</span>  <span class="cyan">â”‚</span>
                    <span class="cyan">â”‚ GPIO1 N/C   â”‚  â”‚ GPIO1 N/C   â”‚  â”‚ GPIO1 N/C   â”‚</span>
                    <span class="cyan">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ Diagrama de cableado â€“ Bus I2C2 (sensor trasero + MPU6050)</h3>
    <div class="diagrama-cable"><span class="titulo">  BUS I2C2 â€“ VL53L0X TRASERO + MPU6050</span>
<span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

  STM32
  <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">â”‚  PB10    â”œâ”€â”€</span><span class="cyan">SCL2</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">â”‚(I2C2_SCL)â”‚</span>                 <span class="gris">â”‚                          â”‚</span>
  <span class="gris">â”‚  PB3     â”œâ”€â”€</span><span class="cyan">SDA2</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚</span>
  <span class="gris">â”‚(I2C2_SDA)â”‚</span>                 <span class="gris">â”‚                          â”‚</span>
  <span class="gris">â”‚  PB15    â”œâ”€â”€</span><span class="morado">XSHUT4</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
  <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>                 <span class="gris">â–¼                          â–¼</span>
                    <span class="cyan">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
                    <span class="cyan">â”‚  VL53L0X TRASERO   â”‚  â”‚     MPU6050        â”‚</span>
                    <span class="cyan">â”‚   addr: 0x29       â”‚  â”‚   addr: 0x68       â”‚</span>
                    <span class="cyan">â”‚                    â”‚  â”‚                    â”‚</span>
                    <span class="cyan">â”‚ VINâ”€â”€</span><span class="azul">3.3V</span>         <span class="cyan">â”‚  â”‚ VCCâ”€â”€</span><span class="azul">3.3V</span>         <span class="cyan">â”‚</span>
                    <span class="cyan">â”‚ GNDâ”€â”€</span><span class="gris">GND</span>         <span class="cyan">â”‚  â”‚ GNDâ”€â”€</span><span class="gris">GND</span>         <span class="cyan">â”‚</span>
                    <span class="cyan">â”‚ SCLâ”€â”€</span><span class="cyan">PB10</span>        <span class="cyan">â”‚  â”‚ SCLâ”€â”€</span><span class="cyan">PB10</span>        <span class="cyan">â”‚</span>
                    <span class="cyan">â”‚ SDAâ”€â”€</span><span class="cyan">PB3</span>         <span class="cyan">â”‚  â”‚ SDAâ”€â”€</span><span class="cyan">PB3</span>         <span class="cyan">â”‚</span>
                    <span class="cyan">â”‚ XSHUT</span><span class="morado">PB15</span>        <span class="cyan">â”‚  â”‚ AD0â”€â”€</span><span class="gris">GND</span><span class="cyan"> â† 0x68 â”‚</span>
                    <span class="cyan">â”‚ GPIO1 N/C         â”‚  â”‚ INTâ”€â”€ N/C          â”‚</span>
                    <span class="cyan">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ“‹ Tabla pin a pin de los 4 sensores VL53L0X</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>Pin mÃ³dulo</th><th>IZQ â†’ STM32</th><th>CENTRO â†’ STM32</th><th>DER â†’ STM32</th><th>TRASERO â†’ STM32</th></tr></thead>
      <tbody>
        <tr><td><strong>VIN</strong></td><td>3.3V</td><td>3.3V</td><td>3.3V</td><td>3.3V</td></tr>
        <tr><td><strong>GND</strong></td><td>GND</td><td>GND</td><td>GND</td><td>GND</td></tr>
        <tr><td><strong>SCL</strong></td><td class="col-pin">PB8</td><td class="col-pin">PB8</td><td class="col-pin">PB8</td><td class="col-pin">PB10</td></tr>
        <tr><td><strong>SDA</strong></td><td class="col-pin">PB9</td><td class="col-pin">PB9</td><td class="col-pin">PB9</td><td class="col-pin">PB3</td></tr>
        <tr><td><strong>XSHUT</strong></td><td class="col-pin">PB12</td><td class="col-pin">PB13</td><td class="col-pin">PB14</td><td class="col-pin">PB15</td></tr>
        <tr><td><strong>GPIO1</strong></td><td>Sin conectar</td><td>Sin conectar</td><td>Sin conectar</td><td>Sin conectar</td></tr>
      </tbody>
    </table>
    </div>
  </div>
</div>

<!-- SECCIÃ“N 6: MPU6050 -->
<div class="seccion naranja">
  <div class="sec-titulo">
    <div class="sec-num">6</div>
    <span class="emoji">ğŸ”„</span>
    <h2>IMU MPU6050 â€“ Giroscopio</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>Â¿Para quÃ© sirve?:</strong>
      Mide la velocidad angular en el eje Z (cuÃ¡nto gira el robot). El bloque MPU6050_Gyro en Simulink lee este dato (GyroZ_deg_s) y lo manda al Control_PID para que el robot pueda hacer giros precisos y mantener lÃ­nea recta.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“‹ Tabla de conexiones pin a pin</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>Pin MPU6050</th><th>FunciÃ³n</th><th>Conecta a</th><th>Cable</th><th>Nota importante</th></tr></thead>
      <tbody>
        <tr><td><strong>VCC</strong></td><td>AlimentaciÃ³n</td><td>3.3V (MP1584EN)</td><td><span class="w w-rojo"><span class="dot"></span>Rojo</span></td><td>MÃ¡ximo 3.6V. Nunca 5V.</td></tr>
        <tr><td><strong>GND</strong></td><td>Tierra</td><td>GND rail comÃºn</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>â€“</td></tr>
        <tr><td><strong>SCL</strong></td><td>Reloj I2C</td><td>STM32 PB10 (I2C2_SCL)</td><td><span class="w w-amarillo"><span class="dot"></span>Amarillo</span></td><td>Comparte bus I2C2 con VL53L0X trasero</td></tr>
        <tr><td><strong>SDA</strong></td><td>Datos I2C</td><td>STM32 PB3 (I2C2_SDA)</td><td><span class="w w-verde"><span class="dot"></span>Verde</span></td><td>Comparte bus I2C2 con VL53L0X trasero</td></tr>
        <tr><td><strong>AD0</strong></td><td>Bit LSB de direcciÃ³n I2C</td><td>GND</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>GND = direcciÃ³n 0x68 âœ“</td></tr>
        <tr><td><strong>INT</strong></td><td>InterrupciÃ³n</td><td>Sin conectar (N/C)</td><td>â€“</td><td>No se usa en el diseÃ±o Simulink</td></tr>
        <tr><td><strong>XDA, XCL</strong></td><td>I2C auxiliar</td><td>Sin conectar (N/C)</td><td>â€“</td><td>Solo si agregas magnetÃ³metro externo</td></tr>
      </tbody>
    </table>
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“ Diagrama de cableado MPU6050</h3>
    <div class="diagrama-cable"><span class="titulo">  MPU6050 â€“ CABLEADO COMPLETO</span>

  <span class="gris">  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">  â”‚              MPU6050 Breakout Module              â”‚</span>
  <span class="gris">  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚</span>
  <span class="gris">  â”‚  â”‚         [MPU-6050 chip]                  â”‚    â”‚</span>
  <span class="gris">  â”‚  â”‚  Giroscopio 3 ejes + AcelerÃ³metro 3 ejes â”‚    â”‚</span>
  <span class="gris">  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚</span>
  <span class="gris">  â”‚                                                   â”‚</span>
  <span class="gris">  â”‚  [VCC] â”€â”€â”€â”€â”€â”€</span><span class="azul">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 3.3V</span>     <span class="gris">â”‚</span>
  <span class="gris">  â”‚  [GND] â”€â”€â”€â”€â”€â”€</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GND</span>      <span class="gris">â”‚</span>
  <span class="gris">  â”‚  [SCL] â”€â”€â”€â”€â”€â”€</span><span class="cyan">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ STM32 PB10</span><span class="gris">â”‚</span>
  <span class="gris">  â”‚  [SDA] â”€â”€â”€â”€â”€â”€</span><span class="cyan">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ STM32 PB3</span> <span class="gris">â”‚</span>
  <span class="gris">  â”‚  [AD0] â”€â”€â”€â”€â”€â”€</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GND  â† direcciÃ³n = 0x68</span>
  <span class="gris">  â”‚  [INT] â”€â”€â”€ N/C (no conectar)                     â”‚</span>
  <span class="gris">  â”‚  [XDA] â”€â”€â”€ N/C                                   â”‚</span>
  <span class="gris">  â”‚  [XCL] â”€â”€â”€ N/C                                   â”‚</span>
  <span class="gris">  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

  <span class="verde">En Simulink (Imagen 6) el bloque lee:</span>
    I2C2 Controller Read â†’ Peripheral 0x68 â†’ registros de giroscopio eje Z
    â†’ GyroZ_deg_s â†’ Control_PID â†’ vel_motor_izq / vel_motor_der</div>
  </div>
</div>

<!-- SECCIÃ“N 7: DRV8833 -->
<div class="seccion rojo">
  <div class="sec-titulo">
    <div class="sec-num">7</div>
    <span class="emoji">âš¡</span>
    <h2>Driver de Motores DRV8833 Ã— 2</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>Â¿Por quÃ© no conectar el motor directo al STM32?:</strong>
      El STM32 solo puede dar unos miliamperios por pin. Los motores necesitan cientos de miliamperios a 6V. El DRV8833 recibe la seÃ±al lÃ³gica del STM32 (3.3V, poca corriente) y la convierte en potencia para el motor (6V, hasta 2A). Es el intermediario necesario.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“ Pines del mÃ³dulo DRV8833</h3>
    <div class="diagrama-cable"><span class="titulo">  DRV8833 MÃ³dulo Breakout â€“ Pines</span>

  <span class="gris">  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">  â”‚                  DRV8833 Module                    â”‚</span>
  <span class="gris">  â”‚                                                     â”‚</span>
  <span class="gris">  â”‚  [VM]     â”€â”€</span><span class="verde">â”€â”€ 6V del XL6009 (potencia de motores)</span><span class="gris"> â”‚</span>
  <span class="gris">  â”‚  [VCC]    â”€â”€</span><span class="azul">â”€â”€ 3.3V del Buck (lÃ³gica)</span>            <span class="gris"> â”‚</span>
  <span class="gris">  â”‚  [GND]    â”€â”€</span><span class="gris">â”€â”€ GND rail comÃºn</span>                   <span class="gris"> â”‚</span>
  <span class="gris">  â”‚  [nSLEEP] â”€â”€</span><span class="azul">â”€â”€ 3.3V (HIGH = chip activo, SIEMPRE)</span><span class="gris"> â”‚</span>
  <span class="gris">  â”‚  [nFAULT] â”€â”€ Sin conectar (indica falla, salida)   â”‚</span>
  <span class="gris">  â”‚                                                     â”‚</span>
  <span class="gris">  â”‚  â”€â”€ Canal A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚</span>
  <span class="gris">  â”‚  [AIN1] â”€â”€</span><span class="rojo">â”€â”€ seÃ±al PWM (velocidad) desde STM32</span>   <span class="gris"> â”‚</span>
  <span class="gris">  â”‚  [AIN2] â”€â”€</span><span class="rojo">â”€â”€ seÃ±al DIR (direcciÃ³n) desde STM32</span>   <span class="gris"> â”‚</span>
  <span class="gris">  â”‚  [AOUT1]â”€â”€</span><span class="amarillo">â”€â”€ terminal (+) del motor</span>              <span class="gris"> â”‚</span>
  <span class="gris">  â”‚  [AOUT2]â”€â”€</span><span class="amarillo">â”€â”€ terminal (â€“) del motor</span>              <span class="gris"> â”‚</span>
  <span class="gris">  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ Diagrama completo â€“ DRV8833 #1 (Motor Izquierdo)</h3>
    <div class="diagrama-cable"><span class="titulo">  DRV8833 #1 â€“ MOTOR IZQUIERDO â€“ CABLEADO COMPLETO</span>
<span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

  STM32 BlackPill          DRV8833 #1              Motor Izq GA12-N20
  <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>            <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>            <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">â”‚          â”‚</span>            <span class="gris">â”‚          â”‚</span>            <span class="gris">â”‚  DC Motor (2 cables)</span>
  <span class="gris">â”‚  PA8 â”€â”€â”€â”€</span><span class="rojo">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AIN1      â”‚â”€â”€</span><span class="amarillo">AOUT1 â”€â”€â”€â”€â”€â”€â–º Cable ROJO  Motor +</span>
  <span class="gris">â”‚(TIM1_CH1)â”‚</span> PWM vel    <span class="gris">â”‚          â”‚â”€â”€</span><span class="amarillo">AOUT2 â”€â”€â”€â”€â”€â”€â–º Cable NEGRO Motor â€“</span>
  <span class="gris">â”‚  PA9 â”€â”€â”€â”€</span><span class="rojo">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AIN2      â”‚</span>
  <span class="gris">â”‚(TIM1_CH2)â”‚</span> DIR        <span class="gris">â”‚          â”‚</span>            <span class="gris">â”‚  Encoder (4 cables)</span>
  <span class="gris">â”‚  3.3V â”€â”€â”€</span><span class="azul">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º VCC       â”‚</span>            <span class="verde">â”‚â”€â”€ Verde  â†’ 3.3V</span>
  <span class="gris">â”‚  3.3V â”€â”€â”€</span><span class="azul">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º nSLEEP   â”‚</span>            <span class="azul">â”‚â”€â”€ Azul   â†’ GND</span>
  <span class="gris">â”‚  6.0V â”€â”€â”€</span><span class="verde">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º VM        â”‚</span>            <span class="amarillo">â”‚â”€â”€ Amarilloâ†’ STM32 PA6</span>
  <span class="gris">â”‚  GND â”€â”€â”€â”€</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º GND      â”‚</span>            <span class="blanco">â”‚â”€â”€ Blanco â†’ STM32 PA7</span>
  <span class="gris">â”‚          â”‚</span>            <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>            <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
  <span class="gris">â”‚  PA6 â—„â”€â”€â”€</span><span class="verde">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Encoder Canal A</span>
  <span class="gris">â”‚(TIM3_CH1)â”‚</span>
  <span class="gris">â”‚  PA7 â—„â”€â”€â”€</span><span class="verde">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Encoder Canal B</span>
  <span class="gris">â”‚(TIM3_CH2)â”‚</span>
  <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ Diagrama completo â€“ DRV8833 #2 (Motor Derecho)</h3>
    <div class="diagrama-cable"><span class="titulo">  DRV8833 #2 â€“ MOTOR DERECHO â€“ CABLEADO COMPLETO</span>
<span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

  STM32 BlackPill          DRV8833 #2              Motor Der GA12-N20
  <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>            <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>            <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">â”‚          â”‚</span>            <span class="gris">â”‚          â”‚</span>            <span class="gris">â”‚  DC Motor (2 cables)</span>
  <span class="gris">â”‚  PA10â”€â”€â”€â”€</span><span class="rojo">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AIN1      â”‚â”€â”€</span><span class="amarillo">AOUT1 â”€â”€â”€â”€â”€â”€â–º Cable ROJO  Motor +</span>
  <span class="gris">â”‚(TIM1_CH3)â”‚</span> PWM vel    <span class="gris">â”‚          â”‚â”€â”€</span><span class="amarillo">AOUT2 â”€â”€â”€â”€â”€â”€â–º Cable NEGRO Motor â€“</span>
  <span class="gris">â”‚  PA11â”€â”€â”€â”€</span><span class="rojo">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º AIN2      â”‚</span>
  <span class="gris">â”‚(TIM1_CH4)â”‚</span> DIR        <span class="gris">â”‚          â”‚</span>            <span class="gris">â”‚  Encoder (4 cables)</span>
  <span class="gris">â”‚  3.3V â”€â”€â”€</span><span class="azul">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º VCC       â”‚</span>            <span class="verde">â”‚â”€â”€ Verde  â†’ 3.3V</span>
  <span class="gris">â”‚  3.3V â”€â”€â”€</span><span class="azul">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º nSLEEP   â”‚</span>            <span class="azul">â”‚â”€â”€ Azul   â†’ GND</span>
  <span class="gris">â”‚  6.0V â”€â”€â”€</span><span class="verde">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º VM        â”‚</span>            <span class="amarillo">â”‚â”€â”€ Amarilloâ†’ STM32 PB6</span>
  <span class="gris">â”‚  GND â”€â”€â”€â”€</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º GND      â”‚</span>            <span class="blanco">â”‚â”€â”€ Blanco â†’ STM32 PB7</span>
  <span class="gris">â”‚          â”‚</span>            <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>            <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
  <span class="gris">â”‚  PB6 â—„â”€â”€â”€</span><span class="verde">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Encoder Canal A</span>
  <span class="gris">â”‚(TIM4_CH1)â”‚</span>
  <span class="gris">â”‚  PB7 â—„â”€â”€â”€</span><span class="verde">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Encoder Canal B</span>
  <span class="gris">â”‚(TIM4_CH2)â”‚</span>
  <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ“Š LÃ³gica de control PWM</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>AIN1 (PWM)</th><th>AIN2 (DIR)</th><th>Resultado motor</th></tr></thead>
      <tbody>
        <tr><td>PWM (0â€“100%)</td><td>LOW (0V)</td><td>Gira hacia adelante a velocidad proporcional al duty cycle</td></tr>
        <tr><td>LOW (0V)</td><td>PWM (0â€“100%)</td><td>Gira hacia atrÃ¡s a velocidad proporcional al duty cycle</td></tr>
        <tr><td>LOW (0V)</td><td>LOW (0V)</td><td>Motor en punto muerto (gira libre)</td></tr>
        <tr><td>HIGH (3.3V)</td><td>HIGH (3.3V)</td><td>Freno activo del motor</td></tr>
      </tbody>
    </table>
    </div>
  </div>
</div>

<!-- SECCIÃ“N 8: MOTORES -->
<div class="seccion verde">
  <div class="sec-titulo">
    <div class="sec-num">8</div>
    <span class="emoji">âš™ï¸</span>
    <h2>Motores GA12-N20 + Encoders Ã— 2</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>Los 6 cables del motor:</strong>
      El GA12-N20 trae 2 cables gruesos (el motor DC) y 4 cables delgados (el encoder). No los confundas. Los gruesos van al DRV8833. Los delgados van al STM32 y a la alimentaciÃ³n 3.3V.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ IdentificaciÃ³n de los 6 cables</h3>
    <div class="diagrama-cable"><span class="titulo">  GA12-N20 CON ENCODER â€“ LOS 6 CABLES</span>

  <span class="gris">  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">  â”‚             Motor GA12-N20                          â”‚</span>
  <span class="gris">  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚</span>
  <span class="gris">  â”‚  â”‚  [Engranajes reductores]â”‚â”€â”€ Eje de salida         â”‚</span>
  <span class="gris">  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚</span>
  <span class="gris">  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚</span>
  <span class="gris">  â”‚  â”‚  [Motor DC]             â”‚                         â”‚</span>
  <span class="gris">  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚</span>
  <span class="gris">  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚</span>
  <span class="gris">  â”‚  â”‚  [Encoder magnÃ©tico]    â”‚                         â”‚</span>
  <span class="gris">  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚</span>
  <span class="gris">  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                           â”‚
         6 cables salen juntos del motor:

  <span class="rojo">  â•â•â• Cable ROJO   â•â•â•â• Motor DC (+)</span>    â†’ DRV8833 AOUT1
  <span class="gris">  â”€â”€â”€ Cable NEGRO  â”€â”€â”€ Motor DC (â€“)</span>    â†’ DRV8833 AOUT2

  <span class="verde">  â”€â”€â”€ Cable VERDE  â”€â”€â”€ Encoder VCC</span>     â†’ <span class="azul">3.3V (del Buck)</span>
  <span class="azul">  â”€â”€â”€ Cable AZUL   â”€â”€â”€ Encoder GND</span>     â†’ GND comÃºn
  <span class="amarillo">  â”€â”€â”€ Cable AMARILLOâ”€â”€ Encoder Canal A</span>  â†’ PA6 (izq) / PB6 (der)
  <span class="blanco">  â”€â”€â”€ Cable BLANCO  â”€â”€â”€ Encoder Canal B</span>  â†’ PA7 (izq) / PB7 (der)

  <span class="naranja">âš ï¸ Los colores pueden variar segÃºn el fabricante/lote.</span>
  <span class="naranja">   Los 2 cables gruesos = Motor DC. Los 4 delgados = Encoder.</span>
  <span class="naranja">   Si el motor gira al revÃ©s: intercambia rojo y negro. Sin daÃ±o.</span>
  <span class="naranja">   Si el encoder cuenta al revÃ©s: intercambia amarillo y blanco. Sin daÃ±o.</span></div>
  </div>

  <div class="sub">
    <h3>ğŸ“Š Tabla pin a pin â€“ Motor Izquierdo</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>Cable del motor</th><th>Color tÃ­pico</th><th>Conecta a</th></tr></thead>
      <tbody>
        <tr><td>Motor DC (+)</td><td><span class="w w-rojo"><span class="dot"></span>Rojo</span></td><td>DRV8833 #1 â€“ AOUT1</td></tr>
        <tr><td>Motor DC (â€“)</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>DRV8833 #1 â€“ AOUT2</td></tr>
        <tr><td>Encoder VCC</td><td><span class="w w-verde"><span class="dot"></span>Verde</span></td><td>Rail 3.3V (MP1584EN)</td></tr>
        <tr><td>Encoder GND</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>GND rail comÃºn</td></tr>
        <tr><td>Encoder Canal A</td><td><span class="w w-amarillo"><span class="dot"></span>Amarillo</span></td><td>STM32 <strong>PA6</strong> (TIM3_CH1)</td></tr>
        <tr><td>Encoder Canal B</td><td><span class="w w-blanco"><span class="dot"></span>Blanco</span></td><td>STM32 <strong>PA7</strong> (TIM3_CH2)</td></tr>
      </tbody>
    </table>
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ“Š Tabla pin a pin â€“ Motor Derecho</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>Cable del motor</th><th>Color tÃ­pico</th><th>Conecta a</th></tr></thead>
      <tbody>
        <tr><td>Motor DC (+)</td><td><span class="w w-rojo"><span class="dot"></span>Rojo</span></td><td>DRV8833 #2 â€“ AOUT1</td></tr>
        <tr><td>Motor DC (â€“)</td><td><span class="w w-negro"><span class="dot"></span>Negro</span></td><td>DRV8833 #2 â€“ AOUT2</td></tr>
        <tr><td>Encoder VCC</td><td><span class="w w-verde"><span class="dot"></span>Verde</span></td><td>Rail 3.3V (MP1584EN)</td></tr>
        <tr><td>Encoder GND</td><td><span class="w w-azul"><span class="dot"></span>Azul</span></td><td>GND rail comÃºn</td></tr>
        <tr><td>Encoder Canal A</td><td><span class="w w-amarillo"><span class="dot"></span>Amarillo</span></td><td>STM32 <strong>PB6</strong> (TIM4_CH1)</td></tr>
        <tr><td>Encoder Canal B</td><td><span class="w w-blanco"><span class="dot"></span>Blanco</span></td><td>STM32 <strong>PB7</strong> (TIM4_CH2)</td></tr>
      </tbody>
    </table>
    </div>
  </div>
</div>

<!-- SECCIÃ“N 9: BOTÃ“N -->
<div class="seccion">
  <div class="sec-titulo">
    <div class="sec-num">9</div>
    <span class="emoji">ğŸ”˜</span>
    <h2>BotÃ³n de Modo â€“ GPIOB</h2>
  </div>

  <div class="aviso mecate">
    <div class="icono"></div>
    <div class="texto">
      <strong>Â¿Para quÃ© sirve?:</strong>
      Selecciona si el robot explora el laberinto (MODO_EXPLORACION) o lo resuelve rÃ¡pido con el mapa ya guardado (MODO_FAST_RUN). En Simulink hay un bloque NOT que invierte la lÃ³gica del botÃ³n.
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ Cableado del botÃ³n â€“ 2 cables nada mÃ¡s</h3>
    <div class="diagrama-cable"><span class="titulo">  BOTÃ“N DE MODO â€“ CABLEADO CON PULL-UP INTERNO DEL STM32</span>
<span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

  STM32 BlackPill
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   PB0    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Terminal 1 del botÃ³n
  â”‚(GPIO_IN) â”‚          (pull-up interno           â”‚
  â”‚  GND     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Terminal 2 del botÃ³n
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ESTADO SIN PRESIONAR: PB0 = <span class="azul">3.3V (HIGH)</span> â†’ NOT â†’ <span class="verde">MODO_FAST_RUN</span>
  ESTADO PRESIONADO:    PB0 = <span class="gris">0V  (LOW)</span>  â†’ NOT â†’ <span class="cyan">MODO_EXPLORACION</span>

  <span class="verde">Solo 2 cables: PB0 a un terminal del botÃ³n, GND al otro terminal.</span>
  <span class="verde">El pull-up interno del STM32 hace el resto. Sin componentes extra.</span></div>
  </div>

  <div class="aviso tip">
    <div class="icono"></div>
    <div class="texto">
      <strong>En STM32CubeMX:</strong> Configura PB0 como <code>GPIO_Input</code> con <strong>Pull-up</strong> activado. Eso es todo. El STM32 tiene una resistencia pull-up interna de ~40kÎ© que mantiene la lÃ­nea en HIGH cuando el botÃ³n no estÃ¡ presionado.
    </div>
  </div>
</div>

<!-- SECCIÃ“N 10: PROGRAMACIÃ“N -->
<div class="seccion">
  <div class="sec-titulo">
    <div class="sec-num">10</div>
    <span class="emoji">ğŸ’»</span>
    <h2>ProgramaciÃ³n â€“ ST-Link SWD</h2>
  </div>

  <div class="sub">
    <h3>ğŸ”Œ Conexiones ST-Link V2 â†’ STM32 (4 cables)</h3>
    <div class="diagrama-cable"><span class="titulo">  ST-LINK V2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º STM32 BlackPill</span>
<span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>

  <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>              <span class="gris">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
  <span class="gris">â”‚     ST-LINK V2       â”‚</span>              <span class="gris">â”‚   STM32 BlackPill    â”‚</span>
  <span class="gris">â”‚                     â”‚</span>              <span class="gris">â”‚                      â”‚</span>
  <span class="gris">â”‚  [3.3V] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="rojo">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â–º [3V3]               â”‚</span>
  <span class="gris">â”‚  [GND]  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º [GND]               â”‚</span>
  <span class="gris">â”‚  [SWDIO]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="naranja">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â–º [PA13 / SWDIO]      â”‚</span>
  <span class="gris">â”‚  [SWDCLK]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="amarillo">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â–º [PA14 / SWDCLK]     â”‚</span>
  <span class="gris">â”‚  [RST]  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="morado">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="gris">â–º [NRST] (opcional)   â”‚</span>
  <span class="gris">â”‚                     â”‚</span>              <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
  <span class="gris">â”‚  [USB-A]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><span class="cyan">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º PC</span>
  <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

  <span class="naranja">Conecta siempre el cable GND primero.</span></div>

    <div class="sub">
      <h3>ğŸ”§ Pasos para grabar el firmware desde Simulink</h3>
      <div class="pasos">
        <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Configura el target en Simulink:</strong> Model Configuration Parameters â†’ Hardware Implementation â†’ selecciona <em>STMicroelectronics â†’ STM32F4xx Based</em>.</div></div>
        <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Conecta el ST-Link</strong> al PC por USB y al STM32 por los 4 cables SWD.</div></div>
        <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Haz clic en Deploy to Hardware</strong> en Simulink. Genera el cÃ³digo C, lo compila y lo graba al STM32 automÃ¡ticamente.</div></div>
        <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>El STM32 arranca</strong> el firmware automÃ¡ticamente. Si no, presiona el botÃ³n NRST de la BlackPill.</div></div>
      </div>
    </div>
  </div>
</div>

<!-- SECCIÃ“N 11: DIAGRAMA GLOBAL -->
<div class="resumen-final">
  <h2>ğŸ“ Diagrama Global â€“ Sistema Completo</h2>
  <div class="diagrama-cable" style="background:#0a0f1a"><span class="titulo">â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   SISTEMA COMPLETO ROBOT MICROMOUSE STM32F401CCU6                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” ALIMENTACIÃ“N â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

  <span class="rojo">â•”â•â•â•â•â•â•â•â•â•â•â•—</span> SW  <span class="azul">â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span>
  <span class="rojo">â•‘ LiPo     â•Ÿâ”€â”€â”€â”€â–ºâ•‘  MP1584EN Buck   â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 3.3V RAIL</span>
  <span class="rojo">â•‘ 3.7V     â•‘</span>     <span class="azul">â•‘  (ajustar 3.3V)  â•‘</span>
  <span class="rojo">â•šâ•â•â•â•â•¤â•â•â•â•â•â•</span>     <span class="azul">â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
       <span class="rojo">â”‚</span>
       <span class="verde">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span>
                   <span class="verde">â•‘  XL6009 Boost    â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 6.0V RAIL</span>
                   <span class="verde">â•‘  (ajustar 6V)    â•‘</span>
                   <span class="verde">â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
       <span class="gris">â”‚</span>
       <span class="gris">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GND RAIL</span>

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” STM32 BLACKPILL â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

  <span class="azul">3.3V RAIL â”€â”€â–º 3V3                                        GND â—„â”€â”€ GND RAIL</span>

                <span class="gris">â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—</span>
  <span class="morado">PB12â”€â”€â–ºXSHUT1 â•‘                                          â•‘ PB9 â—„â”€â”€â–º SDA1 â”€â”€â–º VL53L0X IZQ/CEN/DER</span>
  <span class="morado">PB13â”€â”€â–ºXSHUT2 â•‘          STM32F401CCU6                   â•‘ PB8 â—„â”€â”€â–º SCL1 â”€â”€â–º VL53L0X IZQ/CEN/DER</span>
  <span class="morado">PB14â”€â”€â–ºXSHUT3 â•‘             BlackPill                    â•‘ PB3 â—„â”€â”€â–º SDA2 â”€â”€â–º VL53L0X TRS + MPU6050</span>
  <span class="morado">PB15â”€â”€â–ºXSHUT4 â•‘                                          â•‘PB10 â—„â”€â”€â–º SCL2 â”€â”€â–º VL53L0X TRS + MPU6050</span>
                <span class="gris">â•‘                                          â•‘</span>
  <span class="rojo">PA8 â”€â”€â–º PWM   â•‘    Red Neuronal IA                       â•‘ PA6 â—„â”€â”€ TIM3_CH1 â—„â”€â”€ Encoder IZQ Canal A</span>
  <span class="rojo">PA9 â”€â”€â–º DIR   â•‘    Control PID                           â•‘ PA7 â—„â”€â”€ TIM3_CH2 â—„â”€â”€ Encoder IZQ Canal B</span>
  <span class="rojo">PA10â”€â”€â–º PWM   â•‘    Mapa_Paredes                          â•‘ PB6 â—„â”€â”€ TIM4_CH1 â—„â”€â”€ Encoder DER Canal A</span>
  <span class="rojo">PA11â”€â”€â–º DIR   â•‘                                          â•‘ PB7 â—„â”€â”€ TIM4_CH2 â—„â”€â”€ Encoder DER Canal B</span>
                <span class="gris">â•‘                                          â•‘</span>
  <span class="naranja">PB0  â—„â”€â”€ BotÃ³n â•‘                                          â•‘PA13 â—„â”€â”€â–º SWDIO  â—„â”€â”€â–º ST-Link</span>
                <span class="gris">â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>  <span class="naranja">PA14 â—„â”€â”€ SWDCLK â—„â”€â”€ ST-Link</span>

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” DRIVERS Y MOTORES â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

  <span class="rojo">PA8  â”€â”€â–º DRV8833#1 AIN1</span>
  <span class="rojo">PA9  â”€â”€â–º DRV8833#1 AIN2                                 â”€â”€â–º AOUT1/AOUT2 â”€â”€â–º Motor IZQ</span>
  <span class="azul">          DRV8833#1 VCC  â—„â”€â”€ 3.3V RAIL</span>
  <span class="azul">          DRV8833#1 nSLEEP â—„â”€â”€ 3.3V (siempre HIGH)</span>
  <span class="verde">          DRV8833#1 VM   â—„â”€â”€ 6V RAIL</span>
  <span class="verde">         Motor IZQ Encoder: Verde=3.3V Â· Azul=GND Â· Amarillo=PA6 Â· Blanco=PA7</span>

  <span class="rojo">PA10 â”€â”€â–º DRV8833#2 AIN1</span>
  <span class="rojo">PA11 â”€â”€â–º DRV8833#2 AIN2                                 â”€â”€â–º AOUT1/AOUT2 â”€â”€â–º Motor DER</span>
  <span class="azul">          DRV8833#2 VCC  â—„â”€â”€ 3.3V RAIL</span>
  <span class="azul">          DRV8833#2 nSLEEP â—„â”€â”€ 3.3V (siempre HIGH)</span>
  <span class="verde">          DRV8833#2 VM   â—„â”€â”€ 6V RAIL</span>
  <span class="verde">         Motor DER Encoder: Verde=3.3V Â· Azul=GND Â· Amarillo=PB6 Â· Blanco=PB7</span>

<span class="amarillo">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” SENSORES I2C â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span>

  Bus I2C1 (PB8=SCL, PB9=SDA):
  <span class="cyan">  â”œâ”€â”€ VL53L0X IZQ  (0x30):  VIN=3.3V Â· GND Â· SCL=PB8 Â· SDA=PB9 Â· XSHUT=PB12</span>
  <span class="cyan">  â”œâ”€â”€ VL53L0X CEN  (0x31):  VIN=3.3V Â· GND Â· SCL=PB8 Â· SDA=PB9 Â· XSHUT=PB13</span>
  <span class="cyan">  â””â”€â”€ VL53L0X DER  (0x29):  VIN=3.3V Â· GND Â· SCL=PB8 Â· SDA=PB9 Â· XSHUT=PB14</span>

  Bus I2C2 (PB10=SCL, PB3=SDA):
  <span class="cyan">  â”œâ”€â”€ VL53L0X TRS  (0x29):  VIN=3.3V Â· GND Â· SCL=PB10 Â· SDA=PB3 Â· XSHUT=PB15</span>
  <span class="morado">  â””â”€â”€ MPU6050      (0x68):  VCC=3.3V Â· GND Â· SCL=PB10 Â· SDA=PB3 Â· AD0=GND</span></div>
</div>

<!-- SECCIÃ“N 12: CHECKLIST -->
<div class="seccion verde">
  <div class="sec-titulo">
    <div class="sec-num">12</div>
    <span class="emoji">âœ…</span>
    <h2>Checklist â€“ Verifica antes de encender</h2>
  </div>

  <div class="aviso peligro">
    <div class="icono"></div>
    <div class="texto">
      <strong>Â¡Sigue esta lista EN ORDEN antes de conectar la baterÃ­a!</strong>
      Cada punto previene un daÃ±o diferente. Si no puedes marcar uno, no avances.
    </div>
  </div>

  <div class="check-grid">
    <div class="check-group">
      <h4>âš¡ AlimentaciÃ³n</h4>
      <div class="check-item"><div class="check-box"></div><span>BaterÃ­a LiPo cargada (3.7â€“4.2V, mide con multÃ­metro)</span></div>
      <div class="check-item"><div class="check-box"></div><span>Switch en OFF antes de conectar todo</span></div>
      <div class="check-item"><div class="check-box"></div><span>MP1584EN ajustado a exactamente 3.30V</span></div>
      <div class="check-item"><div class="check-box"></div><span>XL6009 ajustado a exactamente 6.00V</span></div>
      <div class="check-item"><div class="check-box"></div><span>GND rail comÃºn conectado a TODOS los mÃ³dulos</span></div>
      <div class="check-item"><div class="check-box"></div><span>nSLEEP de DRV8833 #1 y #2 conectados a 3.3V</span></div>
    </div>
    <div class="check-group">
      <h4>ğŸ”­ Sensores VL53L0X Ã— 4</h4>
      <div class="check-item"><div class="check-box"></div><span>IZQ: VINâ†’3.3V, GND, SCLâ†’PB8, SDAâ†’PB9, XSHUTâ†’PB12</span></div>
      <div class="check-item"><div class="check-box"></div><span>CEN: VINâ†’3.3V, GND, SCLâ†’PB8, SDAâ†’PB9, XSHUTâ†’PB13</span></div>
      <div class="check-item"><div class="check-box"></div><span>DER: VINâ†’3.3V, GND, SCLâ†’PB8, SDAâ†’PB9, XSHUTâ†’PB14</span></div>
      <div class="check-item"><div class="check-box"></div><span>TRS: VINâ†’3.3V, GND, SCLâ†’PB10, SDAâ†’PB3, XSHUTâ†’PB15</span></div>
    </div>
    <div class="check-group">
      <h4>ğŸ”„ MPU6050</h4>
      <div class="check-item"><div class="check-box"></div><span>VCC â†’ 3.3V (Â¡no 5V!)</span></div>
      <div class="check-item"><div class="check-box"></div><span>GND â†’ GND comÃºn</span></div>
      <div class="check-item"><div class="check-box"></div><span>SCL â†’ PB10 Â· SDA â†’ PB3</span></div>
      <div class="check-item"><div class="check-box"></div><span>AD0 â†’ GND (direcciÃ³n 0x68)</span></div>
    </div>
    <div class="check-group">
      <h4>âš™ï¸ Motores y Drivers</h4>
      <div class="check-item"><div class="check-box"></div><span>DRV8833 #1: VMâ†’6V, VCCâ†’3.3V, nSLEEPâ†’3.3V, GNDâ†’GND</span></div>
      <div class="check-item"><div class="check-box"></div><span>DRV8833 #1: AIN1â†’PA8, AIN2â†’PA9, AOUTâ†’Motor Izq</span></div>
      <div class="check-item"><div class="check-box"></div><span>DRV8833 #2: VMâ†’6V, VCCâ†’3.3V, nSLEEPâ†’3.3V, GNDâ†’GND</span></div>
      <div class="check-item"><div class="check-box"></div><span>DRV8833 #2: AIN1â†’PA10, AIN2â†’PA11, AOUTâ†’Motor Der</span></div>
      <div class="check-item"><div class="check-box"></div><span>Encoder Izq: Verde=3.3V Â· Azul=GND Â· Amarillo=PA6 Â· Blanco=PA7</span></div>
      <div class="check-item"><div class="check-box"></div><span>Encoder Der: Verde=3.3V Â· Azul=GND Â· Amarillo=PB6 Â· Blanco=PB7</span></div>
    </div>
    <div class="check-group">
      <h4>ğŸ”˜ BotÃ³n y programaciÃ³n</h4>
      <div class="check-item"><div class="check-box"></div><span>BotÃ³n: PB0 a terminal 1, GND a terminal 2</span></div>
      <div class="check-item"><div class="check-box"></div><span>ST-Link: GNDÂ·3.3VÂ·SWDIO(PA13)Â·SWDCLK(PA14)</span></div>
      <div class="check-item"><div class="check-box"></div><span>Firmware grabado sin errores desde Simulink</span></div>
    </div>
    <div class="check-group">
      <h4>ğŸ§ª Prueba inicial (switch ON)</h4>
      <div class="check-item"><div class="check-box"></div><span>Rail 3.3V mide 3.3V con todo conectado</span></div>
      <div class="check-item"><div class="check-box"></div><span>Rail 6V mide 6V con todo conectado</span></div>
      <div class="check-item"><div class="check-box"></div><span>STM32 no se calienta excesivamente</span></div>
      <div class="check-item"><div class="check-box"></div><span>DRV8833 no se calientan en reposo</span></div>
      <div class="check-item"><div class="check-box"></div><span>Motores responden a comandos de prueba</span></div>
    </div>
  </div>
</div>

<!-- SECCIÃ“N 13: TROUBLESHOOTING -->
<div class="seccion">
  <div class="sec-titulo">
    <div class="sec-num">13</div>
    <span class="emoji">ğŸ”§</span>
    <h2>Problemas Comunes y Soluciones</h2>
  </div>

  <div class="trouble-item">
    <div class="trouble-problema">âŒ Sensor VL53L0X no responde en I2C</div>
    <div class="trouble-causa">ğŸ“Œ Causa: Pin XSHUT en LOW (sensor apagado) o direcciÃ³n I2C duplicada por inicializaciÃ³n incorrecta</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Verifica que XSHUT estÃ© en HIGH durante operaciÃ³n. AsegÃºrate que el firmware ejecuta la secuencia de asignaciÃ³n de direcciones en el orden correcto (IZQâ†’CENâ†’DER).</div>
  </div>
  <div class="trouble-item">
    <div class="trouble-problema">âŒ MPU6050 no responde (no aparece en direcciÃ³n 0x68)</div>
    <div class="trouble-causa">ğŸ“Œ Causa: Pin AD0 conectado a 3.3V en lugar de GND â†’ direcciÃ³n queda en 0x69</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Conecta el pin AD0 del MPU6050 directamente a GND. Mide con multÃ­metro que haya 0V en ese pin.</div>
  </div>
  <div class="trouble-item">
    <div class="trouble-problema">âŒ Motor no gira y DRV8833 estÃ¡ muy caliente</div>
    <div class="trouble-causa">ğŸ“Œ Causa: Cortocircuito en cables del motor o el driver estÃ¡ en overcurrent</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Desconecta el motor inmediatamente. Mide resistencia entre AOUT1 y AOUT2: debe ser ~5â€“15Î©. Si marca 0Î© hay cortocircuito. Verifica que ningÃºn cable del motor toca GND o 3.3V.</div>
  </div>
  <div class="trouble-item">
    <div class="trouble-problema">âŒ Motor gira en direcciÃ³n incorrecta</div>
    <div class="trouble-causa">ğŸ“Œ Causa: Los cables del motor DC (rojo/negro) estÃ¡n invertidos en AOUT1/AOUT2</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Intercambia los dos cables del motor DC. No daÃ±a nada. El encoder no se afecta.</div>
  </div>
  <div class="trouble-item">
    <div class="trouble-problema">âŒ Encoder cuenta al revÃ©s</div>
    <div class="trouble-causa">ğŸ“Œ Causa: Canales A y B del encoder invertidos</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Intercambia los cables amarillo y blanco del encoder. Sin riesgo de daÃ±o.</div>
  </div>
  <div class="trouble-item">
    <div class="trouble-problema">âŒ STM32 se reinicia constantemente</div>
    <div class="trouble-causa">ğŸ“Œ Causa: Voltaje 3.3V inestable o el Buck no puede dar suficiente corriente</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Agrega condensador electrolÃ­tico 10ÂµF en la salida del MP1584EN. Verifica que el Buck puede dar al menos 500mA. Pon condensadores 100nF cerca de los pines VDD del STM32.</div>
  </div>
  <div class="trouble-item">
    <div class="trouble-problema">âŒ ST-Link no detecta el STM32</div>
    <div class="trouble-causa">ğŸ“Œ Causa: Pin BOOT0 en HIGH (modo bootloader) o conexiones SWD incorrectas</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Verifica que BOOT0 estÃ¡ a GND en la BlackPill. MantÃ©n presionado NRST mientras haces clic en Connect en STM32CubeProgrammer, luego suelta el reset.</div>
  </div>
  <div class="trouble-item">
    <div class="trouble-problema">âŒ Robot gira en cÃ­rculos al intentar avanzar recto</div>
    <div class="trouble-causa">ğŸ“Œ Causa: PID no calibrado o los dos motores tienen respuesta mecÃ¡nica diferente</div>
    <div class="trouble-solucion">âœ… SoluciÃ³n: Ajusta los parÃ¡metros Kp, Ki, Kd del bloque Control_PID en Simulink. El MPU6050 corrige esto dinÃ¡micamente cuando el PID estÃ¡ bien sintonizado.</div>
  </div>
</div>

<!-- SECCIÃ“N 14: CUBEMX -->
<div class="seccion cyan">
  <div class="sec-titulo">
    <div class="sec-num">14</div>
    <span class="emoji">âš™ï¸</span>
    <h2>ConfiguraciÃ³n en STM32CubeMX</h2>
  </div>

  <div class="sub">
    <h3>ğŸ“‹ Tabla de perifÃ©ricos a configurar</h3>
    <div class="tabla-wrap">
    <table>
      <thead><tr><th>PerifÃ©rico</th><th>Modo</th><th>Pines</th><th>ParÃ¡metros clave</th></tr></thead>
      <tbody>
        <tr><td><strong>TIM1</strong></td><td>PWM Generation CH1/CH2/CH3/CH4</td><td>PA8, PA9, PA10, PA11</td><td>Frecuencia: 20kHz. Los 4 canales activos.</td></tr>
        <tr><td><strong>TIM3</strong></td><td>Encoder Mode TI1 and TI2</td><td>PA6, PA7</td><td>Counter period: 65535. Encoder motor izquierdo.</td></tr>
        <tr><td><strong>TIM4</strong></td><td>Encoder Mode TI1 and TI2</td><td>PB6, PB7</td><td>Counter period: 65535. Encoder motor derecho.</td></tr>
        <tr><td><strong>I2C1</strong></td><td>I2C</td><td>PB8 (SCL), PB9 (SDA)</td><td>Speed: Fast Mode 400kHz. Para VL53L0X Ã—3.</td></tr>
        <tr><td><strong>I2C2</strong></td><td>I2C</td><td>PB10 (SCL), PB3 (SDA)</td><td>Speed: Fast Mode 400kHz. Para VL53L0X trasero + MPU6050.</td></tr>
        <tr><td><strong>PB12â€“PB15</strong></td><td>GPIO_Output</td><td>PB12, PB13, PB14, PB15</td><td>Output level: Low por defecto. Para XSHUT de sensores.</td></tr>
        <tr><td><strong>PB0</strong></td><td>GPIO_Input</td><td>PB0</td><td>Pull-up activado. Para botÃ³n de modo.</td></tr>
        <tr><td><strong>SYS</strong></td><td>Debug: Serial Wire</td><td>PA13, PA14</td><td>Siempre habilitado para programaciÃ³n SWD.</td></tr>
        <tr><td><strong>Clock</strong></td><td>HSI / PLL</td><td>â€“</td><td>HCLK = 84 MHz (mÃ¡ximo del STM32F401).</td></tr>
      </tbody>
    </table>
    </div>
  </div>

  <div class="sub">
    <h3>ğŸ”§ Secuencia rÃ¡pida de configuraciÃ³n</h3>
    <div class="pasos">
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Nuevo proyecto:</strong> STM32CubeMX â†’ New Project â†’ busca <em>STM32F401CCU6</em> â†’ Start Project.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>Clock:</strong> Clock Configuration â†’ sube HCLK a <strong>84 MHz</strong> usando el PLL.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>SWD:</strong> System Core â†’ SYS â†’ Debug = <strong>Serial Wire</strong>.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>I2C1:</strong> Connectivity â†’ I2C1 â†’ I2C, Fast Mode 400kHz. PB8/PB9 se asignan solos.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>I2C2:</strong> Igual que I2C1. PB10/PB3 se asignan solos.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>TIM1 PWM:</strong> Timers â†’ TIM1 â†’ Clock Source: Internal. CH1/CH2/CH3/CH4 â†’ PWM Generation.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>TIM3 Encoder:</strong> Timers â†’ TIM3 â†’ Combined Channels â†’ Encoder Mode. PA6/PA7 solos.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>TIM4 Encoder:</strong> Igual que TIM3. PB6/PB7 se asignan solos.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>XSHUT GPIOs:</strong> Click en PB12, PB13, PB14, PB15 en el pinout â†’ GPIO_Output para cada uno.</div></div>
      <div class="paso"><div class="paso-num"></div><div class="paso-content"><strong>BotÃ³n PB0:</strong> Click en PB0 â†’ GPIO_Input. En GPIO settings activa <strong>Pull-up</strong>.</div></div>
    </div>
  </div>
</div>

</div><!-- end wrap -->

<footer>
  <p>ğŸ¤– Manual de Conexiones Robot Micromouse <span>STM32F401CCU6</span></p>
  <p>MÃ³dulos breakout de AliExpress Â· Sin componentes extra Â· Reguladores MP1584EN y XL6009</p>
  <p style="margin-top:8px;font-size:11px;">Verifica voltajes con multÃ­metro antes de encender âš¡</p>
</footer>
</body>
</html>
